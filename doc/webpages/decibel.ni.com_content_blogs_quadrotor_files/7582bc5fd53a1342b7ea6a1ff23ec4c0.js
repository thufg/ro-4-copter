if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}dwr.engine.setErrorHandler=function(A){dwr.engine._errorHandler=A};dwr.engine.setWarningHandler=function(A){dwr.engine._warningHandler=A};dwr.engine.setTextHtmlHandler=function(A){dwr.engine._textHtmlHandler=A};dwr.engine.setTimeout=function(A){dwr.engine._timeout=A};dwr.engine.setPreHook=function(A){dwr.engine._preHook=A};dwr.engine.setPostHook=function(A){dwr.engine._postHook=A};dwr.engine.setHeaders=function(A){dwr.engine._headers=A};dwr.engine.setParameters=function(A){dwr.engine._parameters=A};dwr.engine.XMLHttpRequest=1;dwr.engine.IFrame=2;dwr.engine.ScriptTag=3;dwr.engine.setRpcType=function(A){if(A!=dwr.engine.XMLHttpRequest&&A!=dwr.engine.IFrame&&A!=dwr.engine.ScriptTag){dwr.engine._handleError(null,{name:"dwr.engine.invalidRpcType",message:"RpcType must be one of dwr.engine.XMLHttpRequest or dwr.engine.IFrame or dwr.engine.ScriptTag"});return }dwr.engine._rpcType=A};dwr.engine.setHttpMethod=function(A){if(A!="GET"&&A!="POST"){dwr.engine._handleError(null,{name:"dwr.engine.invalidHttpMethod",message:"Remoting method must be one of GET or POST"});return }dwr.engine._httpMethod=A};dwr.engine.setOrdered=function(A){dwr.engine._ordered=A};dwr.engine.setAsync=function(A){dwr.engine._async=A};dwr.engine.setActiveReverseAjax=function(A){if(A){if(dwr.engine._activeReverseAjax){return }dwr.engine._activeReverseAjax=true;dwr.engine._poll()}else{if(dwr.engine._activeReverseAjax&&dwr.engine._pollReq){dwr.engine._pollReq.abort()}dwr.engine._activeReverseAjax=false}};dwr.engine.defaultErrorHandler=function(B,A){dwr.engine._debug("Error: "+A.name+", "+A.message,true);if(B==null||B==""){alert("A server error has occured.")}else{if(B.indexOf("0x80040111")!=-1){dwr.engine._debug(B)}else{alert(B)}}};dwr.engine.defaultWarningHandler=function(B,A){dwr.engine._debug(B)};dwr.engine.beginBatch=function(){if(dwr.engine._batch){dwr.engine._handleError(null,{name:"dwr.engine.batchBegun",message:"Batch already begun"});return }dwr.engine._batch=dwr.engine._createBatch()};dwr.engine.endBatch=function(B){var A=dwr.engine._batch;if(A==null){dwr.engine._handleError(null,{name:"dwr.engine.batchNotBegun",message:"No batch in progress"});return }dwr.engine._batch=null;if(A.map.callCount==0){return }if(B){dwr.engine._mergeBatch(A,B)}if(dwr.engine._ordered&&dwr.engine._batchesLength!=0){dwr.engine._batchQueue[dwr.engine._batchQueue.length]=A}else{dwr.engine._sendData(A)}};dwr.engine.setPollMethod=function(A){dwr.engine.setPollType(A)};dwr.engine.setMethod=function(A){dwr.engine.setRpcType(A)};dwr.engine.setVerb=function(A){dwr.engine.setHttpMethod(A)};dwr.engine.setPollType=function(){dwr.engine._debug("Manually setting the Poll Type is not supported")};dwr.engine._scriptSessionId=null;dwr.engine._getScriptSessionId=function(){if(dwr.engine._scriptSessionId==null){dwr.engine._scriptSessionId=dwr.engine._origScriptSessionId+Math.floor(Math.random()*1000)}return dwr.engine._scriptSessionId};dwr.engine._errorHandler=dwr.engine.defaultErrorHandler;dwr.engine._warningHandler=dwr.engine.defaultWarningHandler;dwr.engine._preHook=null;dwr.engine._postHook=null;dwr.engine._batches={};dwr.engine._batchesLength=0;dwr.engine._batchQueue=[];dwr.engine._rpcType=dwr.engine.XMLHttpRequest;dwr.engine._httpMethod="POST";dwr.engine._ordered=false;dwr.engine._async=true;dwr.engine._batch=null;dwr.engine._timeout=0;dwr.engine._DOMDocument=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];dwr.engine._XMLHTTP=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];dwr.engine._activeReverseAjax=false;dwr.engine._outstandingIFrames=[];dwr.engine._pollReq=null;dwr.engine._pollCometInterval=200;dwr.engine._pollRetries=0;dwr.engine._maxPollRetries=0;dwr.engine._textHtmlHandler=null;dwr.engine._headers=null;dwr.engine._parameters=null;dwr.engine._postSeperator="\n";dwr.engine._defaultInterceptor=function(A){return A};dwr.engine._urlRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._contentRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._replyRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._nextBatchId=0;dwr.engine._propnames=["rpcType","httpMethod","async","timeout","errorHandler","warningHandler","textHtmlHandler"];dwr.engine._partialResponseNo=0;dwr.engine._partialResponseYes=1;dwr.engine._partialResponseFlush=2;dwr.engine._unloading=false;dwr.engine._execute=function(K,B,I,H){var E=false;if(dwr.engine._batch==null){dwr.engine.beginBatch();E=true}var D=dwr.engine._batch;var G=[];for(var C=0;C<arguments.length-3;C++){G[C]=arguments[C+3]}if(D.path==null){D.path=K}else{if(D.path!=K){dwr.engine._handleError(D,{name:"dwr.engine.multipleServlets",message:"Can't batch requests to multiple DWR Servlets."});return }}var A;var J=G[G.length-1];if(typeof J=="function"||J==null){A={callback:G.pop()}}else{A=G.pop()}dwr.engine._mergeBatch(D,A);D.handlers[D.map.callCount]={exceptionHandler:A.exceptionHandler,callback:A.callback};var F="c"+D.map.callCount+"-";D.map[F+"scriptName"]=B;D.map[F+"methodName"]=I;D.map[F+"id"]=D.map.callCount;for(C=0;C<G.length;C++){dwr.engine._serializeAll(D,[],G[C],F+"param"+C)}D.map.callCount++;if(E){dwr.engine.endBatch()}};dwr.engine._poll=function(){if(!dwr.engine._activeReverseAjax){return }var A=dwr.engine._createBatch();A.map.id=0;A.map.callCount=1;A.isPoll=true;if(dwr.engine._pollWithXhr=="true"){A.rpcType=dwr.engine.XMLHttpRequest;A.map.partialResponse=dwr.engine._partialResponseNo}else{if(navigator.userAgent.indexOf("Gecko/")!=-1){A.rpcType=dwr.engine.XMLHttpRequest;A.map.partialResponse=dwr.engine._partialResponseYes}else{A.rpcType=dwr.engine.XMLHttpRequest;A.map.partialResponse=dwr.engine._partialResponseNo}}A.httpMethod="POST";A.async=true;A.timeout=0;A.path=dwr.engine._defaultPath;A.preHooks=[];A.postHooks=[];A.errorHandler=dwr.engine._pollErrorHandler;A.warningHandler=dwr.engine._pollErrorHandler;A.handlers[0]={callback:function(B){dwr.engine._pollRetries=0;setTimeout(dwr.engine._poll,B)}};dwr.engine._sendData(A);if(A.rpcType==dwr.engine.XMLHttpRequest&&A.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._checkCometPoll()}};dwr.engine._pollErrorHandler=function(B,A){dwr.engine._pollRetries++;dwr.engine._debug("Reverse Ajax poll failed (pollRetries="+dwr.engine._pollRetries+"): "+A.name+" : "+A.message);if(dwr.engine._pollRetries<dwr.engine._maxPollRetries){setTimeout(dwr.engine._poll,10000)}else{dwr.engine._activeReverseAjax=false;dwr.engine._debug("Giving up.")}};dwr.engine._createBatch=function(){var A={map:{callCount:0,page:window.location.pathname+window.location.search,httpSessionId:dwr.engine._getJSessionId(),scriptSessionId:dwr.engine._getScriptSessionId()},charsProcessed:0,paramCount:0,parameters:{},headers:{},isPoll:false,handlers:{},preHooks:[],postHooks:[],rpcType:dwr.engine._rpcType,httpMethod:dwr.engine._httpMethod,async:dwr.engine._async,timeout:dwr.engine._timeout,errorHandler:dwr.engine._errorHandler,warningHandler:dwr.engine._warningHandler,textHtmlHandler:dwr.engine._textHtmlHandler};if(dwr.engine._preHook){A.preHooks.push(dwr.engine._preHook)}if(dwr.engine._postHook){A.postHooks.push(dwr.engine._postHook)}var C,B;if(dwr.engine._headers){for(C in dwr.engine._headers){B=dwr.engine._headers[C];if(typeof B!="function"){A.headers[C]=B}}}if(dwr.engine._parameters){for(C in dwr.engine._parameters){B=dwr.engine._parameters[C];if(typeof B!="function"){A.parameters[C]=B}}}return A};dwr.engine._mergeBatch=function(A,D){var E,C;for(var B=0;B<dwr.engine._propnames.length;B++){E=dwr.engine._propnames[B];if(D[E]!=null){A[E]=D[E]}}if(D.preHook!=null){A.preHooks.unshift(D.preHook)}if(D.postHook!=null){A.postHooks.push(D.postHook)}if(D.headers){for(E in D.headers){C=D.headers[E];if(typeof C!="function"){A.headers[E]=C}}}if(D.parameters){for(E in D.parameters){C=D.parameters[E];if(typeof C!="function"){A.map["p-"+E]=""+C}}}};dwr.engine._getJSessionId=function(){var C=document.cookie.split(";");for(var B=0;B<C.length;B++){var A=C[B];while(A.charAt(0)==" "){A=A.substring(1,A.length)}if(A.indexOf(dwr.engine._sessionCookieName+"=")==0){return A.substring(dwr.engine._sessionCookieName.length+1,A.length)}}return""};dwr.engine._checkCometPoll=function(){for(var B=0;B<dwr.engine._outstandingIFrames.length;B++){var E="";var C=dwr.engine._outstandingIFrames[B];try{E=dwr.engine._getTextFromCometIFrame(C)}catch(A){dwr.engine._handleWarning(C.batch,A)}if(E!=""){dwr.engine._processCometResponse(E,C.batch)}}if(dwr.engine._pollReq){var D=dwr.engine._pollReq;var E=D.responseText;if(E!=null){dwr.engine._processCometResponse(E,D.batch)}}if(dwr.engine._outstandingIFrames.length>0||dwr.engine._pollReq){setTimeout(dwr.engine._checkCometPoll,dwr.engine._pollCometInterval)}};dwr.engine._getTextFromCometIFrame=function(B){var A=B.contentWindow.document.body;if(A==null){return""}var C=A.innerHTML;if(C.indexOf("<PRE>")==0||C.indexOf("<pre>")==0){C=C.substring(5,C.length-7)}return C};dwr.engine._processCometResponse=function(D,E){if(E.charsProcessed==D.length){return }if(D.length==0){E.charsProcessed=0;return }var B=D.indexOf("//#DWR-START#",E.charsProcessed);if(B==-1){E.charsProcessed=D.length;return }var A=D.lastIndexOf("//#DWR-END#");if(A==-1){return }if(D.charCodeAt(A+11)==13&&D.charCodeAt(A+12)==10){E.charsProcessed=A+13}else{E.charsProcessed=A+11}var C=D.substring(B+13,A);dwr.engine._receivedBatch=E;dwr.engine._eval(C);dwr.engine._receivedBatch=null};dwr.engine._sendData=function(E){E.map.batchId=dwr.engine._nextBatchId;dwr.engine._nextBatchId++;dwr.engine._batches[E.map.batchId]=E;dwr.engine._batchesLength++;E.completed=false;for(var D=0;D<E.preHooks.length;D++){E.preHooks[D]()}E.preHooks=null;if(E.timeout&&E.timeout!=0){E.timeoutId=setTimeout(function(){dwr.engine._abortRequest(E)},E.timeout)}if(E.rpcType==dwr.engine.XMLHttpRequest){if(window.XMLHttpRequest){E.req=new XMLHttpRequest()}else{if(window.ActiveXObject&&!(navigator.userAgent.indexOf("Mac")>=0&&navigator.userAgent.indexOf("MSIE")>=0)){E.req=dwr.engine._newActiveXObject(dwr.engine._XMLHTTP)}}}var A,C;if(E.req){if(E.async){E.req.onreadystatechange=function(){if(typeof dwr!="undefined"){dwr.engine._stateChange(E)}}}if(E.isPoll){dwr.engine._pollReq=E.req;if(!(document.all&&!window.opera)){E.req.batch=E}}var B=navigator.userAgent.indexOf("Safari/");if(B>=0){var G=navigator.userAgent.substring(B+7);if(parseInt(G,10)<400){if(dwr.engine._allowGetForSafariButMakeForgeryEasier=="true"){E.httpMethod="GET"}else{dwr.engine._handleWarning(E,{name:"dwr.engine.oldSafari",message:"Safari GET support disabled. See getahead.org/dwr/server/servlet and allowGetForSafariButMakeForgeryEasier."})}}}E.mode=E.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;C=dwr.engine._constructRequest(E);try{E.req.open(E.httpMethod,C.url,E.async);try{for(A in E.headers){var I=E.headers[A];if(typeof I=="string"){E.req.setRequestHeader(A,I)}}if(!E.headers["Content-Type"]){E.req.setRequestHeader("Content-Type","text/plain")}}catch(H){dwr.engine._handleWarning(E,H)}E.req.send(C.body);if(!E.async){dwr.engine._stateChange(E)}}catch(H){dwr.engine._handleError(E,H)}}else{if(E.rpcType!=dwr.engine.ScriptTag){var F=E.isPoll?"dwr-if-poll-"+E.map.batchId:"dwr-if-"+E.map.batchId;E.div=document.createElement("div");document.body.appendChild(E.div);E.div.innerHTML="<iframe src='javascript:void(0)' frameborder='0' style='width:0px;height:0px;border:0;' id='"+F+"' name='"+F+"' onload='dwr.engine._iframeLoadingComplete ("+E.map.batchId+");'></iframe>";E.document=document;E.iframe=E.document.getElementById(F);E.iframe.batch=E;E.mode=E.isPoll?dwr.engine._ModeHtmlPoll:dwr.engine._ModeHtmlCall;if(E.isPoll){dwr.engine._outstandingIFrames.push(E.iframe)}C=dwr.engine._constructRequest(E);if(E.httpMethod=="GET"){E.iframe.setAttribute("src",C.url)}else{E.form=E.document.createElement("form");E.form.setAttribute("id","dwr-form");E.form.setAttribute("action",C.url);E.form.setAttribute("style","display:none;");E.form.setAttribute("target",F);E.form.target=F;E.form.setAttribute("method",E.httpMethod);for(A in E.map){var I=E.map[A];if(typeof I!="function"){var J=E.document.createElement("input");J.setAttribute("type","hidden");J.setAttribute("name",A);J.setAttribute("value",I);E.form.appendChild(J)}}E.document.body.appendChild(E.form);E.form.submit()}}else{E.httpMethod="GET";E.mode=E.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;C=dwr.engine._constructRequest(E);E.script=document.createElement("script");E.script.id="dwr-st-"+E.map["c0-id"];E.script.src=C.url;document.body.appendChild(E.script)}}};dwr.engine._ModePlainCall="/call/plaincall/";dwr.engine._ModeHtmlCall="/call/htmlcall/";dwr.engine._ModePlainPoll="/call/plainpoll/";dwr.engine._ModeHtmlPoll="/call/htmlpoll/";dwr.engine._constructRequest=function(B){var C={url:B.path+B.mode,body:null};if(B.isPoll==true){C.url+="ReverseAjax.dwr"}else{if(B.map.callCount==1){C.url+=B.map["c0-scriptName"]+"."+B.map["c0-methodName"]+".dwr"}else{C.url+="Multiple."+B.map.callCount+".dwr"}}var E=location.href.match(/jsessionid=([^?]+)/);if(E!=null){C.url+=";jsessionid="+E[1]}var D;if(B.httpMethod=="GET"){B.map.callCount=""+B.map.callCount;C.url+="?";for(D in B.map){if(typeof B.map[D]!="function"){C.url+=encodeURIComponent(D)+"="+encodeURIComponent(B.map[D])+"&"}}C.url=C.url.substring(0,C.url.length-1)}else{C.body="";if(document.all&&!window.opera){var A=[];for(D in B.map){if(typeof B.map[D]!="function"){A.push(D+"="+B.map[D]+dwr.engine._postSeperator)}}C.body=A.join("")}else{for(D in B.map){if(typeof B.map[D]!="function"){C.body+=D+"="+B.map[D]+dwr.engine._postSeperator}}}C.body=dwr.engine._contentRewriteHandler(C.body)}C.url=dwr.engine._urlRewriteHandler(C.url);return C};dwr.engine._stateChange=function(C){var B;if(C.completed){dwr.engine._debug("Error: _stateChange() with batch.completed");return }var F=C.req;try{if(F.readyState!=4){return }}catch(D){dwr.engine._handleWarning(C,D);dwr.engine._clearUp(C);return }if(dwr.engine._unloading){dwr.engine._debug("Ignoring reply from server as page is unloading.");return }try{var E=F.responseText;E=dwr.engine._replyRewriteHandler(E);var A=F.status;if(E==null||E==""){dwr.engine._handleWarning(C,{name:"dwr.engine.missingData",message:"No data received from server"})}else{if(A!=200){dwr.engine._handleError(C,{name:"dwr.engine.http."+A,message:F.statusText})}else{var G=F.getResponseHeader("Content-Type");if(!G.match(/^text\/plain/)&&!G.match(/^text\/javascript/)){if(G.match(/^text\/html/)&&typeof C.textHtmlHandler=="function"){C.textHtmlHandler({status:A,responseText:E,contentType:G})}else{dwr.engine._handleWarning(C,{name:"dwr.engine.invalidMimeType",message:"Invalid content type: '"+G+"'"})}}else{if(C.isPoll&&C.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._processCometResponse(E,C)}else{if(E.search("//#DWR")==-1){dwr.engine._handleWarning(C,{name:"dwr.engine.invalidReply",message:"Invalid reply from server"})}else{B=E}}}}}}catch(D){dwr.engine._handleWarning(C,D)}dwr.engine._callPostHooks(C);dwr.engine._receivedBatch=C;if(B!=null){B=B.replace(dwr.engine._scriptTagProtection,"")}dwr.engine._eval(B);dwr.engine._receivedBatch=null;dwr.engine._validateBatch(C);if(!C.completed){dwr.engine._clearUp(C)}};dwr.engine._validateBatch=function(A){if(!A.completed){for(var B=0;B<A.map.callCount;B++){if(A.handlers[B]!=null){dwr.engine._handleWarning(A,{name:"dwr.engine.incompleteReply",message:"Incomplete reply from server"});break}}}};dwr.engine._iframeLoadingComplete=function(A){var B=dwr.engine._batches[A];if(B){dwr.engine._validateBatch(B)}};dwr.engine._remoteHandleCallback=function(A,F,E){var C=dwr.engine._batches[A];if(C==null){dwr.engine._debug("Warning: batch == null in remoteHandleCallback for batchId="+A,true);return }try{var B=C.handlers[F];C.handlers[F]=null;if(!B){dwr.engine._debug("Warning: Missing handlers. callId="+F,true)}else{if(typeof B.callback=="function"){B.callback(E)}}}catch(D){dwr.engine._handleError(C,D)}};dwr.engine._remoteHandleException=function(A,E,D){var C=dwr.engine._batches[A];if(C==null){dwr.engine._debug("Warning: null batch in remoteHandleException",true);return }var B=C.handlers[E];C.handlers[E]=null;if(B==null){dwr.engine._debug("Warning: null handlers in remoteHandleException",true);return }if(D.message==undefined){D.message=""}if(typeof B.exceptionHandler=="function"){B.exceptionHandler(D.message,D)}else{if(typeof C.errorHandler=="function"){C.errorHandler(D.message,D)}}};dwr.engine._remoteHandleBatchException=function(C,A){var B=(dwr.engine._receivedBatch==null&&A!=null);if(B){dwr.engine._receivedBatch=dwr.engine._batches[A]}if(C.message==undefined){C.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,C);if(B){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[A])}};dwr.engine._remotePollCometDisabled=function(C,A){dwr.engine.setActiveReverseAjax(false);var B=(dwr.engine._receivedBatch==null&&A!=null);if(B){dwr.engine._receivedBatch=dwr.engine._batches[A]}if(C.message==undefined){C.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,C);if(B){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[A])}};dwr.engine._remoteBeginIFrameResponse=function(B,A){if(B!=null){dwr.engine._receivedBatch=B.batch}dwr.engine._callPostHooks(dwr.engine._receivedBatch)};dwr.engine._remoteEndIFrameResponse=function(A){dwr.engine._clearUp(dwr.engine._receivedBatch);dwr.engine._receivedBatch=null};dwr.engine._eval=function(script){if(script==null){return null}if(script==""){dwr.engine._debug("Warning: blank script",true);return null}return eval(script)};dwr.engine._abortRequest=function(A){if(A&&!A.completed){dwr.engine._clearUp(A);if(A.req){A.req.abort()}dwr.engine._handleError(A,{name:"dwr.engine.timeout",message:"Timeout"})}};dwr.engine._callPostHooks=function(A){if(A.postHooks){for(var B=0;B<A.postHooks.length;B++){A.postHooks[B]()}A.postHooks=null}};dwr.engine._clearUp=function(B){if(!B){dwr.engine._debug("Warning: null batch in dwr.engine._clearUp()",true);return }if(B.completed){dwr.engine._debug("Warning: Double complete",true);return }if(B.div){B.div.parentNode.removeChild(B.div)}if(B.iframe){for(var C=0;C<dwr.engine._outstandingIFrames.length;C++){if(dwr.engine._outstandingIFrames[C]==B.iframe){dwr.engine._outstandingIFrames.splice(C,1)}}B.iframe.parentNode.removeChild(B.iframe)}if(B.form){B.form.parentNode.removeChild(B.form)}if(B.req){if(B.req==dwr.engine._pollReq){dwr.engine._pollReq=null}delete B.req}if(B.timeoutId){clearTimeout(B.timeoutId);delete B.timeoutId}if(B.map&&(B.map.batchId||B.map.batchId==0)){delete dwr.engine._batches[B.map.batchId];dwr.engine._batchesLength--}B.completed=true;if(dwr.engine._batchQueue.length!=0){var A=dwr.engine._batchQueue.shift();dwr.engine._sendData(A)}};dwr.engine._unloader=function(){dwr.engine._unloading=true;dwr.engine._batchQueue.length=0;for(var A in dwr.engine._batches){var B=dwr.engine._batches[A];if(B&&B.map){if(B.req){B.req.abort()}dwr.engine._clearUp(B)}}};if(window.addEventListener){window.addEventListener("unload",dwr.engine._unloader,false)}else{if(window.attachEvent){window.attachEvent("onunload",dwr.engine._unloader)}}dwr.engine._handleError=function(A,B){if(typeof B=="string"){B={name:"unknown",message:B}}if(B.message==null){B.message=""}if(B.name==null){B.name="unknown"}if(A&&typeof A.errorHandler=="function"){A.errorHandler(B.message,B)}else{if(dwr.engine._errorHandler){dwr.engine._errorHandler(B.message,B)}}if(A){dwr.engine._clearUp(A)}};dwr.engine._handleWarning=function(A,B){if(typeof B=="string"){B={name:"unknown",message:B}}if(B.message==null){B.message=""}if(B.name==null){B.name="unknown"}if(A&&typeof A.warningHandler=="function"){A.warningHandler(B.message,B)}else{if(dwr.engine._warningHandler){dwr.engine._warningHandler(B.message,B)}}if(A){dwr.engine._clearUp(A)}};dwr.engine._serializeAll=function(B,D,C,A){if(C==null){B.map[A]="null:null";return }switch(typeof C){case"boolean":B.map[A]="boolean:"+C;break;case"number":B.map[A]="number:"+C;break;case"string":B.map[A]="string:"+encodeURIComponent(C);break;case"object":if(C instanceof String){B.map[A]="String:"+encodeURIComponent(C)}else{if(C instanceof Boolean){B.map[A]="Boolean:"+C}else{if(C instanceof Number){B.map[A]="Number:"+C}else{if(C instanceof Date){B.map[A]="Date:"+C.getTime()}else{if(C&&C.join){B.map[A]=dwr.engine._serializeArray(B,D,C,A)}else{B.map[A]=dwr.engine._serializeObject(B,D,C,A)}}}}}break;case"function":break;default:dwr.engine._handleWarning(null,{name:"dwr.engine.unexpectedType",message:"Unexpected type: "+typeof C+", attempting default converter."});B.map[A]="default:"+C;break}};dwr.engine._lookup=function(E,C,A){var D;for(var B=0;B<E.length;B++){if(E[B].data==C){D=E[B];break}}if(D){return"reference:"+D.name}E.push({data:C,name:A});return null};dwr.engine._serializeObject=function(C,H,G,B){var F=dwr.engine._lookup(H,G,B);if(F){return F}if(G.nodeName&&G.nodeType){return dwr.engine._serializeXml(C,H,G,B)}var E="Object_"+dwr.engine._getObjectClassName(G)+":{";var D;for(D in G){if(typeof G[D]!="function"){C.paramCount++;var A="c"+dwr.engine._batch.map.callCount+"-e"+C.paramCount;dwr.engine._serializeAll(C,H,G[D],A);E+=encodeURIComponent(D)+":reference:"+A+", "}}if(E.substring(E.length-2)==", "){E=E.substring(0,E.length-2)}E+="}";return E};dwr.engine._errorClasses={Error:Error,EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};dwr.engine._getObjectClassName=function(C){if(C&&C.constructor&&C.constructor.toString){var D=C.constructor.toString();var A=D.match(/function\s+(\w+)/);if(A&&A.length==2){return A[1]}}if(C&&C.constructor){for(var B in dwr.engine._errorClasses){if(C.constructor==dwr.engine._errorClasses[B]){return B}}}if(C){var D=Object.prototype.toString.call(C);var A=D.match(/\[object\s+(\w+)/);if(A&&A.length==2){return A[1]}}return"Object"};dwr.engine._serializeXml=function(C,F,E,B){var D=dwr.engine._lookup(F,E,B);if(D){return D}var A;if(window.XMLSerializer){A=new XMLSerializer().serializeToString(E)}else{if(E.toXml){A=E.toXml}else{A=E.innerHTML}}return"XML:"+encodeURIComponent(A)};dwr.engine._serializeArray=function(H,C,F,A){var D=dwr.engine._lookup(C,F,A);if(D){return D}if(document.all&&!window.opera){var B=["Array:["];for(var G=0;G<F.length;G++){if(G!=0){B.push(",")}H.paramCount++;var I="c"+dwr.engine._batch.map.callCount+"-e"+H.paramCount;dwr.engine._serializeAll(H,C,F[G],I);B.push("reference:");B.push(I)}B.push("]");E=B.join("")}else{var E="Array:[";for(var G=0;G<F.length;G++){if(G!=0){E+=","}H.paramCount++;var I="c"+dwr.engine._batch.map.callCount+"-e"+H.paramCount;dwr.engine._serializeAll(H,C,F[G],I);E+="reference:";E+=I}E+="]"}return E};dwr.engine._unserializeDocument=function(A){var C;if(window.DOMParser){var E=new DOMParser();C=E.parseFromString(A,"text/xml");if(!C.documentElement||C.documentElement.tagName=="parsererror"){var B=C.documentElement.firstChild.data;B+="\n"+C.documentElement.firstChild.nextSibling.firstChild.data;throw B}return C}else{if(window.ActiveXObject){C=dwr.engine._newActiveXObject(dwr.engine._DOMDocument);C.loadXML(A);return C}else{var D=document.createElement("div");D.innerHTML=A;return D}}};dwr.engine._newActiveXObject=function(A){var D;for(var C=0;C<A.length;C++){try{D=new ActiveXObject(A[C]);break}catch(B){}}return D};dwr.engine._debug=function(F,D){var A=false;try{if(window.console){if(D&&window.console.trace){window.console.trace()}window.console.log(F);A=true}else{if(window.opera&&window.opera.postError){window.opera.postError(F);A=true}}}catch(C){}if(!A){var B=document.getElementById("dwr-debug");if(B){var E=F+"<br/>"+B.innerHTML;if(E.length>2048){E=E.substring(0,2048)}B.innerHTML=E}}};

if(typeof addEvent!="function"){var addEvent=function(B,J,F,E){var G="addEventListener",C="on"+J,I=B,H=J,D=F,A=E;if(B[G]&&!E){return B[G](J,F,false)}if(!B._evts){B._evts={}}if(!B._evts[J]){B._evts[J]=B[C]?{b:B[C]}:{};B[C]=new Function("e",'var r=true,o=this,a=o._evts["'+J+'"],i;for(i in a){o._f=a[i];r=o._f(e||window.event)!=false&&r;o._f=null}return r');if(J!="unload"){addEvent(window,"unload",function(){removeEvent(I,H,D,A)})}}if(!F._i){F._i=addEvent._i++}B._evts[J][F._i]=F};addEvent._i=1;var removeEvent=function(E,B,C,A){var D="removeEventListener";if(E[D]&&!A){return E[D](B,C,false)}if(E._evts&&E._evts[B]&&C._i){delete E._evts[B][C._i]}}}function cancelEvent(A,B){A.returnValue=false;if(A.preventDefault){A.preventDefault()}if(B){A.cancelBubble=true;if(A.stopPropagation){A.stopPropagation()}}}function SuperNote(B,A){var E={myName:B,allowNesting:false,cssProp:"visibility",cssVis:"inherit",cssHid:"hidden",IESelectBoxFix:true,showDelay:0,hideDelay:500,animInSpeed:0.1,animOutSpeed:0.1,animations:[],mouseX:0,mouseY:0,notes:{},rootElm:null,onshow:null,onhide:null};for(var D in E){this[D]=(typeof A[D]=="undefined")?E[D]:A[D]}var C=this;addEvent(document,"mouseover",function(F){C.mouseHandler(F,1)});addEvent(document,"mousemove",function(F){C.mouseTrack(F)});addEvent(document,"mouseout",function(F){C.mouseHandler(F,0)});this.instance=SuperNote.instances.length;SuperNote.instances[this.instance]=this}SuperNote.instances=[];SuperNote.prototype.bTypes={};SuperNote.prototype.pTypes={};SuperNote.prototype.pTypes.mouseoffset=function(obj,noteID,nextVis,nextAnim){with(obj){var note=notes[noteID];if(nextVis&&!note.animating&&!note.visible){note.ref.style.left=checkWinX(mouseX,note)+"px";note.ref.style.top=checkWinY(mouseY,note)+"px"}}};SuperNote.prototype.pTypes.mousetrack=function(obj,noteID,nextVis,nextAnim){with(obj){var note=notes[noteID];if(nextVis&&!note.animating&&!note.visible){var posString="with("+myName+'){var note=notes["'+noteID+'"];note.ref.style.left=checkWinX(mouseX,note)+"px";note.ref.style.top=checkWinY(mouseY,note)+"px"}';eval(posString);obj.IEFrameFix(noteID,1);if(!note.trackTimer){note.trackTimer=setInterval(posString,50)}}else{if(!nextVis&&!nextAnim){clearInterval(note.trackTimer);note.trackTimer=null}}}};SuperNote.prototype.pTypes.triggeroffset=function(obj,noteID,nextVis,nextAnim){with(obj){var note=notes[noteID];if(nextVis&&!note.animating&&!note.visible){var x=0,y=0,elm=note.trigRef;while(elm){x+=elm.offsetLeft;y+=elm.offsetTop;elm=elm.offsetParent}note.ref.style.left=checkWinX(x,note)+"px";note.ref.style.top=checkWinY(y,note)+"px"}}};SuperNote.prototype.bTypes.pinned=function(obj,noteID,nextVis){with(obj){return(!nextVis)?false:true}};SuperNote.prototype.docBody=function(){return document[(document.compatMode&&document.compatMode.indexOf("CSS")>-1)?"documentElement":"body"]};SuperNote.prototype.getWinW=function(){return this.docBody().clientWidth||window.innerWidth||0};SuperNote.prototype.getWinH=function(){return this.docBody().clientHeight||window.innerHeight||0};SuperNote.prototype.getScrX=function(){return this.docBody().scrollLeft||window.scrollX||0};SuperNote.prototype.getScrY=function(){return this.docBody().scrollTop||window.scrollY||0};SuperNote.prototype.checkWinX=function(newX,note){with(this){return Math.max(getScrX(),Math.min(newX,getScrX()+getWinW()-note.ref.offsetWidth-8))}};SuperNote.prototype.checkWinY=function(newY,note){with(this){return Math.max(getScrY(),Math.min(newY,getScrY()+getWinH()-note.ref.offsetHeight-8))}};SuperNote.prototype.mouseTrack=function(evt){with(this){mouseX=evt.pageX||evt.clientX+getScrX()||0;mouseY=evt.pageY||evt.clientY+getScrY()||0}};SuperNote.prototype.mouseHandler=function(evt,show){with(this){if(!document.documentElement){return true}var srcElm=evt.target||evt.srcElement,trigRE=new RegExp(myName+"-(hover|click)-([a-z0-9]+)","i"),targRE=new RegExp(myName+"-(note)-([a-z0-9]+)","i"),trigFind=1,foundNotes={};if(srcElm.nodeType!=1){srcElm=srcElm.parentNode}var elm=srcElm;while(elm&&elm!=rootElm){if(targRE.test(elm.id)||(trigFind&&trigRE.test(elm.className))){if(!allowNesting){trigFind=0}var click=RegExp.$1=="click"?1:0,noteID=RegExp.$2,ref=document.getElementById(myName+"-note-"+noteID),trigRef=trigRE.test(elm.className)?elm:null;if(ref){if(!notes[noteID]){notes[noteID]={click:click,ref:ref,trigRef:null,visible:0,animating:0,timer:null};ref._sn_obj=this;ref._sn_id=noteID}var note=notes[noteID];if(!note.click||(trigRef!=srcElm)){foundNotes[noteID]=true}if(!note.click||(show==2)){if(trigRef){notes[noteID].trigRef=notes[noteID].ref._sn_trig=elm}display(noteID,show);if(note.click&&(srcElm==trigRef)){cancelEvent(evt)}}}}if(elm._sn_trig){trigFind=1;elm=elm._sn_trig}else{elm=elm.parentNode}}if(show==2){for(var n in notes){if(notes[n].click&&notes[n].visible&&!foundNotes[n]){display(n,0)}}}}};SuperNote.prototype.display=function(noteID,show){with(this){with(notes[noteID]){clearTimeout(timer);if(!animating||(show?!visible:visible)){var tmt=animating?1:(show?showDelay||1:hideDelay||1);timer=setTimeout("SuperNote.instances["+instance+'].setVis("'+noteID+'",'+show+",false)",tmt)}}}};SuperNote.prototype.checkType=function(noteID,nextVis,nextAnim){with(this){var note=notes[noteID],bType,pType;if((/snp-([a-z]+)/).test(note.ref.className)){pType=RegExp.$1}if((/snb-([a-z]+)/).test(note.ref.className)){bType=RegExp.$1}if(nextAnim&&bType&&bTypes[bType]&&(bTypes[bType](this,noteID,nextVis)==false)){return false}if(pType&&pTypes[pType]){pTypes[pType](this,noteID,nextVis,nextAnim)}return true}};SuperNote.prototype.setVis=function(noteID,show,now){with(this){var note=notes[noteID];if(note&&checkType(noteID,show,1)||now){note.visible=show;note.animating=1;animate(noteID,show,now)}}};SuperNote.prototype.animate=function(noteID,show,now){with(this){var note=notes[noteID];if(!note.animTimer){note.animTimer=0}if(!note.animC){note.animC=0}with(note){clearTimeout(animTimer);var speed=(animations.length&&!now)?(show?animInSpeed:animOutSpeed):1;if(show&&!animC){if(onshow){this.onshow(noteID)}IEFrameFix(noteID,1);ref.style[cssProp]=cssVis}animC=Math.max(0,Math.min(1,animC+speed*(show?1:-1)));if(document.getElementById&&speed<1){for(var a=0;a<animations.length;a++){animations[a](ref,animC)}}if(!show&&!animC){if(onhide){this.onhide(noteID)}IEFrameFix(noteID,0);ref.style[cssProp]=cssHid}if(animC!=parseInt(animC)){animTimer=setTimeout(myName+'.animate("'+noteID+'",'+show+")",50)}else{checkType(noteID,animC?1:0,0);note.animating=0}}}};SuperNote.prototype.IEFrameFix=function(noteID,show){with(this){if(!window.createPopup||!IESelectBoxFix){return }var note=notes[noteID],ifr=note.iframe;if(!ifr){ifr=notes[noteID].iframe=document.createElement("iframe");ifr.setAttribute("src","javascript:false;");ifr.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=0)";ifr.style.position="absolute";ifr.style.borderWidth="0";note.ref.parentNode.insertBefore(ifr,note.ref.parentNode.firstChild)}if(show){ifr.style.left=note.ref.offsetLeft+"px";ifr.style.top=note.ref.offsetTop+"px";ifr.style.width=note.ref.offsetWidth+"px";ifr.style.height=note.ref.offsetHeight+"px";ifr.style.visibility="inherit"}else{ifr.style.visibility="hidden"}}};

var HOSTURL="/";var AJAXPATH="";if(typeof (jive)=="undefined"){var jive=new Object();jive.gui=new Object();jive.model=new Object();jive.ext=new Object();jive.ext.y=new Object();jive.ext.x=new Object();jive.xml=new Object();jive.rte=new Object();jive.rte.macros=new Array()}if(typeof (console)=="undefined"){console=new Object();console.log=function(A){}}if(typeof (console.debug)!="function"){console.debug=console.log};

jive.ext.x.xMac=(navigator.appVersion.indexOf("Mac")!=-1);jive.ext.x.xWindows=!jive.ext.x.xMac;jive.ext.x.xVersion="3.15.1";jive.ext.x.xNN4=false;jive.ext.x.xOp7=false;jive.ext.x.xOp5or6=false;jive.ext.x.xIE4Up=false;jive.ext.x.xIE4=false;jive.ext.x.xIE5=false;jive.ext.x.xUA=navigator.userAgent.toLowerCase();jive.ext.x.xIE=false;jive.ext.x.xSafari=false;if(window.opera){jive.ext.x.xOp7=(jive.ext.x.xUA.indexOf("opera 7")!=-1||jive.ext.x.xUA.indexOf("opera/7")!=-1);if(!jive.ext.x.xOp7){jive.ext.x.xOp5or6=(jive.ext.x.xUA.indexOf("opera 5")!=-1||jive.ext.x.xUA.indexOf("opera/5")!=-1||jive.ext.x.xUA.indexOf("opera 6")!=-1||jive.ext.x.xUA.indexOf("opera/6")!=-1)}}else{if(document.all){jive.ext.x.xIE4Up=jive.ext.x.xUA.indexOf("msie")!=-1&&parseInt(navigator.appVersion)>=4;jive.ext.x.xIE4=jive.ext.x.xUA.indexOf("msie 4")!=-1;jive.ext.x.xIE5=jive.ext.x.xUA.indexOf("msie 5")!=-1;jive.ext.x.xIE6=jive.ext.x.xUA.indexOf("msie 6")!=-1;jive.ext.x.xIE7=jive.ext.x.xUA.indexOf("msie 7")!=-1;jive.ext.x.xIE4Up=jive.ext.x.xIE4||jive.ext.x.xIE5||jive.ext.x.xIE6;jive.ext.x.xIE=true}}if(jive.ext.x.xUA.indexOf("safari")!=-1||jive.ext.x.xUA.indexOf("Safari")!=-1){jive.ext.x.xSafari=true}jive.ext.x.xGetElementById=function(B,A){if(!$obj(A)){A=B.ownerDocument}if(B==null){return B}if(typeof (B)!="string"){return B}if(A.getElementById){B=A.getElementById(B)}else{if(A.all){B=A.all[B]}else{B=null}}return B};jive.ext.x.xParent=function(C,B){if(!(C=jive.ext.x.xGetElementById(C))){return null}var A=null;if(!B&&$def(C.offsetParent)){A=C.offsetParent}else{if($def(C.parentNode)){A=C.parentNode}else{if($def(C.parentElement)){A=C.parentElement}}}return A};var $def=function(A){return(typeof (A)!="undefined")};var $obj=function(A){return(typeof (A)=="object")};var $arr=function(A){return A!=null&&$obj(A)&&$def(A.splice)};$str=function(A){return typeof (A)=="string"};var $num=function(A){return typeof (A)=="number"};jive.ext.x.xShow=function(A){if(!(A=jive.ext.x.xGetElementById(A))){return }if(A.style&&$def(A.style.visibility)){A.style.visibility="visible"}};jive.ext.x.xHide=function(A){if(!(A=jive.ext.x.xGetElementById(A))){return }if(A.style&&$def(A.style.visibility)){A.style.visibility="hidden"}};jive.ext.x.xDisplay=function(B,A){if(!(B=jive.ext.x.xGetElementById(B))){return null}if(B.style&&$def(B.style.display)){if($str(A)){B.style.display=A}return B.style.display}return null};jive.ext.x.xDisplayNone=function(A){if(!(A=jive.ext.x.xGetElementById(A))){return }if(A.style&&$def(A.style.display)){A.style.display="none"}};jive.ext.x.xDisplayBlock=function(A){if(!(A=jive.ext.x.xGetElementById(A))){return }if(A.style&&$def(A.style.display)){A.style.display="block"}};jive.ext.x.xDisplayInline=function(A){if(!(A=jive.ext.x.xGetElementById(A))){return }if(A.style&&$def(A.style.display)){A.style.display="inline"}};jive.ext.x.xZIndex=function(B,A){if(!(B=jive.ext.x.xGetElementById(B))){return 0}if(B.style&&$def(B.style.zIndex)){if($num(A)){B.style.zIndex=A}A=parseInt(B.style.zIndex)}return A};jive.ext.x.xMoveTo=function(B,A,C){jive.ext.x.xLeft(B,A);jive.ext.x.xTop(B,C)};jive.ext.x.xLeft=function(C,A){if(!(C=jive.ext.x.xGetElementById(C))){return 0}var B=$def(C.style);if(B&&$str(C.style.left)){if($num(A)){C.style.left=A+"px"}else{A=parseInt(C.style.left);if(isNaN(A)){A=0}}}else{if(B&&$def(C.style.pixelLeft)){if($num(A)){C.style.pixelLeft=A}else{A=C.style.pixelLeft}}}return A};jive.ext.x.xTop=function(B,C){if(!(B=jive.ext.x.xGetElementById(B))){return 0}var A=$def(B.style);if(A&&$str(B.style.top)){if($num(C)){B.style.top=C+"px"}else{C=parseInt(B.style.top);if(isNaN(C)){C=0}}}else{if(A&&$def(B.style.pixelTop)){if($num(C)){B.style.pixelTop=C}else{C=B.style.pixelTop}}}return C};jive.ext.x.xPageX=function(A){var B=0;if(A.offsetParent){while(1){B+=A.offsetLeft;if(!A.offsetParent){break}A=A.offsetParent}}else{if(A.x){B+=A.x}}return B};jive.ext.x.xPageY=function(B){var A=0;if(B.offsetParent){while(1){A+=B.offsetTop;if(!B.offsetParent){break}B=B.offsetParent}}else{if(B.y){A+=B.y}}return A};jive.ext.x.xScrollLeft=function(B){var C=0,A=B.ownerDocument;if(!(B=jive.ext.x.xGetElementById(B))){if(A.documentElement&&A.documentElement.scrollLeft){C=A.documentElement.scrollLeft}else{if(A.body&&$def(A.body.scrollLeft)){C=A.body.scrollLeft}}}else{if($num(B.scrollLeft)){C=B.scrollLeft}}return C};jive.ext.x.xScrollTop=function(B){var C=0,A=B.ownerDocument;if(!(B=jive.ext.x.xGetElementById(B))){if(A.documentElement&&A.documentElement.scrollTop){C=A.documentElement.scrollTop}else{if(A.body&&$def(A.body.scrollTop)){C=A.body.scrollTop}}}else{if($num(B.scrollTop)){C=B.scrollTop}}return C};jive.ext.x.xWidth=function(F,B){if(!(F=jive.ext.x.xGetElementById(F))){return 0}if($num(B)){if(B<0){B=0}else{B=Math.round(B)}}else{B=-1}var D=$def(F.style);if(F==document||F.tagName.toLowerCase()=="html"||F.tagName.toLowerCase()=="body"){B=jive.ext.x.xClientWidth()}else{if(D&&$def(F.offsetWidth)&&$str(F.style.width)){if(B>=0){var E=0,H=0,G=0,C=0;if(document.compatMode=="CSS1Compat"){var A=jive.ext.x.xGetCS;E=A(F,"padding-left",1);if(E!==null){H=A(F,"padding-right",1);G=A(F,"border-left-width",1);C=A(F,"border-right-width",1)}else{if($def(F.offsetWidth,F.style.width)){F.style.width=B+"px";E=F.offsetWidth-B}}}B-=(E+H+G+C);if(isNaN(B)||B<0){return }else{F.style.width=B+"px"}}B=F.offsetWidth}else{if(D&&$def(F.style.pixelWidth)){if(B>=0){F.style.pixelWidth=B}B=F.style.pixelWidth}}}return B};jive.ext.x.xCamelize=function(B){var C,E,A=B.split("-");var D=A[0];for(C=1;C<A.length;++C){E=A[C].charAt(0);D+=A[C].replace(E,E.toUpperCase())}return D};jive.ext.x.xGetCS=function(E,D){try{if(!(E=jive.ext.x.xGetElementById(E))){return null}var C,A="undefined",B=E.ownerDocument.defaultView;if(B&&B.getComputedStyle){C=B.getComputedStyle(E,"");if(C){A=C.getPropertyValue(D)}}else{if(E.currentStyle){A=E.currentStyle[jive.ext.x.xCamelize(D)]}else{return null}}if($str(A)&&A.indexOf("px")>0){A=A.substr(0,A.indexOf("px"));A=parseInt(A)}return A}catch(E){return""}};jive.ext.x.xSetCH=function(E,D){var G=0,B=0,A=0,H=0,F=E.ownerDocument;if($def(F.defaultView)&&$def(F.defaultView.getComputedStyle)){G=jive.ext.x.xGetCS(E,"padding-top");B=jive.ext.x.xGetCS(E,"padding-bottom");A=jive.ext.x.xGetCS(E,"border-top-width");H=jive.ext.x.xGetCS(E,"border-bottom-width")}else{if($def(E.currentStyle,F.compatMode)){if(F.compatMode=="CSS1Compat"){G=parseInt(E.currentStyle.paddingTop);B=parseInt(E.currentStyle.paddingBottom);A=parseInt(E.currentStyle.borderTopWidth);H=parseInt(E.currentStyle.borderBottomWidth)}}else{if($def(E.offsetHeight,E.style.height)){E.style.height=D+"px";G=E.offsetHeight-D}}}if(isNaN(G)){G=0}if(isNaN(B)){B=0}if(isNaN(A)){A=0}if(isNaN(H)){H=0}var C=D-(G+B+A+H);if(isNaN(C)||C<0){return }else{E.style.height=C+"px"}};jive.ext.x.xHeight=function(C,B){if(!(C=jive.ext.x.xGetElementById(C))){return 0}if($num(B)){if(B<0){B=0}else{B=Math.round(B)}}else{B=0}var A=$def(C.style);if(A&&$def(C.offsetHeight)&&$str(C.style.height)){if(B){jive.ext.x.xSetCH(C,B)}B=C.offsetHeight}else{if(A&&$def(C.style.pixelHeight)){if(B){C.style.pixelHeight=B}B=C.style.pixelHeight}}return B};jive.ext.x.xHasPoint=function(I,E,D,B,C,A,F){if(!$num(B)){B=C=A=F=0}else{if(!$num(C)){C=A=F=B}else{if(!$num(A)){F=C;A=B}}}var H=jive.ext.x.xPageX(I),G=jive.ext.x.xPageY(I);return(E>=H+F&&E<=H+jive.ext.x.xWidth(I)-C&&D>=G+B&&D<=G+jive.ext.x.xHeight(I)-A)};jive.ext.x.xClientWidth=function(){var A=0;if(jive.ext.x.xOp5or6){A=window.innerWidth}else{if(!window.opera&&document.documentElement&&document.documentElement.clientWidth){A=document.documentElement.clientWidth}else{if(document.body&&document.body.clientWidth){A=document.body.clientWidth}else{if($def(window.innerWidth,window.innerHeight,document.height)){A=window.innerWidth;if(document.height>window.innerHeight){A-=16}}}}}return A};jive.ext.x.xClientHeight=function(){var A=0;if(jive.ext.x.xOp5or6){A=window.innerHeight}else{if(!window.opera&&document.documentElement&&document.documentElement.clientHeight){A=document.documentElement.clientHeight}else{if(document.body&&document.body.clientHeight){A=document.body.clientHeight}else{if($def(window.innerWidth,window.innerHeight,document.width)){A=window.innerHeight;if(document.width>window.innerWidth){A-=16}}}}}return A};jive.ext.x.xDocHeight=function(F){if(F){var B=F.body,E=F.documentElement}else{var B=document.body,E=document.documentElement}var C=0,G=0,D=0,A=0;if(E){C=E.scrollHeight;G=E.offsetHeight}if(B){D=B.scrollHeight;A=B.offsetHeight}return Math.max(C,G,D,A)};

jive.ext.x.xAddEventListener=function(e,eventType,eventListener,useCapture){if(!(e=jive.ext.x.xGetElementById(e))){return }eventType=eventType.toLowerCase();if((!jive.ext.x.xIE4Up&&!jive.ext.x.xOp7)&&e==window){if(eventType=="resize"){jive.ext.x.xPCW=jive.ext.x.xClientWidth();jive.ext.x.xPCH=jive.ext.x.xClientHeight();jive.ext.x.xREL=eventListener;jive.ext.x.xResizeEvent();return }if(eventType=="scroll"){jive.ext.x.xPSL=jive.ext.x.xScrollLeft();jive.ext.x.xPST=jive.ext.x.xScrollTop();jive.ext.x.xSEL=eventListener;jive.ext.x.xScrollEvent();return }}if(e.addEventListener){e.addEventListener(eventType,eventListener,useCapture)}else{if(e.attachEvent){e.attachEvent("on"+eventType,eventListener)}else{if(e.captureEvents){if(useCapture||(eventType.indexOf("mousemove")!=-1)){e.captureEvents(eval("Event."+eventType.toUpperCase()))}var eh="e.on"+eventType+"=eventListener";eval(eh)}else{var eh="e.on"+eventType+"=eventListener";eval(eh)}}}};jive.ext.x.xRemoveEventListener=function(e,eventType,eventListener,useCapture){if(!(e=jive.ext.x.xGetElementById(e))){return }eventType=eventType.toLowerCase();if((!jive.ext.x.xIE4Up&&!jive.ext.x.xOp7)&&e==window){if(eventType=="resize"){jive.ext.x.xREL=null;return }if(eventType=="scroll"){jive.ext.x.xSEL=null;return }}var eh="e.on"+eventType+"=null";if(e.removeEventListener){e.removeEventListener(eventType,eventListener,useCapture)}else{if(e.detachEvent){e.detachEvent("on"+eventType,eventListener)}else{if(e.releaseEvents){if(useCapture||(eventType.indexOf("mousemove")!=-1)){e.releaseEvents(eval("Event."+eventType.toUpperCase()))}eval(eh)}else{eval(eh)}}}};jive.ext.x.xStopPropagation=function(A){if(A&&A.stopPropagation){A.stopPropagation()}else{if(window.event){window.event.cancelBubble=true}}};jive.ext.x.xEvent=function(B){this.type="";this.target=null;this.keyCode=0;var E=B?B:window.event;if(!E){return }if(E.type){this.type=E.type}if(E.target){this.target=E.target}else{if(E.srcElement){this.target=E.srcElement}}var D=null;var C=null;this.pageX=function(){if(D==null){if(jive.ext.x.xOp5or6){D=E.clientX;C=E.clientY}else{if(jive.ext.x.xDef(E.clientX,E.clientY)){D=E.clientX+jive.ext.x.xScrollLeft();C=E.clientY+jive.ext.x.xScrollTop()}}}return D};this.pageY=function(){if(C==null){if(jive.ext.x.xOp5or6){D=E.clientX;C=E.clientY}else{if(jive.ext.x.xDef(E.clientX,E.clientY)){D=E.clientX+jive.ext.x.xScrollLeft();C=E.clientY+jive.ext.x.xScrollTop()}}}return C};var A=null;var F=null;this.offsetX=function(){if(A==null){if(jive.ext.x.xDef(E.layerX,E.layerY)){A=E.layerX;F=E.layerY}else{if(jive.ext.x.xDef(E.offsetX,E.offsetY)){A=E.offsetX;F=E.offsetY}else{A=this.pageX-jive.ext.x.xPageX(this.target);F=this.pageY-jive.ext.x.xPageY(this.target)}}}return A};this.offsetY=function(){if(F==null){if(jive.ext.x.xDef(E.layerX,E.layerY)){A=E.layerX;F=E.layerY}else{if(jive.ext.x.xDef(E.offsetX,E.offsetY)){A=E.offsetX;F=E.offsetY}else{A=this.pageX-jive.ext.x.xPageX(this.target);F=this.pageY-jive.ext.x.xPageY(this.target)}}}return F};if(E.keyCode){this.keyCode=E.keyCode}else{if(jive.ext.x.xDef(E.which)){this.keyCode=E.which}}};jive.ext.x.xResizeEvent=function(){if(jive.ext.x.xREL){setTimeout("jive.ext.x.xResizeEvent()",250)}var A=jive.ext.x.xClientWidth(),B=jive.ext.x.xClientHeight();if(jive.ext.x.xPCW!=A||jive.ext.x.xPCH!=B){jive.ext.x.xPCW=A;jive.ext.x.xPCH=B;if(jive.ext.x.xREL){jive.ext.x.xREL()}}};jive.ext.x.xScrollEvent=function(){if(jive.ext.x.xSEL){setTimeout("jive.ext.x.xScrollEvent()",250)}var A=jive.ext.x.xScrollLeft(),B=jive.ext.x.xScrollTop();if(jive.ext.x.xPSL!=A||jive.ext.x.xPST!=B){jive.ext.x.xPSL=A;jive.ext.x.xPST=B;if(jive.ext.x.xSEL){jive.ext.x.xSEL()}}};

jive.ext.x.xTimerMgr=function(){this.set=function(D,F,C,B,E){return(this.timers[this.timers.length]=new A(D,F,C,B,E))};this.timers=new Array();this.running=false;this.run=function(){if(this.running){return }this.running=true;var D,C,E=new Date(),B=E.getTime();for(D=0;D<this.timers.length;++D){C=this.timers[D];if(C&&C.running){C.elapsed=B-C.time0;if(C.elapsed>=C.preset){C.obj[C.mthd](C);if(C.type.charAt(0)=="i"){C.time0=B}else{C.stop()}}}}this.running=false};function A(B,E,F,C,D){this.stop=function(){this.running=false};this.start=function(){this.running=true};this.reset=function(){var G=new Date();this.time0=G.getTime();this.elapsed=0;this.running=true};this.data=D;this.type=B;this.obj=E;this.mthd=F;this.preset=C;this.reset()}};jive.ext.x.xTimer=new jive.ext.x.xTimerMgr();jive.ext.x.xAddEventListener(window,"load",function(){setInterval("jive.ext.x.xTimer.run()",250)});

jive.ext.y.HashTable=function(){var B=this;var A=0;this.getCount=function(){return A};this.undefined=new Object();this.cache=new Array();this.put=function(C,D){B.clear(C);B.cache[C]=D;A=A+1};this.get=function(C){if(typeof (B.cache[C])!="undefined"&&B.cache[C]!=B.undefined){return B.cache[C]}else{return false}};this.clear=function(C){if(B.cache[C]!=B.undefined&&B.cache[C]!=null){A=A-1}B.cache[C]=B.undefined};this.toArray=function(E){var C=new Array();for(var D in B.cache){if(typeof (E)=="function"&&E(B.cache[D])){C.push(B.cache[D])}else{if(typeof (E)!="function"&&B.cache[D]!=B.undefined&&B.cache[D]!=Array.prototype.find&&B.cache[D]!=Array.prototype.jFind&&B.cache[D]!=Array.prototype.remove&&B.cache[D]!=Array.prototype.______array&&B.cache[D]!=null){C.push(B.cache[D])}}}return C};this.toKeysArray=function(E){var C=new Array();for(var D in B.cache){C.push(D)}return D}};jive.ext.y.yBottom=function(B,C){if(!(B=jive.ext.x.xGetElementById(B))){return 0}var A=$def(B.style);if(A&&$str(B.style.bottom)){if($num(C)){B.style.bottom=C+"px"}else{C=parseInt(B.style.bottom);if(isNaN(C)){C=0}}}else{if(A&&$def(B.style.pixelBottom)){if($num(C)){B.style.pixelBottom=C}else{C=B.style.pixelBottom}}}return C};jive.ext.y.yOpacity=function(A,B){if(!(A=jive.ext.x.xGetElementById(A))){return }if(jotlet.external.x.xNum(B)){if(B<0){B=0}else{if(B>100){B=100}else{B=Math.round(B)}}if(jotlet.external.x.xDef(A.style.MozOpacity)){A.style.MozOpacity=(B/100);return A.style.MozOpacity*100}if(jotlet.external.x.xDef(A.style.opacity)){A.style.opacity=(B/100);return A.style.opacity*100}if(jotlet.external.x.xStr(A.style.filter)){A.style.filter="alpha(opacity="+(B)+")";A.yOpacity=B;return A.yOpacity}}if(jotlet.external.x.xDef(A.style.MozOpacity)){return A.style.MozOpacity*100}if(jotlet.external.x.xDef(A.style.opacity)){return A.style.opacity*100}if(jotlet.external.x.xDef(A.filters)&&jotlet.external.x.xDef(A.filters.alpha)&&jotlet.external.x.xDef(A.filters.alpha.opacity)){return A.filters.alpha.opacity}};

jive.ext.y.yAjax=function(A,D){var E=false;if(window.XMLHttpRequest){E=new XMLHttpRequest();if(E.overrideMimeType){E.overrideMimeType("text/xml")}}else{if(window.ActiveXObject){try{E=new ActiveXObject("Msxml2.XMLHTTP")}catch(C){try{E=new ActiveXObject("Microsoft.XMLHTTP")}catch(C){}}}}if(!E){return false}E.onreadystatechange=B;function B(){try{if(E.readyState==4){if(E.status==200){A(E.responseText)}else{D()}}}catch(F){}}this.POST=function(F,G){E.open("POST",F,true);E.setRequestHeader("Content-type","application/x-www-form-urlencoded");E.setRequestHeader("Content-length",G.length);E.setRequestHeader("Connection","close");E.send(G)}};

jive.xml._Xparse_count=0;jive.xml._Xparse_index=new Array();jive.xml._entity=function(C){var B=new Array();B=C.split("&lt;");C=B.join("<");B=C.split("&gt;");C=B.join(">");B=C.split("&quot;");C=B.join('"');B=C.split("&apos;");C=B.join("'");B=C.split("&amp;");C=B.join("&");return C};jive.xml._strip=function(C){var B=new Array();B=C.split("\n");C=B.join("");B=C.split(" ");C=B.join("");B=C.split("\t");C=B.join("");return C};jive.xml._normalize=function(C){var B=new Array();B=C.split("\n");C=B.join(" ");B=C.split("\t");C=B.join(" ");return C};jive.xml._element=function(){this.type="element";this.tagName=new String();this.attributes=new Array();this.childNodes=new Array();this.nodeValue="";this.uid=jive.xml._Xparse_count++;jive.xml._Xparse_index[this.uid]=this};jive.xml._chardata=function(){this.type="chardata";this.value=new String()};jive.xml._pi=function(){this.type="pi";this.value=new String()};jive.xml._comment=function(){this.type="comment";this.value=new String()};jive.xml._frag=function(){this.str=new String();this.ary=new Array();this.end=new String()};jive.xml._tag_element=function(I){var J=I.str.indexOf(">");var F=(I.str.substring(J-1,J)=="/");if(F){J-=1}var G=jive.xml._normalize(I.str.substring(1,J));var C=G.indexOf(" ");var A=new String();var B=new String();if(C!=-1){B=G.substring(0,C);A=G.substring(C+1,G.length)}else{B=G}var H=I.ary.length;I.ary[H]=new jive.xml._element();I.ary[H].tagName=jive.xml._strip(B);if(A.length>0){I.ary[H].attributes=jive.xml._attribution(A)}if(!F){var E=new jive.xml._frag();E.str=I.str.substring(J+1,I.str.length);E.end=B;var D=E;E=jive.xml._compile(E);I.ary[H].childNodes=E.ary;I.ary[H].nodeValue=D;I.str=E.str}else{I.str=I.str.substring(J+2,I.str.length)}return I};jive.xml._tag_pi=function(D){var C=D.str.indexOf("?>");var B=D.str.substring(2,C);var A=D.ary.length;D.ary[A]=new jive.xml._pi();D.ary[A].nodeValue=B;D.str=D.str.substring(C+2,D.str.length);return D};jive.xml._tag_comment=function(D){var C=D.str.indexOf("-->");var B=D.str.substring(4,C);var A=D.ary.length;D.ary[A]=new jive.xml._comment();D.ary[A].nodeValue=B;D.str=D.str.substring(C+3,D.str.length);return D};jive.xml._tag_cdata=function(D){var C=D.str.indexOf("]]>");var B=D.str.substring(9,C);var A=D.ary.length;D.ary[A]=new jive.xml._chardata();D.ary[A].nodeValue=B;D.str=D.str.substring(C+3,D.str.length);return D};jive.xml._attribution=function(E){var F=new Array();while(1){var I=E.indexOf("=");if(E.length==0||I==-1){return F}var H=E.indexOf("'");var G=E.indexOf('"');var A=new Number();var C=new String();if((H<G&&H!=-1)||G==-1){A=H;C="'"}if((G<H||H==-1)&&G!=-1){A=G;C='"'}var J=E.indexOf(C,A+1);var D=E.substring(A+1,J);var B=jive.xml._strip(E.substring(0,I));F[B]=jive.xml._entity(D);E=E.substring(J+1,E.length)}return""};jive.xml._compile=function(C){while(1){if(C.str.length==0){return C}var A=C.str.indexOf("<");if(A!=0){var B=C.ary.length;C.ary[B]=new jive.xml._chardata();if(A==-1){C.ary[B].nodeValue=jive.xml._entity(C.str);C.str=""}else{C.ary[B].nodeValue=jive.xml._entity(C.str.substring(0,A));C.str=C.str.substring(A,C.str.length)}}else{if(C.str.substring(1,2)=="?"){C=jive.xml._tag_pi(C)}else{if(C.str.substring(1,4)=="!--"){C=jive.xml._tag_comment(C)}else{if(C.str.substring(1,9)=="![CDATA["){C=jive.xml._tag_cdata(C)}else{if(C.str.substring(1,C.end.length+3)=="/"+C.end+">"||jive.xml._strip(C.str.substring(1,C.end.length+3))=="/"+C.end){C.str=C.str.substring(C.end.length+3,C.str.length);C.end="";return C}else{C=jive.xml._tag_element(C)}}}}}}return""};jive.xml._prolog=function(D){var B=new Array();B=D.split("\r\n");D=B.join("\n");B=D.split("\r");D=B.join("\n");var F=D.indexOf("<");if(D.substring(F,F+3)=="<?x"||D.substring(F,F+3)=="<?X"){var C=D.indexOf("?>");D=D.substring(C+2,D.length)}var F=D.indexOf("<!DOCTYPE");if(F!=-1){var C=D.indexOf(">",F)+1;var E=D.indexOf("[",F);if(E<C&&E!=-1){C=D.indexOf("]>",F)+2}D=D.substring(C,D.length)}return D};jive.xml.Xparse=function(B){var C=new jive.xml._frag();C.str=jive.xml._prolog(B);var A=new Object();C=jive.xml._compile(C);if(C.ary.length>0){A.documentElement=C.ary[0]}else{A.documentElement=null}A.tagName="ROOT";A.index=jive.xml._Xparse_index;jive.xml._Xparse_index=new Array();return A};

jive.xml.XMLParser=function(){var F=null;if(window.ActiveXObject){var A=["MSXML4.DOMDocument","MSXML3.DOMDocument","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XmlDom"];var D=null;if(D==null){var C=false;for(var B=0;B<A.length&&!C;B++){try{D=new ActiveXObject(A[B]);C=true}catch(E){}}}if(D==null){alert("No XML parser available");return }F=function(G){D.async="false";D.loadXML(G);return D}}if(F==null&&window.DOMParser){var D=new DOMParser();F=function(I){var H=D.parseFromString(I,"text/xml");var G=H.documentElement;if((G.tagName=="parserError")||(G.namespaceURI=="http://www.mozilla.org/newlayout/xml/parsererror.xml")){return null}return H}}else{if(F==null&&document.implementation&&document.implementation.createDocument){var D=document.implementation.createDocument("","",null);F=function(G){D.async="false";D.loadXML(G);return D}}else{F=function(G){return jive.xml.Xparse(G)}}}this.parse=function(G){if(F!=null){return F(G)}else{throw"no xml parser defined"}}};

jive.model.Ajax=function(C,A,D){var B=this;this.POST=function(F,G){var E=function(J){try{var K=null;if(!$obj(K)||K==null||!$obj(K.documentElement)||K.documentElement==null){var M=new jive.xml.XMLParser();try{K=M.parse(J)}catch(L){D("XML Parse exception");return }}if($obj(K)&&K!=null&&$obj(K.documentElement)&&K.documentElement!=null){K=K.documentElement}else{D("XML Parse exception");return }if(K.tagName=="br"){D("Server Exception")}else{if(K.tagName=="NotLoggedInException"){C.handleLogIn(function(){B.POST(F,G)})}else{C.poke();A(K)}}}catch(L){alert("ajax error:"+L)}};var I=function(){D("500 Status")};var H=new jive.ext.y.yAjax(E,I);H.POST(F,G)}};

jive.model.Controller=function(){var F=this;var A=new Object();A.childNodes=new Array();this.newAjax=function(L,M){return new jive.model.Ajax(F,L,M)};var C=new jive.model.LoginManager(F);this.getLoginManager=function(){return C};var D=new jive.model.SettingsManager(F);this.getSettingsManager=function(){return D};var I=new jive.model.RefreshManager(F);this.getRefreshManager=function(){return I};var E=new jive.model.LanguageManager(F,default_lang);this.getLanguageManager=function(){return E};var K=new jive.model.ProjectCache(F);this.getProjectCache=function(){return K};var G=new jive.model.UserCache(F);this.getUserCache=function(){return G};var B=new jive.model.TaskCache(F);this.getTaskCache=function(){return B};this.handleLogIn=function(L){F.getRefreshManager().loggedOut()};this.poke=function(){F.getRefreshManager().poke()};this.isCalendarVisibleHuh=function(L){return true};this.isReadOnly=function(){return false};this.addListener=function(L){H.push(L)};var H=new Array();var J=new Array();this.addListenerAction=function(L){J.push(L)};this.executeListenerActions=function(){while(J.length>0){J[0]();J.splice(0,1)}};this.removeListener=function(M){for(var L=0;L<H.length;L++){if(H[L]==M){H.splice(L,1)}}};this.notifyTinyMCELoaded=function(){for(var L=0;L<H.length;L++){H[L].tinyMCELoaded()}F.executeListenerActions()}};

jive.model.dateLTEQ=function(B,A){return(B.getFullYear()<A.getFullYear()||B.getFullYear()==A.getFullYear()&&(B.getMonth()<A.getMonth()||B.getMonth()==A.getMonth()&&(B.getDate()<=A.getDate())))};jive.model.dateLT=function(B,A){return(B.getFullYear()<A.getFullYear()||B.getFullYear()==A.getFullYear()&&(B.getMonth()<A.getMonth()||B.getMonth()==A.getMonth()&&(B.getDate()<A.getDate())))};jive.model.dateGT=function(B,A){return jive.model.dateLT(A,B)};jive.model.dateGTEQ=function(B,A){return jive.model.dateLTEQ(A,B)};jive.model.monthYearEQ=function(B,A){return B.getMonth()==A.getMonth()&&B.getFullYear()==A.getFullYear()};jive.model.dateEQ=function(B,A){return(B.getDate()==A.getDate()&&B.getMonth()==A.getMonth()&&B.getFullYear()==A.getFullYear())};jive.model.datetimeEQ=function(B,A){return(B.getFullYear()==A.getFullYear()&&B.getMonth()==A.getMonth()&&B.getDate()==A.getDate()&&B.getHours()==A.getHours()&&B.getMinutes()==A.getMinutes())};jive.model.datetimeLTEQ=function(B,A){return(B.getFullYear()<A.getFullYear()||(B.getFullYear()==A.getFullYear()&&(B.getMonth()<A.getMonth()||B.getMonth()==A.getMonth()&&(B.getDate()<A.getDate()||B.getDate()==A.getDate()&&(B.getHours()<A.getHours()||B.getHours()==A.getHours()&&B.getMinutes()<=A.getMinutes())))))};jive.model.dateMinusMonth=function(B){var A=B.getMonth();if(B.getMonth()==0){B.setFullYear(B.getFullYear()-1);B.setMonth(11)}else{B.setMonth(B.getMonth()-1)}while(B.getMonth()==A){B.setDate(B.getDate()-1)}};jive.model.dateMinusWeek=function(A){A.setDate(A.getDate()-7)};jive.model.dateMinusDay=function(A){if(A.getDate()==0&&A.getDate()==1){A.setFullYear(A.getFullYear()-1);A.setMonth(11);A.setDate(31)}else{A.setDate(A.getDate()-1)}};jive.model.DateHelper=function(D){var A=D.getSettingsManager();var C=D.getLanguageManager();var B=this;this.readableDifference=function(G,F){var J=G.getTime()-F.getTime();J=J/1000;var I=false;if(J<=0){I=true;J=-1*J}var K="";if(J<10){return"just now"}else{if(J<20){K="a few seconds"}else{if(J<60){K="less than a minute"}else{if(J<90){K="about a minute"}else{var H=Math.ceil(J/60);if(H<=50){var N=(H==1)?"":"s";K=H+" minute"+N}else{var L=Math.ceil(H/60);if(L<20){var N=(L==1)?"":"s";K=L+" hour"+N}else{var M=Math.round(L/24);if(M<7){var N=(M==1)?"":"s";K=M+" day"+N}else{var E=Math.ceil(M/7);var N=(E==1)?"":"s";K=E+" week"+N}}}}}}}if(I){return K+" ago"}else{return"in "+K}};this.readableDateDifference=function(L,I){var G=new Date();G.setTime(L.getTime());G.setHours(0);G.setMinutes(0);G.setSeconds(0);G.setMilliseconds(0);var F=new Date();F.setTime(I.getTime());F.setHours(0);F.setMinutes(0);F.setSeconds(0);F.setMilliseconds(0);var K=G.getTime()-F.getTime();K=K/1000;var J=false;if(jive.model.dateLT(G,F)){J=true}K=Math.abs(K);var M="";var H=Math.ceil(K/60);var N=Math.ceil(H/60);var O=Math.floor(N/24);if(O==0){M="today"}else{if(O==1&&J){M="yesterday"}else{if(O==1&&!J){M="tomorrow"}else{if(O<7){var P=(O==1)?"":"s";M=O+" day"+P;if(J){M=M+" ago"}else{M="in "+M}}else{var E=Math.ceil(O/7);var P=(E==1)?"":"s";M=E+" week"+P;if(J){M=M+" ago"}else{M="in "+M}}}}}return M};this.formatToDateTime=function(K){var H=K.getFullYear();var I=K.getMonth()+1;if(I<10){I="0"+I}var F=K.getDate();if(F<10){F="0"+F}var E=K.getHours();if(E<10){E="0"+E}var J=K.getMinutes();if(J<10){J="0"+J}var G=K.getSeconds();if(G<10){G="0"+G}return H+"-"+I+"-"+F+" "+E+":"+J+":"+G};this.formatTo12HourTime=function(I){var G=A.getTimeFormat();if(G=="3:00p"){var E=I.getHours();var H=I.getMinutes();if(H<10){H="0"+H}var F="a";if(E>=12){F="p";E-=12}if(E==0){E=12}return E+":"+H+F}else{var E=I.getHours();var H=I.getMinutes();if(H<10){H="0"+H}return E+":"+H}};this.formatToHourTime=function(H){var G=A.getTimeFormat();if(G=="3:00p"){var E=H.getHours();var F="a";if(E>=12){F="p";E-=12}if(E==0){E=12}return E+F}else{var E=H.getHours();return E}};this.formatToStandardTime=function(K){var H=""+K.getFullYear();var I=K.getMonth()+1;if(I<10){I="0"+I}var F=K.getDate();if(F<10){F="0"+F}var E=K.getHours();if(E<10){E="0"+E}var J=K.getMinutes();if(J<10){J="0"+J}var G=K.getSeconds();if(G<10){G="0"+G}return H+"-"+I+"-"+F};this.formatToShortDate=function(H){var G=H.getMonth()+1;var E=H.getDate();var F=A.getDateFormat();if(F=="4/30"){return G+"/"+E}else{return E+"/"+G}};this.formatToLongDate=function(J){var E=C.getActiveLanguage();var I=E.longDay(J.getDay())+", ";var H=E.longMonth(J.getMonth());var F=J.getDate();var G=A.getDateFormat();if(G=="4/30"){if(J.getDate()==1||J.getDate()==21||J.getDate()==31){F+="st"}else{if(J.getDate()==2||J.getDate()==22){F+="nd"}else{if(J.getDate()==3||J.getDate()==23){F+="rd"}else{F+="th"}}}I+=H+" "+F}else{I+=F+" "+H}I+=", "+J.getFullYear();return I};this.formatToMediumDate=function(F){var E=B.formatToMediumDateNoYear(F);E+=", "+F.getFullYear();return E};this.formatToMediumDateNoYear=function(J){var E=C.getActiveLanguage();var I=E.shortDay(J.getDay())+", ";var H=E.shortMonth(J.getMonth());var F=J.getDate();var G=A.getDateFormat();if(G=="4/30"){if(J.getDate()==1||J.getDate()==21||J.getDate()==31){F+="st"}else{if(J.getDate()==2||J.getDate()==22){F+="nd"}else{if(J.getDate()==3||J.getDate()==23){F+="rd"}else{F+="th"}}}I+=H+" "+F}else{I+=F+" "+H}return I};this.formatToMedDate=function(K){var E=C.getActiveLanguage();var I=E.shortMonth(K.getMonth());var F=K.getDate();var J="";var H=A.getDateFormat();if(H=="4/30"){var G="";if(K.getDate()==1||K.getDate()==21||K.getDate()==31){G="st"}else{if(K.getDate()==2||K.getDate()==22){G="nd"}else{if(K.getDate()==3||K.getDate()==23){G="rd"}else{G="th"}}}J=I+" "+F+G}else{J=F+" "+I}return J};this.formatToMedLongDate=function(K){var E=C.getActiveLanguage();var I=E.longMonth(K.getMonth());var F=K.getDate();var J="";var H=A.getDateFormat();if(H=="4/30"){var G="";if(K.getDate()==1||K.getDate()==21||K.getDate()==31){G="st"}else{if(K.getDate()==2||K.getDate()==22){G="nd"}else{if(K.getDate()==3||K.getDate()==23){G="rd"}else{G="th"}}}J=I+" "+F+G}else{J=F+" "+I}return J};this.getMonthName=function(F){var E=C.getActiveLanguage();return E.longMonth(F.getMonth())}};

var default_lang={childNodes:[{childNodes:[{tagName:"lang_id",childNodes:[{nodeValue:"1"}]},{tagName:"name",childNodes:[{nodeValue:"English"}]},{childNodes:[{tagName:"eng_name",childNodes:[{nodeValue:"English"}]},{tagName:"name",childNodes:[{nodeValue:"English"}]},{tagName:"january",childNodes:[{nodeValue:"January"}]},{tagName:"february",childNodes:[{nodeValue:"February"}]},{tagName:"march",childNodes:[{nodeValue:"March"}]},{tagName:"april",childNodes:[{nodeValue:"April"}]},{tagName:"may",childNodes:[{nodeValue:"May"}]},{tagName:"june",childNodes:[{nodeValue:"June"}]},{tagName:"july",childNodes:[{nodeValue:"July"}]},{tagName:"august",childNodes:[{nodeValue:"August"}]},{tagName:"september",childNodes:[{nodeValue:"September"}]},{tagName:"october",childNodes:[{nodeValue:"October"}]},{tagName:"november",childNodes:[{nodeValue:"November"}]},{tagName:"december",childNodes:[{nodeValue:"December"}]},{tagName:"sunday",childNodes:[{nodeValue:"Sunday"}]},{tagName:"monday",childNodes:[{nodeValue:"Monday"}]},{tagName:"tuesday",childNodes:[{nodeValue:"Tuesday"}]},{tagName:"wednesday",childNodes:[{nodeValue:"Wednesday"}]},{tagName:"thursday",childNodes:[{nodeValue:"Thursday"}]},{tagName:"friday",childNodes:[{nodeValue:"Friday"}]},{tagName:"saturday",childNodes:[{nodeValue:"Saturday"}]},{tagName:"sh_january",childNodes:[{nodeValue:"Jan"}]},{tagName:"sh_february",childNodes:[{nodeValue:"Feb"}]},{tagName:"sh_march",childNodes:[{nodeValue:"Mar"}]},{tagName:"sh_april",childNodes:[{nodeValue:"Apr"}]},{tagName:"sh_may",childNodes:[{nodeValue:"May"}]},{tagName:"sh_june",childNodes:[{nodeValue:"Jun"}]},{tagName:"sh_july",childNodes:[{nodeValue:"Jul"}]},{tagName:"sh_august",childNodes:[{nodeValue:"Aug"}]},{tagName:"sh_september",childNodes:[{nodeValue:"Sep"}]},{tagName:"sh_october",childNodes:[{nodeValue:"Oct"}]},{tagName:"sh_november",childNodes:[{nodeValue:"Nov"}]},{tagName:"sh_december",childNodes:[{nodeValue:"Dec"}]},{tagName:"sh_sunday",childNodes:[{nodeValue:"Sun"}]},{tagName:"sh_monday",childNodes:[{nodeValue:"Mon"}]},{tagName:"sh_tuesday",childNodes:[{nodeValue:"Tue"}]},{tagName:"sh_wednesday",childNodes:[{nodeValue:"Wed"}]},{tagName:"sh_thursday",childNodes:[{nodeValue:"Thu"}]},{tagName:"sh_friday",childNodes:[{nodeValue:"Fri"}]},{tagName:"sh_saturday",childNodes:[{nodeValue:"Sat"}]},{tagName:"loading",childNodes:[{nodeValue:"Loading..."}]},{tagName:"sb_actions",childNodes:[{nodeValue:"Actions"}]},{tagName:"sb_my_calendars",childNodes:[{nodeValue:"My Calendars"}]},{tagName:"sb_other_calendars",childNodes:[{nodeValue:"Other Calendars"}]},{tagName:"sb_alerts",childNodes:[{nodeValue:"Alerts"}]},{tagName:"sb_general_tasks",childNodes:[{nodeValue:"General Tasks"}]},{tagName:"sb_no_tasks",childNodes:[{nodeValue:"no tasks"}]},{tagName:"sb_reminder",childNodes:[{nodeValue:"Reminder"}]},{tagName:"sb_reminders",childNodes:[{nodeValue:"Reminders"}]},{tagName:"sb_alert",childNodes:[{nodeValue:"Alert"}]},{tagName:"motto",childNodes:[{nodeValue:"Simply Spectacular Time Management"}]},{tagName:"nav_month",childNodes:[{nodeValue:"month"}]},{tagName:"nav_week",childNodes:[{nodeValue:"week"}]},{tagName:"nav_day",childNodes:[{nodeValue:"day"}]},{tagName:"nav_today",childNodes:[{nodeValue:"today"}]},{tagName:"nav_tomorrow",childNodes:[{nodeValue:"tomorrow"}]},{tagName:"nav_refresh",childNodes:[{nodeValue:"refresh"}]},{tagName:"nav_list",childNodes:[{nodeValue:"list"}]},{tagName:"nav_overview",childNodes:[{nodeValue:"overview"}]},{tagName:"nav_feedback",childNodes:[{nodeValue:"feedback"}]},{tagName:"nav_send",childNodes:[{nodeValue:"Send"}]},{tagName:"nav_settings",childNodes:[{nodeValue:"settings"}]},{tagName:"nav_advanced",childNodes:[{nodeValue:"advanced"}]},{tagName:"nav_logout",childNodes:[{nodeValue:"logout"}]},{tagName:"nav_prelogout",childNodes:[{nodeValue:"Any unsaved changes will be lost!"}]},{tagName:"nav_back",childNodes:[{nodeValue:"Back to:"}]},{tagName:"nav_event",childNodes:[{nodeValue:"event"}]},{tagName:"nav_task",childNodes:[{nodeValue:"task"}]},{tagName:"nav_invite",childNodes:[{nodeValue:"Invite!"}]},{tagName:"nav_save",childNodes:[{nodeValue:"Save"}]},{tagName:"nav_filter",childNodes:[{nodeValue:"filter"}]},{tagName:"feedback_title",childNodes:[{nodeValue:"What do you think about Jotlet?"}]},{tagName:"feedback_name",childNodes:[{nodeValue:"your name:"}]},{tagName:"feedback_body",childNodes:[{nodeValue:"we welcome brutal honesty:"}]},{tagName:"feedback_error",childNodes:[{nodeValue:"There was an error sending your feedback. Please try again in a few minutes."}]},{tagName:"feedback_thanks",childNodes:[{nodeValue:"Thanks for your feedback!"}]},{tagName:"cal_create",childNodes:[{nodeValue:"create a calendar"}]},{tagName:"cal_add",childNodes:[{nodeValue:"Add Calendar"}]},{tagName:"cal_edit",childNodes:[{nodeValue:"Edit Calendar"}]},{tagName:"cal_delete",childNodes:[{nodeValue:"Delete Calendar"}]},{tagName:"cal_remove",childNodes:[{nodeValue:"Remove Calendar"}]},{tagName:"cal_name",childNodes:[{nodeValue:"calendar name"}]},{tagName:"cal_color",childNodes:[{nodeValue:"select a color for this calendar:"}]},{tagName:"color_red",childNodes:[{nodeValue:"red"}]},{tagName:"color_blue",childNodes:[{nodeValue:"blue"}]},{tagName:"color_green",childNodes:[{nodeValue:"green"}]},{tagName:"color_pink",childNodes:[{nodeValue:"pink"}]},{tagName:"color_purple",childNodes:[{nodeValue:"purple"}]},{tagName:"color_orange",childNodes:[{nodeValue:"orange"}]},{tagName:"color_yellow",childNodes:[{nodeValue:"yellow"}]},{tagName:"color_grey",childNodes:[{nodeValue:"grey"}]},{tagName:"nav_close",childNodes:[{nodeValue:"Close"}]},{tagName:"nav_cancel",childNodes:[{nodeValue:"Cancel"}]},{tagName:"event_menu",childNodes:[{nodeValue:"Add Event to..."}]},{tagName:"event_edit",childNodes:[{nodeValue:"edit event"}]},{tagName:"event_edit_cap",childNodes:[{nodeValue:"Edit Event"}]},{tagName:"event_loading",childNodes:[{nodeValue:"Loading Add Event Page..."}]},{tagName:"event_add",childNodes:[{nodeValue:"add event"}]},{tagName:"event_title",childNodes:[{nodeValue:"event title"}]},{tagName:"event_dt",childNodes:[{nodeValue:"date &amp; time"}]},{tagName:"event_begins",childNodes:[{nodeValue:"begins"}]},{tagName:"event_ends",childNodes:[{nodeValue:"ends"}]},{tagName:"event_at",childNodes:[{nodeValue:"at"}]},{tagName:"event_allday",childNodes:[{nodeValue:"This event is an all day event"}]},{tagName:"event_repeats",childNodes:[{nodeValue:"This event repeats"}]},{tagName:"event_desc",childNodes:[{nodeValue:"description"}]},{tagName:"event_add_cap",childNodes:[{nodeValue:"Add Event"}]},{tagName:"event_update",childNodes:[{nodeValue:"Update Event"}]},{tagName:"event_remind",childNodes:[{nodeValue:"Add Reminder"}]},{tagName:"event_sb_delete",childNodes:[{nodeValue:"Delete this event"}]},{tagName:"event_sb_delete_series",childNodes:[{nodeValue:"Delete this series"}]},{tagName:"event_sb_edit",childNodes:[{nodeValue:"Edit this event"}]},{tagName:"event_sb_export",childNodes:[{nodeValue:"Download this event"}]},{tagName:"event_sb_perm",childNodes:[{nodeValue:"This is a shared calendar. You do not have permission to edit or delete information."}]},{tagName:"task_menu",childNodes:[{nodeValue:"Add Task to..."}]},{tagName:"task_edit",childNodes:[{nodeValue:"edit task"}]},{tagName:"task_loading",childNodes:[{nodeValue:"Loading Add Task Page..."}]},{tagName:"task_title",childNodes:[{nodeValue:"task title"}]},{tagName:"task_due_date",childNodes:[{nodeValue:"due date"}]},{tagName:"task_due",childNodes:[{nodeValue:"due"}]},{tagName:"task_no_due",childNodes:[{nodeValue:"This task does not have a due date"}]},{tagName:"task_repeats",childNodes:[{nodeValue:"This task repeats"}]},{tagName:"task_add_cap",childNodes:[{nodeValue:"Add Task"}]},{tagName:"task_update",childNodes:[{nodeValue:"Update Task"}]},{tagName:"task_add",childNodes:[{nodeValue:"add task"}]},{tagName:"task_sb_delete",childNodes:[{nodeValue:"Delete this task"}]},{tagName:"task_sb_delete_series",childNodes:[{nodeValue:"Delete this series"}]},{tagName:"task_sb_edit",childNodes:[{nodeValue:"Edit this task"}]},{tagName:"task_sb_export",childNodes:[{nodeValue:"Download this task"}]},{tagName:"task_sb_perm",childNodes:[{nodeValue:"This is a shared calendar. You do not have permission to edit   or delete information."}]},{tagName:"info_in_cal",childNodes:[{nodeValue:"in the %sub% calendar"}]},{tagName:"info_no_desc",childNodes:[{nodeValue:"no description"}]},{tagName:"info_on",childNodes:[{nodeValue:"on"}]},{tagName:"info_never",childNodes:[{nodeValue:"never"}]},{tagName:"info_no_title",childNodes:[{nodeValue:"no title"}]},{tagName:"info_more",childNodes:[{nodeValue:"More Info"}]},{tagName:"info_allday",childNodes:[{nodeValue:"All Day"}]},{tagName:"info_minutes",childNodes:[{nodeValue:"minutes"}]},{tagName:"info_hours",childNodes:[{nodeValue:"hours"}]},{tagName:"info_duration",childNodes:[{nodeValue:"duration"}]},{tagName:"day_notes",childNodes:[{nodeValue:"click to add daily notes"}]},{tagName:"day_tasks",childNodes:[{nodeValue:"Tasks for the Day"}]},{tagName:"day_add_task",childNodes:[{nodeValue:"add new task"}]},{tagName:"day_all_day",childNodes:[{nodeValue:"All Day Events"}]},{tagName:"day_click",childNodes:[{nodeValue:"click here to add some notes"}]},{tagName:"day_saving",childNodes:[{nodeValue:"saving..."}]},{tagName:"day_loading",childNodes:[{nodeValue:"loading..."}]},{tagName:"manage_cal",childNodes:[{nodeValue:"Calendar Management"}]},{tagName:"manage_prop",childNodes:[{nodeValue:"calendar properties"}]},{tagName:"manage_share",childNodes:[{nodeValue:"share calendar"}]},{tagName:"manage_export",childNodes:[{nodeValue:"export calendar"}]},{tagName:"manage_delete",childNodes:[{nodeValue:"delete calendar: "}]},{tagName:"manage_remove",childNodes:[{nodeValue:"remove calendar: "}]},{tagName:"manage_edit",childNodes:[{nodeValue:"edit a calendar"}]},{tagName:"manage_select_buddies",childNodes:[{nodeValue:"Select which buddies to share with from the list on the right"}]},{tagName:"manage_add_buddy",childNodes:[{nodeValue:"Add Buddy"}]},{tagName:"manage_add_buddy_link",childNodes:[{nodeValue:"Add a Buddy!"}]},{tagName:"manage_no_buddies",childNodes:[{nodeValue:"No Buddies Here :("}]},{tagName:"manage_buddy_email",childNodes:[{nodeValue:"enter buddy's email address"}]},{tagName:"manage_buddy_name",childNodes:[{nodeValue:"Buddy Name:"}]},{tagName:"manage_invite_buddy",childNodes:[{nodeValue:"Invite Your Buddy!"}]},{tagName:"manage_invite_buddy_to",childNodes:[{nodeValue:"Invite %sub% to Jotlet!"}]},{tagName:"manage_go_back",childNodes:[{nodeValue:"Go Back"}]},{tagName:"manage_share_bang",childNodes:[{nodeValue:"Share!"}]},{tagName:"manage_share_self",childNodes:[{nodeValue:"You can't share with yourself! :)"}]},{tagName:"manage_buddy_in_list",childNodes:[{nodeValue:"%sub% is already in your buddy list"}]},{tagName:"manage_valid_email",childNodes:[{nodeValue:"Please enter a valid email address"}]},{tagName:"manage_searching",childNodes:[{nodeValue:"Searching..."}]},{tagName:"manage_adding_buddy",childNodes:[{nodeValue:"Adding Buddy..."}]},{tagName:"manage_done_sharing",childNodes:[{nodeValue:"Done Sharing!"}]},{tagName:"manage_error",childNodes:[{nodeValue:"There was an error trying to share"}]},{tagName:"manage_sharing",childNodes:[{nodeValue:"Sharing with Buddy..."}]},{tagName:"manage_add_fail",childNodes:[{nodeValue:"could not add buddy :("}]},{tagName:"manage_inviting",childNodes:[{nodeValue:"Inviting Buddy..."}]},{tagName:"manage_done_inviting",childNodes:[{nodeValue:"Done Inviting!"}]},{tagName:"manage_fail_inviting",childNodes:[{nodeValue:"Error Inviting"}]},{tagName:"manage_done_invite_msg",childNodes:[{nodeValue:"We'll let you know when your buddy has accepted the invitation to Jotlet."}]},{tagName:"manage_fail_invite_msg",childNodes:[{nodeValue:"There was an error inviting your buddy. Please try again in a few minutes."}]},{tagName:"manage_subscribe",childNodes:[{nodeValue:"Subscribe"}]},{tagName:"manage_export_bang",childNodes:[{nodeValue:"Export"}]},{tagName:"confirm_del_cal",childNodes:[{nodeValue:'Delete calendar "%sub%"?\nThis cannot be undone!'}]},{tagName:"confirm_rem_cal",childNodes:[{nodeValue:'Remove calendar "%sub%"?\nThis cannot be undone!'}]},{tagName:"confirm_del_event",childNodes:[{nodeValue:'Delete event "%sub%"?\nThis cannot be undone!'}]},{tagName:"confirm_del_event_s",childNodes:[{nodeValue:'Delete event series containing "%sub%"?\nThis cannot be undone!'}]},{tagName:"confirm_del_task",childNodes:[{nodeValue:'Delete task "%sub%"?\nThis cannot be undone!'}]},{tagName:"confirm_del_task_s",childNodes:[{nodeValue:'Delete task series containing "%sub%"?\nThis cannot be undone!'}]},{tagName:"setting_title",childNodes:[{nodeValue:"Personal Settings"}]},{tagName:"setting_first",childNodes:[{nodeValue:"First Name"}]},{tagName:"setting_last",childNodes:[{nodeValue:"Last Name"}]},{tagName:"setting_email",childNodes:[{nodeValue:"Email"}]},{tagName:"setting_sms",childNodes:[{nodeValue:"SMS"}]},{tagName:"setting_zip",childNodes:[{nodeValue:"Postal Code"}]},{tagName:"setting_language",childNodes:[{nodeValue:"Language"}]},{tagName:"setting_save",childNodes:[{nodeValue:"Save Profile"}]},{tagName:"setting_old_pass",childNodes:[{nodeValue:"Old Password"}]},{tagName:"setting_new_pass",childNodes:[{nodeValue:"New Password"}]},{tagName:"setting_confirm",childNodes:[{nodeValue:"Confirm"}]},{tagName:"setting_save_pass",childNodes:[{nodeValue:"Update Password"}]},{tagName:"setting_zone",childNodes:[{nodeValue:"Time zone"}]},{tagName:"setting_zone_desc",childNodes:[{nodeValue:"Time zones are listed with an * if they respect Daylight Savings Time"}]},{tagName:"setting_save_zone",childNodes:[{nodeValue:"Save Local Settings"}]},{tagName:"setting_zoom",childNodes:[{nodeValue:"Zoom Level"}]},{tagName:"setting_zoom_desc",childNodes:[{nodeValue:"The zoom level affects how much time each row in day view represents. The 1 hour zoom will show a compact view, while the 15 minute zoom will show more detail."}]},{tagName:"setting_zoom_15_min",childNodes:[{nodeValue:"15 minutes"}]},{tagName:"setting_zoom_30_min",childNodes:[{nodeValue:"30 minutes"}]},{tagName:"setting_zoom_1_hour",childNodes:[{nodeValue:"1 hour"}]},{tagName:"setting_save_zoom",childNodes:[{nodeValue:"Save Zoom"}]},{tagName:"setting_shade",childNodes:[{nodeValue:"Smart-Shading day cells"}]},{tagName:"setting_shade_desc",childNodes:[{nodeValue:"Smart-Shading will automatically darken the background of busier days in month view. The busier the day, the darker the cell."}]},{tagName:"setting_save_shade",childNodes:[{nodeValue:"Save Month Settings"}]},{tagName:"setting_profile",childNodes:[{nodeValue:"user profile"}]},{tagName:"setting_change_pass",childNodes:[{nodeValue:"change password"}]},{tagName:"setting_time_zones",childNodes:[{nodeValue:"time zones"}]},{tagName:"setting_day_view",childNodes:[{nodeValue:"day view"}]},{tagName:"setting_month_view",childNodes:[{nodeValue:"month view"}]},{tagName:"setting_start_week",childNodes:[{nodeValue:"Start of Week:  "}]},{tagName:"err_cal_name",childNodes:[{nodeValue:"Please enter a name for the calendar"}]},{tagName:"email_invite",childNodes:[{nodeValue:"Hey!\n\nCheck out Jotlet Calendar at www.jotlet.net! It's a great looking and easy to use online calendar.\n\nSign up so I can share my schedule with you!"}]},{tagName:"err_task_title",childNodes:[{nodeValue:"Please enter a title for your task."}]},{tagName:"err_event_title",childNodes:[{nodeValue:"Please enter a title for your event."}]},{tagName:"remind_adding",childNodes:[{nodeValue:"Adding Reminder..."}]},{tagName:"remind_loading",childNodes:[{nodeValue:"Loading Reminder..."}]},{tagName:"remind_email",childNodes:[{nodeValue:"Email"}]},{tagName:"remind_sms",childNodes:[{nodeValue:"Text Message"}]},{tagName:"remind_both",childNodes:[{nodeValue:"Both"}]},{tagName:"remind_5_min",childNodes:[{nodeValue:"5 minutes"}]},{tagName:"remind_4_hour",childNodes:[{nodeValue:"4 hours"}]},{tagName:"remind_0_day",childNodes:[{nodeValue:"the same day"}]},{tagName:"remind_1_day",childNodes:[{nodeValue:"the day before"}]},{tagName:"remind_2_day",childNodes:[{nodeValue:"2 days before"}]},{tagName:"remind_3_day",childNodes:[{nodeValue:"3 days before"}]},{tagName:"remind_4_day",childNodes:[{nodeValue:"4 days before"}]},{tagName:"remind_5_day",childNodes:[{nodeValue:"5 days before"}]},{tagName:"remind_1_week",childNodes:[{nodeValue:"1 week before"}]},{tagName:"remind_2_week",childNodes:[{nodeValue:"2 weeks before"}]},{tagName:"remind_event",childNodes:[{nodeValue:"%email% me %time% before this event"}]},{tagName:"remind_task_due",childNodes:[{nodeValue:"%email% me at %time%%date% its due"}]},{tagName:"remind_task_no",childNodes:[{nodeValue:"%email% me at %time% on %date%"}]},{tagName:"recur_daily",childNodes:[{nodeValue:"daily"}]},{tagName:"recur_daily_num",childNodes:[{nodeValue:"every %num% days"}]},{tagName:"recur_daily_weekday",childNodes:[{nodeValue:"every weekday"}]},{tagName:"recur_weekly",childNodes:[{nodeValue:"weekly"}]},{tagName:"recur_weekly_num",childNodes:[{nodeValue:"every %num% weeks on:"}]},{tagName:"recur_monthly",childNodes:[{nodeValue:"monthly"}]},{tagName:"recur_monthly_num",childNodes:[{nodeValue:"day %num% of every %num2% months"}]},{tagName:"recur_monthly_date",childNodes:[{nodeValue:"the %first% %weekday% of every %num% months"}]},{tagName:"recur_yearly",childNodes:[{nodeValue:"yearly"}]},{tagName:"recur_yearly_exact",childNodes:[{nodeValue:"every %month% %day%"}]},{tagName:"recur_yearly_rel",childNodes:[{nodeValue:"the %first% %weekday% of %month%"}]},{tagName:"recur_custom",childNodes:[{nodeValue:"custom"}]},{tagName:"recur_custom_desc",childNodes:[{nodeValue:"Select your custom series of dates from the small calendar on the left."}]},{tagName:"recur_custom_dates",childNodes:[{nodeValue:"Selected Dates: "}]},{tagName:"recur_end",childNodes:[{nodeValue:"End Series:"}]},{tagName:"recur_end_after_e",childNodes:[{nodeValue:"End after %num% events"}]},{tagName:"recur_end_after_t",childNodes:[{nodeValue:"End after %num% tasks"}]},{tagName:"recur_end_by",childNodes:[{nodeValue:"by %date%"}]},{tagName:"recur_event",childNodes:[{nodeValue:"Repeat this event: "}]},{tagName:"recur_task",childNodes:[{nodeValue:"Repeat this task: "}]},{tagName:"recur_first",childNodes:[{nodeValue:"first"}]},{tagName:"recur_second",childNodes:[{nodeValue:"second"}]},{tagName:"recur_third",childNodes:[{nodeValue:"third"}]},{tagName:"recur_fourth",childNodes:[{nodeValue:"fourth"}]},{tagName:"recur_fifth",childNodes:[{nodeValue:"fifth"}]},{tagName:"recur_last",childNodes:[{nodeValue:"last"}]}],tagName:"lang_table"}],tagName:"language"}],tagName:"languages"};

jive.model.isLanguage=function(A){return $def(A)&&$obj(A)&&A!=null&&$def(A.translate)&&$def(A.getId)};jive.model.Language=function(E,B,D){var C=this;this.getId=function(){return E};this.getName=function(){return B};this.translate=function(F){var G=D.get(F);if(G==false){alert('Language Exception: key "'+F+'" not found')}else{if(G=="_"){return" "}else{G=G.replace(/#xD#xA/g,"\r\n");return G}}};var A=new Array();A.push("red"),A.push("blue"),A.push("green"),A.push("pink"),A.push("purple"),A.push("orange"),A.push("yellow"),A.push("grey");this.color=function(F){return C.translate("color_"+A[F])};this.longMonth=function(F){var G=new Array();G.push("january");G.push("february");G.push("march");G.push("april");G.push("may");G.push("june");G.push("july");G.push("august");G.push("september");G.push("october");G.push("november");G.push("december");return C.translate(G[F])};this.shortMonth=function(F){var G=new Array();G.push("sh_january");G.push("sh_february");G.push("sh_march");G.push("sh_april");G.push("sh_may");G.push("sh_june");G.push("sh_july");G.push("sh_august");G.push("sh_september");G.push("sh_october");G.push("sh_november");G.push("sh_december");return C.translate(G[F])};this.longDay=function(F){var G=new Array();G.push("sunday");G.push("monday");G.push("tuesday");G.push("wednesday");G.push("thursday");G.push("friday");G.push("saturday");return C.translate(G[F])};this.shortDay=function(F){var G=new Array();G.push("sh_sunday");G.push("sh_monday");G.push("sh_tuesday");G.push("sh_wednesday");G.push("sh_thursday");G.push("sh_friday");G.push("sh_saturday");return C.translate(G[F])};this.weekNumber=function(F){var G=new Array();G.push("recur_first");G.push("recur_second");G.push("recur_third");G.push("recur_fourth");G.push("recur_fifth");G.push("recur_last");return C.translate(G[F])}};jive.model.LanguageManager=function(D,J){var G=this;var E=null;var F=new Array();var A=new jive.ext.y.HashTable();var I=new Array();this.getActiveLanguage=function(){return E};this.setActiveLanguage=function(K){if(jive.model.isLanguage(K)){E=K;G.notifyLanguageChanged(E)}else{return false}};this.getLanguageList=function(){return A.toArray()};this.getSilentLanguages=function(){return F};this.loadLanguage=function(L){G.notifyLoadBegin();var K=D.newAjax(G.loadOk,G.loadFail);K.POST(HOSTURL+AJAXPATH+"?load_language","lang_id="+L)};this.saveLanguage=function(L){G.notifyLoadBegin();var M=function(O){return function(P){G.loadOk(P);var Q=A.get(O);if($obj(Q)&&Q!=null){G.setActiveLanguage(Q)}}}(L);var N=A.get(L);if($obj(N)&&N!=null){M=function(O){return function(P){G.setActiveLanguage(A.get(O))}}(L)}var K=D.newAjax(M,G.loadFail);K.POST(HOSTURL+AJAXPATH+"?save_language","lang_id="+L)};function C(P){var K;if(P.childNodes.length>0){if(P.childNodes[0].tagName=="language"){if(P.childNodes[0].childNodes.length>0){B=P.childNodes[0];var N="";var R=0;var Q=new jive.ext.y.HashTable();for(var M=0;M<B.childNodes.length;M++){if(B.childNodes[M].tagName=="name"){N=B.childNodes[M].childNodes[0].nodeValue}else{if(B.childNodes[M].tagName=="lang_id"){R=B.childNodes[M].childNodes[0].nodeValue}else{if(B.childNodes[M].tagName=="lang_table"){var O=B.childNodes[M];for(var L=0;L<O.childNodes.length;L++){Q.put(O.childNodes[L].tagName,O.childNodes[L].childNodes[0].nodeValue)}}}}}B=new jive.model.Language(R,N,Q);A.put(B.getId(),B)}else{return false}}else{return false}}else{return false}return B}this.loadOk=function(K){if(!C(K)){G.notifyLoadFail()}else{G.notifyLoadFinish()}};this.loadFail=function(){G.notifyLoadFail()};this.addListener=function(K){I.push(K)};this.removeListener=function(L){for(var K=0;K<I.length;K++){if(I[K]==L){I.splice(K,1)}}};this.notifyLoadBegin=function(){for(var K=0;K<I.length;K++){I[K].beginLoadingLanguages()}};this.notifyLoad=function(L){for(var K=0;K<I.length;K++){I[K].loadLanguage(L)}};this.notifyLoadFinish=function(){for(var K=0;K<I.length;K++){I[K].doneLoadingLanguages()}};this.notifyLoadFail=function(){for(var K=0;K<I.length;K++){I[K].loadingLanguagesFailed()}};this.notifyLanguageChanged=function(L){for(var K=0;K<I.length;K++){I[K].languageChanged(L)}};try{if($def(J)){var B=C(J);if($obj(B)&&B!=null){G.setActiveLanguage(B)}else{alert("error parsing")}}else{alert("no default langauge")}}catch(H){alert("language: "+H)}};

jive.model.LoginManager=function(H){var F=this;var E=new Array();var B=new Array();function A(I){try{var L=new jive.xml.XMLParser();var J=L.parse(I);if($obj(J.documentElement)&&J.documentElement!=null){J=J.documentElement}else{J=new Object();J.childNodes=new Array();J.tagName="failed"}if(J.tagName=="success"){F.notifyLoginOk()}else{F.notifyLoginFail()}}catch(K){alert(K)}}function D(){F.notifyLoginFail()}this.login=function(J){var I=new jotlet.external.y.yAjax(A,D);alert("logging in via ajax")};var C=false;function G(){while(B.length>0){B[0]();B.splice(0,1)}}this.addListener=function(I){if(!C){E.push(I)}else{B.push(function(){F.addListener(I)})}};this.removeListener=function(J){if(!C){for(var I=0;I<E.length;I++){if(E[I]==J){E.splice(I,1)}}}else{B.push(function(){F.removeListener(J)})}};this.notifyLoginOk=function(){C=true;for(var I=0;I<E.length;I++){E[I].loginOk()}C=false;G()};this.notifyLoginFail=function(){C=true;for(var I=0;I<E.length;I++){E[I].loginFail()}C=false;G()}};

jive.model.RefreshManager=function(H){var I=this;var L=new Array();var A=H.getSettingsManager().getGMT();var D=H.getSettingsManager().getGMT();var B=true;this.poke=function(){try{if(B){A=H.getSettingsManager().getGMT()}}catch(N){alert("refresh error:"+N)}};this.loggedOut=function(){B=false};function F(S,Q){try{I.notifyRefreshing();S.setTime(S.getTime()-5);var T=new jive.model.DateHelper(H);var R=T.formatToDateTime(S);var O=H.newAjax(E,G);var P=T.formatToDateTime(H.getEventCache().getMinTime());var N=T.formatToDateTime(H.getEventCache().getMaxTime());O.POST(HOSTURL+AJAXPATH+"?refresh","dt="+encodeURIComponent(R)+"&mindt="+P+"&maxdt="+N+(Q?"&all":""))}catch(U){alert("refreshing: "+U)}}this.refresh=function(){if(B){F(D,false)}};this.reload=function(O){var N=D;I.notifyRefreshing();E(O);D=N};var K=new jive.ext.y.HashTable();this.getCustomCache=function(N){var O=K.get(N);if(!$obj(O)){O=new jive.ext.y.HashTable();K.put(N,O)}return O};function C(N){var O=new jive.ext.y.HashTable();K.put(N,O);return O}function M(P){for(var O=0;O<P.childNodes.length;O++){var R=C(P.childNodes[O].tagName);for(var N=0;N<P.childNodes[O].childNodes.length;N++){var Q=parseInt(P.childNodes[O].childNodes[N].childNodes[0].nodeValue);R.put(Q,true)}}}function E(U){try{B=true;for(var R=0;R<U.childNodes.length;R++){if(U.childNodes[R].tagName=="projects"){if(U.childNodes[R].childNodes.length>0){H.getProjectCache().loadExternalProjects(U.childNodes[R])}}else{if(U.childNodes[R].tagName=="events"){if(U.childNodes[R].childNodes.length>0){H.getEventCache().reloadEvents(U.childNodes[R])}}else{if(U.childNodes[R].tagName=="del_cals"){try{if(U.childNodes[R].childNodes.length>0){H.getCalendarCache().unloadCalendars(U.childNodes[R])}}catch(T){alert("error unloading calendars: "+T)}}else{if(U.childNodes[R].tagName=="del_events"){try{if(U.childNodes[R].childNodes.length>0){H.getEventCache().unloadEvents(U.childNodes[R])}}catch(T){alert("error unloading calendars: "+T)}}else{if(U.childNodes[R].tagName=="event_cache"){try{if(U.childNodes[R].childNodes.length>0){M(U.childNodes[R])}}catch(T){alert("error unloading calendars: "+T)}}else{if(U.childNodes[R].tagName=="reminders"){if(U.childNodes[R].childNodes.length>0){H.getReminderCache().reloadReminders(U.childNodes[R])}}else{if(U.childNodes[R].tagName=="comments"){if(U.childNodes[R].childNodes.length>0){H.getCommentCache().reloadComments(U.childNodes[R])}}else{if(U.childNodes[R].tagName=="forms"){if(U.childNodes[R].childNodes.length>0){H.getFormManager().reloadForms(U.childNodes[R])}}else{if(U.childNodes[R].tagName=="sync"){if($def(H.getSyncManager)){H.getSyncManager().reloadSync(U.childNodes[R])}}else{if(U.childNodes[R].tagName=="calendars"){if(U.childNodes[R].childNodes.length>0){H.getCalendarCache().reloadCalendars(U.childNodes[R])}}else{if(U.childNodes[R].tagName=="settings"){H.getSettingsManager().reloadSettings(U.childNodes[R])}else{if(U.childNodes[R].tagName=="deleted"){try{var W=U.childNodes[R];for(var Q=0;Q<W.childNodes.length;Q++){if(W.childNodes[R].tagName=="event"){var X=parseInt(W.childNodes[Q].nodeValue);var O=H.getEventCache().getTaskSilent(V);H.getEventCache().notifyDeletingEvent(O);H.getEventCache().notifyDoneDeletingEvent(O)}else{if(W.childNodes[R].tagName=="task"){var V=parseInt(W.childNodes[Q].nodeValue);var P=H.getEventCache().getTaskSilent(V);H.getEventCache().notifyDeletingTask(P);H.getEventCache().notifyDoneDeletingTask(P)}else{if(W.childNodes[R].tagName=="calendar"){var S=parseInt(W.childNodes[Q].nodeValue);var N=H.getCalendarCache().getCalendar(S);if($obj(N)&&N!=null){H.getCalendarCache().notifyDeletingCalendar(N);H.getCalendarCache().notifyDoneDeletingCalendar(N)}}}}}}catch(T){alert("exception refreshing deleted items: "+T)}}}}}}}}}}}}}}D=H.getSettingsManager().getGMT();I.notifyDoneRefreshing()}catch(T){alert("refresh.js:loadXML: "+T)}}function G(){I.notifyRefreshingFailed()}this.loadRemoteXML=function(N){I.notifyRefreshing();E(N)};this.addListener=function(N){L.push(N)};this.removeListener=function(O){for(var N=0;N<L.length;N++){if(L[N]==O){L.splice(N,1)}}};this.notifyRefreshing=function(){for(var N=0;N<L.length;N++){L[N].refreshing()}};this.notifyDoneRefreshing=function(){for(var N=0;N<L.length;N++){L[N].doneRefreshing()}};this.notifyRefreshingFailed=function(){for(var N=0;N<L.length;N++){L[N].refreshingFailed()}};var J=new Object();J.loginOk=function(){var O=new jive.model.DateHelper(H);if(A.getTime()<D.getTime()){var N=A}else{var N=D}F(N,true)};J.loginFail=function(){};H.getLoginManager().addListener(J)};

jive.model.SettingsManager=function(C){var A=null;var B=(new Date()).getTime();this.getGMT=function(){var E=new Date();if(A!=null&&E.getTime()<B+500){return A}var E=new Date();var D=new Date();D.setTime(Date.parse(E.toUTCString().substring(0,E.toUTCString().length-3)));A=D;return D};this.getNOW=function(){return new Date()};this.getStartWeekOn=function(){return 1};this.getSmartShading=function(){return true};this.getWeatherImage=function(D){return""};this.getDateFormat=function(){return"4/30"};this.getPreferredEditorMode=function(){if(preferredMode==""&&$def(WikiTextConverter)){WikiTextConverter.getPreferredEditorMode({callback:function(D){preferredMode=D},timeout:DWRTimeout,errorHandler:editorErrorHandler})}if(preferredMode==""){preferredMode="text"}return preferredMode}};

jive.model.User=function(){var E=this;var D=new Array();function B(H,I){return function(){H(I)}}this.clearRevertActions=function(){D=new Array()};this.revert=function(){while(D.length>0){D[0]();D.splice(0,1)}};var G;var F;var A;var C;this.getID=function(){return G};this.getUsername=function(){return F};this.getFullName=function(){return A};this.getURL=function(){return C};this.setID=function(H){G=H};this.setUsername=function(H){F=H};this.setFullName=function(H){D.push(B(function(I){A=I},A));A=H};this.setURL=function(H){C=H};this.cleanAfterInit=function(){E.clearRevertActions();E.setID=null;E.setUsername=null;this.setURL=null}};jive.model.UserCache=function(F){var E=this;var B=new jive.ext.y.HashTable();function G(H){var I=B.get(H.getID());if($obj(I)){I.setFullName(H.getFullName());I.clearRevertActions()}else{B.put(H.getID(),H)}E.notifyLoadUser(H)}function A(J){var H=new jive.model.User();for(var I=0;I<J.childNodes.length;I++){if(J.childNodes[I].tagName=="i"){if(J.childNodes[I].childNodes.length>0){H.setID(parseInt(J.childNodes[I].childNodes[0].nodeValue))}}else{if(J.childNodes[I].tagName=="u"){H.setUsername(J.childNodes[I].childNodes[0].nodeValue)}else{if(J.childNodes[I].tagName=="n"){H.setFullName(J.childNodes[I].childNodes[0].nodeValue)}else{if(J.childNodes[I].tagName=="url"){H.setURL(J.childNodes[I].childNodes[0].nodeValue)}}}}}H.cleanAfterInit();G(H);return H}this.loadExternalUser=function(I){E.notifyLoadBegin();try{var H=A(I);E.notifyLoadFinish();return H}catch(J){E.notifyLoadFail()}return null};this.addListener=function(H){D.push(H)};var D=new Array();var C=new Array();this.addListenerAction=function(H){C.push(H)};this.executeListenerActions=function(){while(C.length>0){C[0]();C.splice(0,1)}};this.removeListener=function(I){for(var H=0;H<D.length;H++){if(D[H]==I){D.splice(H,1)}}};this.notifyLoadUser=function(I){for(var H=0;H<D.length;H++){D[H].loadUser(I)}E.executeListenerActions()};this.notifyLoadBegin=function(){for(var H=0;H<D.length;H++){D[H].beginLoadingUsers()}E.executeListenerActions()};this.notifyLoadFinish=function(){for(var H=0;H<D.length;H++){D[H].doneLoadingUsers()}E.executeListenerActions()};this.notifyLoadFail=function(){for(var H=0;H<D.length;H++){D[H].loadingUsersFailed()}E.executeListenerActions()}};

jive.model.isCheckPoint=function(A){return $def(A)&&$obj(A)&&A!=null&&$def(A.isCheckPoint)};jive.model.CheckPoint=function(C){var I=this;var E=new Array();function K(L,M){return function(){L(M)}}this.clearRevertActions=function(){E=new Array()};this.revert=function(){while(E.length>0){E[0]();E.splice(0,1)}};var F=C;this.getProject=function(){return F};var B;var G=null;var D=null;var A="";var H="";var J=null;this.isCheckPoint=function(){return true};this.getID=function(){return B};this.getCreatedOn=function(){return G};this.getLastModifiedOn=function(){return D};this.getName=function(){return A};this.getDescription=function(){return H};this.getDueDate=function(){return J};this.setID=function(L){B=L};this.setCreatedOn=function(L){G=L};this.setLastModifiedOn=function(L){D=L};this.setName=function(L){E.push(K(function(M){A=M},A));A=L};this.setDescription=function(L){E.push(K(function(M){H=M},H));H=L};this.setDueDate=function(L){E.push(K(function(M){J=M},J));J=L};this.cleanAfterInit=function(){I.clearRevertActions();I.setID=null;I.setCreatedOn=null;I.setLastModifiedOn=null}};jive.model.Project=function(){var J=this;var F=new Array();function L(M,N){return function(){M(N)}}this.clearRevertActions=function(){F=new Array()};this.revert=function(){while(F.length>0){F[0]();F.splice(0,1)}};var C;var A="";var I="";var E;var K;var B;var G;var D=false;var H=new Array();this.getID=function(){return C};this.getCreator=function(){return E};this.getLastModifiedOn=function(){return B};this.getName=function(){return A};this.getDescription=function(){return I};this.getDueDate=function(){return K};this.getTasks=function(){return G};this.isEditable=function(){return D};this.getCheckPoints=function(){return H};this.setID=function(M){C=M};this.setCreator=function(M){E=M};this.setEditable=function(M){D=M};this.setLastModifiedOn=function(M){B=M};this.setName=function(M){F.push(L(function(N){A=N},A));A=M};this.setDescription=function(M){F.push(L(function(N){I=N},I));I=M};this.setDueDate=function(M){F.push(L(function(N){K=N},K));K=M};this.setTasks=function(M){G=M};this.setCheckPoints=function(M){H=M};this.cleanAfterInit=function(){J.clearRevertActions();J.setID=null;J.setCreator=null;J.setEditable=null;J.setLastModifiedOn=null;J.setCheckPoints=null}};jive.model.ProjectCache=function(G){var F=this;var C=new jive.ext.y.HashTable();this.getProject=function(I){return C.get(I)};function B(I){var J=C.get(I.getID());if($obj(J)){J.setCreator(I.getCreator());J.setDescription(I.getDescription());J.setDueDate(I.getDueDate());J.clearRevertActions()}else{C.put(I.getID(),I)}F.notifyLoadProject(I)}function H(P){var Q=new Array();for(var N=0;N<P.childNodes.length;N++){var L=new jive.model.Project();var T=P.childNodes[N];var O=new Array();for(var M=0;M<T.childNodes.length;M++){if(T.childNodes[M].tagName=="id"){if(T.childNodes[M].childNodes.length>0){L.setID(T.childNodes[M].childNodes[0].nodeValue)}}else{if(T.childNodes[M].tagName=="name"){if(T.childNodes[M].childNodes.length>0){L.setName(T.childNodes[M].childNodes[0].nodeValue)}}else{if(T.childNodes[M].tagName=="desc"){if(T.childNodes[M].childNodes.length>0){L.setDescription(T.childNodes[M].childNodes[0].nodeValue)}}else{if(T.childNodes[M].tagName=="creator"){var R=T.childNodes[M];var V=G.getUserCache().loadExternalUser(R.childNodes[0]);L.setCreator(V)}else{if(T.childNodes[M].tagName=="d_on"){var I=T.childNodes[M].childNodes[0].nodeValue;if(I!=null){L.setDueDate(new Date(I.replace(/-/g,"/")))}else{L.setDueDate(null)}}else{if(T.childNodes[M].tagName=="m_on"){var I=T.childNodes[M].childNodes[0].nodeValue;if(I!=null){L.setLastModifiedOn(new Date(I.replace(/-/g,"/")))}else{L.setLastModifiedOn(null)}}else{if(T.childNodes[M].tagName=="editable"){L.setEditable(true)}else{if(T.childNodes[M].tagName=="tasks"){var R=T.childNodes[M];var V=G.getTaskCache().loadExternalTasks(R);L.setTasks(V)}else{if(T.childNodes[M].tagName=="cps"){var R=T.childNodes[M];for(var K=0;K<R.childNodes.length;K++){var U=R.childNodes[K];var S=new jive.model.CheckPoint(L);for(var J=0;J<U.childNodes.length;J++){if(U.childNodes[J].tagName=="id"){if(U.childNodes[J].childNodes.length>0){S.setID(U.childNodes[J].childNodes[0].nodeValue)}}else{if(U.childNodes[J].tagName=="c_on"){var I=U.childNodes[J].childNodes[0].nodeValue;if(I!=null){S.setCreatedOn(new Date(I.replace(/-/g,"/")))}else{S.setCreatedOn(null)}}else{if(U.childNodes[J].tagName=="m_on"){var I=U.childNodes[J].childNodes[0].nodeValue;if(I!=null){S.setLastModifiedOn(new Date(I.replace(/-/g,"/")))}else{S.setLastModifiedOn(null)}}else{if(U.childNodes[J].tagName=="nm"){if(U.childNodes[J].childNodes.length>0){S.setName(U.childNodes[J].childNodes[0].nodeValue)}}else{if(U.childNodes[J].tagName=="desc"){if(U.childNodes[J].childNodes.length>0){S.setName(U.childNodes[J].childNodes[0].nodeValue)}}else{if(U.childNodes[J].tagName=="due"){if(U.childNodes[J].childNodes.length>0){var I=U.childNodes[J].childNodes[0].nodeValue;if(I!=null){S.setDueDate(new Date(I.replace(/-/g,"/")))}else{S.setDueDate(null)}}}}}}}}}O.push(S);L.setCheckPoints(O)}}}}}}}}}}}L.cleanAfterInit();B(L);Q.push(L)}return Q}this.loadExternalProjects=function(J){F.notifyLoadBegin();try{var I=H(J);F.notifyLoadFinish();return I}catch(K){F.notifyLoadFail()}return null};this.canEditProjectHuh=function(I){if(I==0){return true}};this.addListener=function(I){E.push(I)};var E=new Array();var A=0;var D=new Array();this.addListenerAction=function(I){D.push(I)};this.executeListenerActions=function(){while(D.length>0){D[0]();D.splice(0,1)}};this.removeListener=function(J){if(A==0){for(var I=0;I<E.length;I++){if(E[I]==J){E.splice(I,1)}}}else{F.addListenerAction(function(K){return function(){F.removeListener(K)}}(J))}};this.notifyLoadProject=function(J){A++;for(var I=0;I<E.length;I++){E[I].loadProject(J)}A--;F.executeListenerActions()};this.notifyLoadBegin=function(){A++;for(var I=0;I<E.length;I++){E[I].beginLoadingProjects()}A--;F.executeListenerActions()};this.notifyLoadFinish=function(){A++;for(var I=0;I<E.length;I++){E[I].doneLoadingProjects()}A--;F.executeListenerActions()};this.notifyLoadFail=function(){A++;for(var I=0;I<E.length;I++){E[I].loadingProjectsFailed()}A--;F.executeListenerActions()}};

jive.model.ProjectCacheListener=function(){this.loadProject=function(A){};this.beginLoadingProjects=function(){};this.doneLoadingProjects=function(){};this.loadingProjectsFailed=function(){}};

jive.model.isDocument=function(A){return $obj(A)&&A!=null&&$def(A.getBody)&&$def(A.getSubject)};jive.model.Document=function(){var E=this;var D=new Array();function A(G,H){return function(){G(H)}}this.clearRevertActions=function(){D=new Array()};this.revert=function(){while(D.length>0){D[0]();D.splice(0,1)}};this.confirm=function(){E.notifyTaskChanged()};var F;var B;this.getID=function(){return F};this.getHTML=function(){return B};this.setID=function(G){F=G};this.setHTML=function(G){D.push(A(function(H){B=H},B));B=G};this.cleanAfterInit=function(){E.clearRevertActions();E.setID=null};this.convertToWiki=function(){objectLookupSessionKey};var C=new Array();this.addListener=function(G){C.push(G)};this.removeListener=function(H){for(var G=0;G<C.length;G++){if(C[G]==H){C.splice(G,1)}}};this.notifyDocumentChanged=function(){for(var G=0;G<C.length;G++){C[G].documentChanged(E)}}};jive.model.DocumentCache=function(D){var F=this;var A=new jive.ext.y.HashTable();function J(){this.documentChanged=function(K){F.notifyDocumentChanged(K)}}function E(L){var K=A.get(L.getID());if($obj(K)){K.clearRevertActions()}else{L.addListener(new J());A.put(L.getID(),L)}F.notifyLoadDocument(L)}this.saveDocument=function(M){F.notifySavingDocument(M);try{var L=D.getSettingsManager();var N=new jive.model.DateHelper(D);var K=D.newAjax(function(P){try{if(P.tagName=="success"){F.notifyDoneSavingDocument(M)}else{F.notifySavingDocumentFailed(M)}}catch(Q){alert(Q)}},function(){try{F.notifySavingDocumentFailed(M)}catch(P){alert("saving failed: "+P)}})}catch(O){F.notifySavingDocumentFailed(M)}};function C(K){F.notifyNewDocumentFromWiki(new jive.model.Document("",K))}this.newDocumentFromWiki=function(K){if(!$def(window.objectLookupSessionKey)){throw"window.objectLookupSessionKey must be defined to use newDocumentFromWiki()"}if(!$def(WikiTextConverter)){throw"WikiTextConverter must be defined to use newDocumentFromWiki()"}WikiTextConverter.convertFromWiki(K,window.objectLookupSessionKey,{callback:C,timeout:DWRTimeout,errorHandler:F.notifyNewDocumentFromWikiFailed})};function B(O){var M=new Array();for(var N=0;N<O.childNodes.length;N++){var K=new jive.model.Document();var P=O.childNodes[N];for(var L=0;L<P.childNodes.length;L++){if(P.childNodes[L].tagName=="id"){if(P.childNodes[L].childNodes.length>0){K.setID(P.childNodes[L].childNodes[0].nodeValue)}}}M.push(K);K.cleanAfterInit();E(K)}return M}this.loadExternalDocuments=function(L){F.notifyLoadBegin();try{var K=loadDocumentsXML(L);F.notifyLoadFinish();return K}catch(M){F.notifyLoadFail()}return null};this.addListener=function(K){H.push(K)};var H=new Array();var I=new Array();this.addListenerAction=function(K){I.push(K)};this.executeListenerActions=function(){while(I.length>0){I[0]();I.splice(0,1)}};this.removeListener=function(L){for(var K=0;K<H.length;K++){if(H[K]==L){H.splice(K,1)}}};this.notifyDocumentChanged=function(L){for(var K=0;K<H.length;K++){H[K].documentChanged(L)}F.executeListenerActions()};this.notifyLoadDocument=function(L){for(var K=0;K<H.length;K++){H[K].loadDocument(L)}F.executeListenerActions()};this.notifyLoadBegin=function(){for(var K=0;K<H.length;K++){H[K].beginLoadingDocuments()}F.executeListenerActions()};this.notifyLoadFinish=function(){for(var K=0;K<H.length;K++){H[K].doneLoadingDocuments()}F.executeListenerActions()};this.notifyLoadFail=function(){for(var K=0;K<H.length;K++){H[K].loadingDocumentsFailed()}F.executeListenerActions()};this.notifySavingDocument=function(L){for(var K=0;K<H.length;K++){H[K].savingDocument(L)}F.executeListenerActions()};this.notifyDoneSavingDocument=function(L){for(var K=0;K<H.length;K++){H[K].doneSavingDocument(L)}F.executeListenerActions()};this.notifySavingDocumentFailed=function(L){for(var K=0;K<H.length;K++){H[K].savingDocumentFailed(L)}F.executeListenerActions()};this.notifyNewDocumentFromWiki=function(L){for(var K=0;K<H.length;K++){H[K].newDocumentFromWiki(L)}F.executeListenerActions()};this.notifyNewDocumentFromWikiFailed=function(){for(var K=0;K<H.length;K++){H[K].newDocumentFromWikiFailed(p)}F.executeListenerActions()};var G=new jive.model.DocumentCacheListener();G.documentChanged=function(K){F.saveDocument(K)};F.addListener(G)};

jive.model.DocumentCacheListener=function(){this.loadingDocumentsFailed=function(){};this.doneLoadingDocuments=function(){};this.beginLoadingDocuments=function(){};this.loadDocument=function(){};this.documentChanged=function(){};this.savingDocument=function(){};this.doneSavingDocument=function(){};this.savingDocumentFailed=function(){};this.newDocumentFromWikiFailed=function(){}};

jive.model.TaskCacheListener=function(){this.loadingTasksFailed=function(){};this.doneLoadingTasks=function(){};this.beginLoadingTasks=function(){};this.loadTask=function(){};this.taskChanged=function(){}};

jive.model.isEvent=function(A){return $obj(A)&&A!=null&&$def(A.getStart)&&$def(A.getEnd)};jive.model.isTask=function(A){return $obj(A)&&A!=null&&$def(A.getDueDate)&&$def(A.getProjectID)};jive.model.Task=function(){var H=this;var E=0;var D=new Array();function P(Q,R){return function(){Q(R)}}this.clearRevertActions=function(){D=new Array()};this.revert=function(){while(D.length>0){D[0]();D.splice(0,1)}};this.confirm=function(){H.notifyTaskChanged()};var C;var O=E;var I=null;var K;var M;var G;var F;var N;var L;var B;var A;this.getID=function(){return C};this.getProjectID=function(){return O};this.getDueDate=function(){return I};this.hasDueDate=function(){return I!=null};this.getSubject=function(){return K};this.getDescription=function(){return M};this.getCreatedBy=function(){return G};this.getCreatedOn=function(){return F};this.getAssignedBy=function(){return L};this.getAssignedTo=function(){return N};this.getURL=function(){return A};this.isComplete=function(){return B};this.setID=function(Q){C=Q};this.setProjectID=function(Q){O=Q};this.setCreatedBy=function(Q){G=Q};this.setCreatedOn=function(Q){F=Q};this.setComplete=function(Q){B=Q};this.setURL=function(Q){A=Q};this.setDueDate=function(Q){D.push(P(function(R){I=R},I));I=Q};this.setSubject=function(Q){D.push(P(function(R){K=R},K));K=Q};this.setDescription=function(Q){D.push(P(function(R){M=R},M));M=Q};this.setAssignedBy=function(Q){D.push(P(function(R){L=R},L));L=Q};this.setAssignedTo=function(Q){D.push(P(function(R){N=R},N));N=Q};this.cleanAfterInit=function(){H.clearRevertActions();H.setID=null;H.setCreatedBy=null;H.setCreatedOn=null;H.setURL=null};var J=new Array();this.addListener=function(Q){J.push(Q)};this.removeListener=function(R){for(var Q=0;Q<J.length;Q++){if(J[Q]==R){J.splice(Q,1)}}};this.notifyTaskChanged=function(){for(var Q=0;Q<J.length;Q++){J[Q].taskChanged(H)}}};jive.model.TaskCache=function(D){var F=this;var A=new jive.ext.y.HashTable();function C(){this.taskChanged=function(J){F.notifyTaskChanged(J)}}function E(K){var J=A.get(K.getID());if($obj(J)){J.setDueDate(K.getDueDate());J.setSubject(K.getSubject());J.setDescription(K.getDescription());J.setAssignedTo(K.getAssignedTo());J.setAssignedBy(K.getAssignedBy());J.clearRevertActions()}else{K.addListener(new C());A.put(K.getID(),K)}F.notifyLoadTask(K)}this.saveTask=function(J){F.notifySavingTask(J);try{var L=D.getSettingsManager();var Q=new jive.model.DateHelper(D);var S=D.newAjax(function(U){try{if(U.tagName=="success"){F.notifyDoneSavingTask(J)}else{F.notifySavingTaskFailed(J)}}catch(V){alert(V)}},function(){try{F.notifySavingTaskFailed(J)}catch(U){alert("saving failed: "+U)}});var P=J.getDueDate();P=(P!=null)?Q.formatToDateTime(P):"";var M=!J.hasDueDate();var N=J.getStatus();var R=J.getSubject();var T=J.getDescription();var K=J.getProjectID();S.POST(HOSTURL+AJAXPATH+"?save_task","task_id="+encodeURIComponent(J.getID())+"&due="+encodeURIComponent(P)+"&status="+encodeURIComponent(N)+"&title="+encodeURIComponent(R)+"&description="+encodeURIComponent(T)+"&never_due="+encodeURIComponent(M?"1":"0")+"&project_id="+K)}catch(O){F.notifySavingTaskFailed(J)}};function B(O){var L=new Array();for(var M=0;M<O.childNodes.length;M++){var J=new jive.model.Task();var P=O.childNodes[M];for(var K=0;K<P.childNodes.length;K++){if(P.childNodes[K].tagName=="id"){if(P.childNodes[K].childNodes.length>0){J.setID(P.childNodes[K].childNodes[0].nodeValue)}}else{if(P.childNodes[K].tagName=="pid"){if(P.childNodes[K].childNodes.length>0){J.setProjectID(P.childNodes[K].childNodes[0].nodeValue)}}else{if(P.childNodes[K].tagName=="due"){var N=P.childNodes[K].childNodes[0].nodeValue;if(N!=null){J.setDueDate(new Date(N.replace(/-/g,"/")))}else{J.setDueDate(null)}}else{if(P.childNodes[K].tagName=="subj"){J.setSubject(P.childNodes[K].childNodes[0].nodeValue)}else{if(P.childNodes[K].tagName=="desc"){J.setDescription(P.childNodes[K].childNodes[0].nodeValue)}else{if(P.childNodes[K].tagName=="c_on"){var N=P.childNodes[K].childNodes[0].nodeValue;if(N!=null){J.setCreatedOn(new Date(N.replace(/-/g,"/")))}else{J.setCreatedOn(null)}}else{if(P.childNodes[K].tagName=="c_by"){J.setCreatedBy(D.getUserCache().loadExternalUser(P.childNodes[K].childNodes[0]))}else{if(P.childNodes[K].tagName=="a_by"){J.setAssignedBy(D.getUserCache().loadExternalUser(P.childNodes[K].childNodes[0]))}else{if(P.childNodes[K].tagName=="a_to"){J.setAssignedTo(D.getUserCache().loadExternalUser(P.childNodes[K].childNodes[0]))}else{if(P.childNodes[K].tagName=="url"){J.setURL(P.childNodes[K].childNodes[0].nodeValue)}else{if(P.childNodes[K].tagName=="status"){J.setComplete(P.childNodes[K].nodeValue=="c")}}}}}}}}}}}}L.push(J);J.cleanAfterInit();E(J)}return L}this.loadExternalTasks=function(K){F.notifyLoadBegin();try{var J=B(K);F.notifyLoadFinish();return J}catch(L){F.notifyLoadFail()}return null};this.addListener=function(J){H.push(J)};var H=new Array();var I=new Array();this.addListenerAction=function(J){I.push(J)};this.executeListenerActions=function(){while(I.length>0){I[0]();I.splice(0,1)}};this.removeListener=function(K){for(var J=0;J<H.length;J++){if(H[J]==K){H.splice(J,1)}}};this.notifyTaskChanged=function(K){for(var J=0;J<H.length;J++){H[J].taskChanged(K)}F.executeListenerActions()};this.notifyLoadTask=function(K){for(var J=0;J<H.length;J++){H[J].loadTask(K)}F.executeListenerActions()};this.notifyLoadBegin=function(){for(var J=0;J<H.length;J++){H[J].beginLoadingTasks()}F.executeListenerActions()};this.notifyLoadFinish=function(){for(var J=0;J<H.length;J++){H[J].doneLoadingTasks()}F.executeListenerActions()};this.notifyLoadFail=function(){for(var J=0;J<H.length;J++){H[J].loadingTasksFailed()}F.executeListenerActions()};var G=new jive.model.TaskCacheListener();G.taskChanged=function(J){F.saveTask(J)};F.addListener(G)};

jive.rte.settings=function(D){function C(F){for(var E=0;E<jive.rte.defaultStyles.length;E++){F+=","+jive.rte.defaultStyles[E]}return F}if(D=="mini-w-quote"){var B=false;var A=jive.rte.settings(0);A.content_css=C(CS_BASE_URL+"/resources/scripts/tiny_mce3/themes/advanced/skins/default/content.css");A.theme_advanced_statusbar_location="none";A.theme_advanced_buttons1="bold,italic,underline,strikethrough,spacerbutton,bullist,numlist,spacerbutton,jiveimage,jivevideo,spacerbutton,jivelink,jiveemoticons,jivequote,spellchecker,html";delete A.theme_advanced_buttons2;delete A.theme_advanced_buttons3;A.default_height=29;return A}else{if(D=="mini"){var B=false;var A=jive.rte.settings(0);A.content_css=C(CS_BASE_URL+"/resources/scripts/tiny_mce3/themes/advanced/skins/default/content.css");A.theme_advanced_statusbar_location="none";A.theme_advanced_buttons1="bold,italic,underline,strikethrough,spacerbutton,bullist,numlist,spacerbutton,jiveimage,jivevideo,spacerbutton,jivelink,jiveemoticons,spellchecker,html";delete A.theme_advanced_buttons2;delete A.theme_advanced_buttons3;A.default_height=29;return A}else{if(D=="widget"){var B=false;var A=jive.rte.settings(0);A.content_css=C(CS_BASE_URL+"/resources/scripts/tiny_mce3/themes/advanced/skins/default/content.css");A.theme_advanced_statusbar_location="none";return A}else{if(D=="wiki"){var A=jive.rte.settings(0);A.content_css=C(CS_BASE_URL+"/resources/scripts/tiny_mce3/themes/advanced/skins/default/wiki.css");return A}else{if(D=="blog"){var A=jive.rte.settings(0);A.content_css=C(CS_BASE_URL+"/resources/scripts/tiny_mce3/themes/advanced/skins/default/blog.css");return A}else{if(D=="thread"){var A=jive.rte.settings(0);A.content_css=C(CS_BASE_URL+"/resources/scripts/tiny_mce3/themes/advanced/skins/default/thread.css");if(_jive_gui_quote_text&&_jive_gui_quote_text.length>0){A.theme_advanced_buttons1="fontselect, fontsizeselect, removeformat, magicspacer, spacerbutton,bullist, numlist, outdent, indent, spacerbutton,jivevideo,spacerbutton,jivelink,tabletoolbar,extra,jivequote,spellchecker,html"}return A}else{if(D==0){return{non_safari_css:"a{\nborder: 1px solid transparent;\n}\nspan.jive_macro.active_link, a.jive_macro.active_link, a.active_link{\nborder: 1px solid blue;\n}\nspan.jive_macro, a.jive_macro{\nborder: 1px solid transparent;\n}",keep_values:true,convert_urls:false,default_height:58,theme_advanced_buttons1:"fontselect, fontsizeselect, removeformat, magicspacer, spacerbutton,bullist, numlist, outdent, indent, spacerbutton,jivevideo,spacerbutton,jivelink,tabletoolbar,extra,spellchecker,html",theme_advanced_buttons2:"bold,italic,underline,strikethrough,forecolor,jivestyle, magicspacer, spacerbutton, justifyleft,justifycenter,justifyright,justifyfull, spacerbutton,jiveimage,spacerbutton,jiveemoticons, jivemacros ",theme_advanced_buttons3:"tablecontrols",fix_list_elements:false,save_callback:"RawHTMLSaveFunction",convert_fonts_to_spans:true,font_size_style_values:"8pt,10pt,12pt,14pt,18pt,24pt,36pt",strict_loading_mode:true,body_class:"jive-widget-formattedtext",theme:"advanced",plugins:"jivebuttons,jiveemoticons,jivestyle,jivelink,jivequote,jivevideo,jiveimage,alignment,safari,spellchecker,html,style,jivelists,table,save,advimage,advlink,iespell,inlinepopups,media,contextmenu,tabletoolbar,jivemacros,jiveutil",doctype:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",content_css:CS_BASE_URL+"/resources/scripts/tiny_mce3/themes/advanced/skins/default/wiki.css",theme_advanced_resize_horizontal:false,theme_advanced_resizing:true,apply_source_formatting:true,spellchecker_languages:SPELL_LANGS,spellchecker_rpc_url:CS_BASE_URL+"/spellcheck.jspa",jive_image_picker_url:B,jive_video_picker_url:B,relative_urls:false,remove_script_host:false,valid_elements:"a[accesskey|charset|class|coords|dir<ltr?rtl|href|hreflang|id|lang|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rel|rev|shape<circle?default?poly?rect|style|tabindex|title|target|type|jivemacro|_.*],abbr[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],acronym[class|dir<ltr?rtl|id|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],address[class|align|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],applet[align<bottom?left?middle?right?top|alt|archive|class|code|codebase|height|hspace|id|name|object|style|title|vspace|width],area[accesskey|alt|class|coords|dir<ltr?rtl|href|id|lang|nohref<nohref|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|shape<circle?default?poly?rect|style|tabindex|title|target],base[href|target],basefont[color|face|id|size],bdo[class|dir<ltr?rtl|id|lang|style|title],big[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],blockquote[cite|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],body[alink|background|bgcolor|class|dir<ltr?rtl|id|lang|link|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onload|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onunload|style|title|text|vlink],br[class|clear<all?left?none?right|id|style|title],button[accesskey|class|dir<ltr?rtl|disabled<disabled|id|lang|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|tabindex|title|type|value],caption[align<bottom?left?right?top|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],center[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],cite[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],code[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],col[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|span|style|title|valign<baseline?bottom?middle?top|width],colgroup[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|span|style|title|valign<baseline?bottom?middle?top|width],dd[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],del[cite|class|datetime|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dfn[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dir[class|compact<compact|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],div[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dl[class|compact<compact|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],dt[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],em/i[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],embed[width|height|src|pluginspage|name|swliveconnect|play<true?false|loop<true?false|menu<true?false|quality<low?autolow?autohigh?high?medium?high?best|scale<default?exact?noorder|salign<l?t?r?b?tl?tr?bl?br|wmode<window?opaque?transparent|bgcolor|base|flashvars|type|allowfullscreen],fieldset[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],font[class|color|dir<ltr?rtl|face|id|lang|size|style|title],form[accept|accept-charset|action|class|dir<ltr?rtl|enctype|id|lang|method<get?post|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onreset|onsubmit|style|title|target],frame[class|frameborder|id|longdesc|marginheight|marginwidth|name|noresize<noresize|scrolling<auto?no?yes|src|style|title],frameset[class|cols|id|onload|onunload|rows|style|title],h1[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h2[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h3[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h4[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h5[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],h6[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],head[dir<ltr?rtl|lang|profile],hr[align<center?left?right|class|dir<ltr?rtl|id|lang|noshade<noshade|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|size|style|title|width],html[dir<ltr?rtl|lang|version],iframe[align<bottom?left?middle?right?top|class|frameborder|height|id|longdesc|marginheight|marginwidth|name|scrolling<auto?no?yes|src|style|title|width],img[align<bottom?left?middle?right?top|alt|border|class|dir<ltr?rtl|height|hspace|id|ismap<ismap|lang|longdesc|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|src|style|title|usemap|vspace|width|jivemacro|_.*|param_.*],input[accept|accesskey|align<bottom?left?middle?right?top|alt|checked<checked|class|dir<ltr?rtl|disabled<disabled|id|ismap<ismap|lang|maxlength|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onselect|readonly<readonly|size|src|style|tabindex|title|type<button?checkbox?file?hidden?image?password?radio?reset?submit?text|usemap|value],ins[cite|class|datetime|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],isindex[class|dir<ltr?rtl|id|lang|prompt|style|title],kbd[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],label[accesskey|class|dir<ltr?rtl|for|id|lang|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],legend[align<bottom?left?right?top|accesskey|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],li[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|type|value],link[charset|class|dir<ltr?rtl|href|hreflang|id|lang|media|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rel|rev|style|title|target|type],map[class|dir<ltr?rtl|id|lang|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],menu[class|compact<compact|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],meta[content|dir<ltr?rtl|http-equiv|lang|name|scheme],noframes[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],noscript[class|dir<ltr?rtl|id|lang|style|title],object[align<bottom?left?middle?right?top|archive|border|class|classid|codebase|codetype|data|declare|dir<ltr?rtl|height|hspace|id|lang|name|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|standby|style|tabindex|title|type|usemap|vspace|width],ol[class|compact<compact|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|start|style|title|type],optgroup[class|dir<ltr?rtl|disabled<disabled|id|label|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],option[class|dir<ltr?rtl|disabled<disabled|id|label|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|selected<selected|style|title|value],p[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],param[id|name|type|value|valuetype<DATA?OBJECT?REF],pre/listing/plaintext/xmp[align|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|width|jivemacro|_.*],q[cite|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],s[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],samp[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],script[charset|defer|language|src|type],select[class|dir<ltr?rtl|disabled<disabled|id|lang|multiple<multiple|name|onblur|onchange|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|size|style|tabindex|title],small[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],span[align<center?justify?left?right|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|jivemacro|_.*],strike[class|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],strong/b[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],style[dir<ltr?rtl|lang|media|title|type],sub[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],sup[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],table[align<center?left?right|bgcolor|border|cellpadding|cellspacing|class|dir<ltr?rtl|frame|height|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rules|style|summary|title|width],tbody[align<center?char?justify?left?right|char|class|charoff|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],td[abbr|align<center?char?justify?left?right|axis|bgcolor|char|charoff|class|colspan|dir<ltr?rtl|headers|height|id|lang|nowrap<nowrap|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rowspan|scope<col?colgroup?row?rowgroup|style|title|valign<baseline?bottom?middle?top|width],textarea[accesskey|class|cols|dir<ltr?rtl|disabled<disabled|id|lang|name|onblur|onclick|ondblclick|onfocus|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|onselect|readonly<readonly|rows|style|tabindex|title],tfoot[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],th[abbr|align<center?char?justify?left?right|axis|bgcolor|char|charoff|class|colspan|dir<ltr?rtl|headers|height|id|lang|nowrap<nowrap|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|rowspan|scope<col?colgroup?row?rowgroup|style|title|valign<baseline?bottom?middle?top|width],thead[align<center?char?justify?left?right|char|charoff|class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],title[dir<ltr?rtl|lang],tr[abbr|align<center?char?justify?left?right|bgcolor|char|charoff|class|rowspan|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|valign<baseline?bottom?middle?top],tt[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],u[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title],ul[class|compact<compact|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title|type],var[class|dir<ltr?rtl|id|lang|onclick|ondblclick|onkeydown|onkeypress|onkeyup|onmousedown|onmousemove|onmouseout|onmouseover|onmouseup|style|title]"}}}}}}}}};

jive.rte.ParamSet=function(){var A=this;this.name="";this.deleteAll=false;this.params=new Array();this.addParam=function(C,B){A.params.push({name:C,value:B})}};

jive.rte.RTE=function(E,J,B){var F=this;var M=false;var K=$(J);var L=document.createElement("TEXTAREA");L.style.display="none";K.parentNode.insertBefore(L,K);if(!$def(B)){B=0}var C=jive.rte.settings(B);C.mode="exact";C.elements=J;C.images_enabled=window._images_enabled;try{if(!C.jive_image_picker_url&&_jive_image_picker_url){C.jive_image_picker_url=_jive_image_picker_url}}catch(H){}if(typeof (tinyMCE)=="undefined"){M=true;L.style.display="none";K.style.display="block";K.style.height="200px"}else{try{tinyMCE.init(C)}catch(H){M=true;L.style.display="none";K.style.display="block";K.style.height="200px"}}this.isTextOnly=function(){return M};var G=null;var O=true;var D=false;var P=true;function A(){if(!F.isTextOnly()&&G==null){G=tinyMCE.getInstanceById(J);if(!$def(G)||G==null){return null}G.getContainer().childNodes[0].style.width="";G.onKeyUp.add(function(R,S){F.notifyOnKeyUp(S.keyCode)});G.onChange.add(function(R,S){F.notifyOnChange(S.keyCode)});G.onInit.add(function(R){return function(S,T){if(S.id==J){R.notifyInitFinished()}}}(F));G.onBeginSpelling.add(function(){D=true});G.onEndSpelling.add(function(){D=false});G.theme.onResize.add(function(){if(P){P=false;F.resizeTo(F.getHeight()+F.getToolbarHeight()+1);G.theme.onResize.dispatch()}else{P=true;F.notifyResized()}});G.plugins.html.registerToggleFunction(F.toggleEditorMode);window.setTimeout(function(){F.notifyInitFinished()},5000);if(window.autoSave){var Q={navigateAway:function(){if(window&&window.autoSave&&F.restoreNavigateAway){window.autoSave.confirmation=F.restoreNavigateAway;F.restoreNavigateAway=false}}};window.autoSave.addListener(Q)}}return G}this.isSpellChecking=function(){return D};this.toggleSpellChecker=function(){A().execCommand("mceSpellCheck")};this.closeAllDialogs=function(){var S=A().windowManager.windows;var R=Object.keys(S);for(var Q=0;Q<R.length;Q++){A().windowManager.close(null,S[R[Q]].id)}return S};this.addMacro=function(S,Q){var R=A();var U=R.selection.isCollapsed();var T=R.plugins.jivemacros.insertMacro(S);R.plugins.jivemacros.applyParameterSet(T,S,Q);if(U){T.setAttribute("id","__sel_me__");R.selection.setNode(T);T=R.getDoc().getElementById("__sel_me__");T.removeAttribute("id")}R.nodeChanged();return T};this.destroy=function(){tinyMCE.remove(J);L.parentNode.removeChild(L);A().getContainer().parentNode.removeChild(G.getContainer())};this.getLang=function(R,Q){return A().getLang(R,Q)};this.isReady=function(){if(F.isTextOnly()){return true}var Q=A();return Q!=null};this.getDOM=function(){return A().getContainer()};this.getID=function(){return J};this.setHTML=function(Q){if(F.isTextOnly()){return K.value=Q}L.value=Q;return A().setContent(Q)};this.getHTML=function(){if(F.isTextOnly()){return K.value}if(this.isHidden()){this.setHTML(L.value)}var Q=A().getContent();if((this.trim(Q).length>0)&&Q.indexOf("<body")!=0){Q="<body>"+Q+"</body>"}while(Q.indexOf("  ")>=0){Q=Q.replace("  ","&nbsp; ")}return Q};this.trim=function(R){var T=R.replace(/^\s\s*/,"");var Q=/\s/;var S=T.length;while(Q.test(T.charAt(--S))){}return T.slice(0,S+1)};this.show=function(){A().show();F.notifyShowing()};this.getWindow=function(){return A().getWin()};this.getBody=function(){return A().getBody()};this.focus=function(){try{if(this.isHidden()){L.focus()}else{A().focus()}}catch(Q){}};this.collapseSelection=function(){var Q=A();Q.selection.select(Q.selection.getNode());Q.selection.collapse()};this.hide=function(){A().hide()};this.isHidden=function(){return L.style.display=="block"};this.resizeTo=function(Q){var U=A().getContainer();var T=U.firstChild;if(T.nodeName.toLowerCase()!="table"){T=T.childNodes[0]}var R=jive.ext.x.xHeight(T.rows[0].cells[0]);if(T.rows.length>2){R+=jive.ext.x.xHeight(T.rows[T.rows.length-1].cells[0])}var S=A().getContentAreaContainer();var V=A().getContentAreaContainer().firstChild;tinymce.DOM.setStyle(V,"height",Q-R);tinymce.DOM.setStyle(T,"height",Q)};this.getHeight=function(){var Q=A().getContentAreaContainer().firstChild;return jive.ext.x.xHeight(Q)};this.getToolbarHeight=function(){var S=A().getContainer();var R=S.firstChild;if(R.nodeName.toLowerCase()!="table"){R=R.childNodes[0]}var Q=jive.ext.x.xHeight(R.rows[0].cells[0]);if(R.rows.length>2){Q+=jive.ext.x.xHeight(R.rows[R.rows.length-1].cells[0])}return Q};this.toggleEditorMode=function(R){if(R==J){if(window&&window.autoSave){F.restoreNavigateAway=window.autoSave.confirmation;window.autoSave.confirmation=false}var S=$(J+"_parent");if(F.isHidden()){var T=jive.ext.x.xHeight(L);L.style.display="none";F.show();F.setHTML(L.value);F.focus();F.resizeTo(T);A().plugins.jivemacros.removeDuplicateMacros(A(),A().getBody());A().plugins.jivemacros.fixBodyParagraphs()}else{var Q=$(J+"_tbl");var T=jive.ext.x.xHeight(Q);L.value=F.getHTML(true);F.hide();L.style.display="block";K.style.display="none";jive.ext.x.xHeight(L,T);F.focus()}F.notifyDoneTogglingMode()}};this.addListener=function(Q){if($def(Q.onShow)){Q.onShow()}I.push(Q)};var I=new Array();var N=new Array();this.addListenerAction=function(Q){N.push(Q)};this.executeListenerActions=function(){while(N.length>0){N[0]();N.splice(0,1)}};this.removeListener=function(R){for(var Q=0;Q<I.length;Q++){if(I[Q]==R){I.splice(Q,1)}}};this.initted=false;this.notifyInitFinished=function(){if(!F.initted){F.initted=true;for(var Q=0;Q<I.length;Q++){I[Q].initFinished()}F.executeListenerActions()}};this.notifyOnKeyUp=function(R){for(var Q=0;Q<I.length;Q++){I[Q].onKeyUp(R)}F.executeListenerActions()};this.notifyOnChange=function(){if(O){O=false;return }for(var Q=0;Q<I.length;Q++){I[Q].onChange()}F.executeListenerActions()};this.notifyResized=function(){for(var Q=0;Q<I.length;Q++){I[Q].onResize()}F.executeListenerActions()};this.notifyShowing=function(){for(var Q=0;Q<I.length;Q++){I[Q].onShow()}F.executeListenerActions()};this.notifyDoneTogglingMode=function(){for(var Q=0;Q<I.length;Q++){I[Q].doneTogglingMode()}F.executeListenerActions()}};

jive.rte.Macro=function(D,A,E,I,B,J,C,H,F){var G=this;this.getName=function(){return D};this.getUrl=function(){return A};this.isButton=function(){return F};this.isEnabled=function(){return H};this.isShowSettings=function(){return I};this.isShowInMacroList=function(){return B};this.getMacroType=function(){return E};this.getParameterSets=function(){return J};this.getAllowedParameters=function(){return C};this.refresh=function(K,M){if(M.getAttribute("jivemacro")==this.getName()){if(this.getMacroType().toLowerCase()=="inline"){var P=M.getAttribute("_title");if($def(P)&&P!=null&&P.length>0){M.innerHTML=P;M.attributes.removeNamedItem("_title")}else{if(tinyMCE.activeEditor.dom.hasClass(M,"default_title")){var L=M.getAttribute("jivemacro");var Q=M.getAttribute("___default_attr");var O=tinyMCE.activeEditor.plugins.jivemacros.getTitleFor(L,Q);if(O&&M.innerHTML!=O[0]){M.innerHTML=O[0]}if(M.innerHTML==""){M.innerHTML="unknown"}}}}else{if(this.getMacroType().toLowerCase()=="image"){var N=window.CS_BASE_URL+"/resources/scripts/tiny_mce3/plugins/jiveemoticons/images/spacer.gif";M.setAttribute("src",N);M.setAttribute("mce_src",N)}}}}};

jive.rte.EmoticonMacro=function(){var C=this;var D=new Array();var E=new Array();D.push({name:"__jive_emoticon_name",value:["happy","laugh","silly","wink","plain","angry","blush","confused","cool","cry","devil","grin","love","mischief","sad","shocked"]});for(var A=0;A<D[0].value.length;A++){E.push({name:D[0].value[A],deleteAll:true,params:[{name:D[0].name,value:D[0].value[A]}]})}var B=new jive.rte.Macro("emoticon","","img",false,true,E,D,true,false);this.getName=B.getName;this.getUrl=B.getUrl;this.isShowInMacroList=B.isShowInMacroList;this.isShowSettings=B.isShowSettings;this.getMacroType=B.getMacroType;this.getParameterSets=B.getParameterSets;this.getAllowedParameters=B.getAllowedParameters;this.refresh=function(F,H){B.refresh(F,H);var G=H.getAttribute("_"+D[0].name);H.setAttribute("class","jive_macro jive_emote");H.setAttribute("src",window.CS_BASE_URL+"/images/emoticons/"+G+".gif");H.setAttribute("mce_src",window.CS_BASE_URL+"/images/emoticons/"+G+".gif")}};jive.rte.macros.push(new jive.rte.EmoticonMacro());

jive.rte.RTEListener=function(){this.onKeyUp=function(A){};this.onChange=function(){};this.onResize=function(){};this.onShow=function(){};this.doneTogglingMode=function(){};this.initFinished=function(){}};

jive.gui.CPDOM=function(D,H,A,G){var F=this;var I=document.createElement("DIV");I.setAttribute("class","jive-link-checkpoint jiveTT-hover-checkpoint");I.className="jive-link-checkpoint jiveTT-hover-checkpoint";var J=document.createElement("SPAN");var C=H.getName();if(C.length==0){C="(no title)"}var B=document.createTextNode(C);var E=document.createElement("SPAN");E.setAttribute("class","month_day_cell_event_desc");E.className="month_day_cell_event_desc";var K="";if(H.getDescription().unescapeHTML().length>0){K=": "+H.getDescription().unescapeHTML()}E.appendChild(document.createTextNode(K));J.appendChild(B);J.appendChild(E);I.appendChild(J);I.getCheckPoint=function(L){return function(){return L}}(H);this.lighten=function(){I.setAttribute("class","month_day_cell_item month_lighten_dom");I.className="month_day_cell_item month_lighten_dom"};this.darken=function(){I.setAttribute("class","month_day_cell_item");I.className="month_day_cell_item"};this.refresh=function(){J.removeChild(J.childNodes[1]);J.removeChild(J.childNodes[0]);J.appendChild(document.createTextNode(H.getName()));var L="";if(H.getDescription().unescapeHTML().length>0){L=": "+H.getDescription().unescapeHTML()}E.removeChild(E.childNodes[0]);E.appendChild(document.createTextNode(L));J.appendChild(E)};this.showDescription=function(L){if(L){jive.ext.x.xDisplayInline(E)}else{jive.ext.x.xDisplayNone(E)}};jive.ext.x.xAddEventListener(I,"click",function(L,M,N){return function(O){L(M);jive.ext.x.xStopPropagation(O);N.setAttribute("class","month_view_day_task_title");N.className="month_view_day_task_title"}}(A,H,J));jive.ext.x.xAddEventListener(I,"dblclick",function(L,M,N){return function(O){L(M);jive.ext.x.xStopPropagation(O);N.setAttribute("class","month_view_day_task_title");N.className="month_view_day_task_title"}}(G,H,J));this.getDOM=function(){return I};this.killYourself=function(){H=null;D=null};this.getCheckPoint=I.getCheckPoint;this.setHighlight=function(L){if(L){I.setAttribute("class","month_day_cell_item_highlight");I.className="month_day_cell_item_highlight"}else{I.setAttribute("class","month_day_cell_item");I.className="month_day_cell_item"}}};

jive.gui.TaskDOM=function(G,A,C,J){var I=this;var M=document.createElement("A");M.setAttribute("class","month_day_cell_item");M.className="month_day_cell_item";var N=document.createElement("SPAN");N.setAttribute("class","month_view_day_task_title");N.className="month_view_day_task_title";var E=A.getSubject();if(E.length==0){E="(no title)"}var D=document.createTextNode(E);var H=document.createElement("SPAN");H.setAttribute("class","month_day_cell_event_desc");H.className="month_day_cell_event_desc";var O="";if(A.getDescription().unescapeHTML().length>0){O=": "+A.getDescription().unescapeHTML()}H.appendChild(document.createTextNode(O));var B=document.createElement("INPUT");B.setAttribute("type","checkbox");B.type="checkbox";if(A.isComplete()){B.checked=true;B.checkedCache=true}else{B.checkedCache=false}jive.ext.x.xAddEventListener(B,"click",function(P,Q){return function(R){try{if(P.checkedCache==P.checked){P.checkedCache=!P.checkedCache;P.checked=!P.checked}else{P.checkedCache=!P.checkedCache}if(P.checked){Q.setComplete(true)}else{Q.setComplete(false)}Q.confirm();jive.ext.x.xStopPropagation(R)}catch(R){alert(R)}}}(B,A));M.appendChild(B);N.appendChild(D);N.appendChild(H);M.appendChild(N);M.getTask=function(P){return function(){return P}}(A);M.setDisabled=function(P){return function(Q){P.disabled=Q}}(B);M.isDisabledHuh=function(P){return function(){return P.disabled}}(B);M.setChecked=function(P){return function(Q){P.checked=Q}}(B);M.isCheckedHuh=function(P){return function(){return P.checked}}(B);this.lighten=function(){M.setAttribute("class","month_day_cell_item month_lighten_dom");M.className="month_day_cell_item month_lighten_dom"};this.darken=function(){M.setAttribute("class","month_day_cell_item");M.className="month_day_cell_item"};this.refresh=function(){N.removeChild(N.childNodes[1]);N.removeChild(N.childNodes[0]);N.appendChild(document.createTextNode(A.getSubject()));var P="";if(A.getDescription().unescapeHTML().length>0){P=": "+A.getDescription().unescapeHTML()}H.removeChild(H.childNodes[0]);H.appendChild(document.createTextNode(P));N.appendChild(H);if(A.isComplete()){M.setChecked(true)}else{M.setChecked(false)}};this.showDescription=function(P){if(P){jive.ext.x.xDisplayInline(H)}else{jive.ext.x.xDisplayNone(H)}};M.setChecked(A.isComplete());jive.ext.x.xAddEventListener(M,"click",function(P,Q,R){return function(S){P(Q);jive.ext.x.xStopPropagation(S);R.setAttribute("class","month_view_day_task_title");R.className="month_view_day_task_title"}}(C,A,N));jive.ext.x.xAddEventListener(M,"dblclick",function(P,Q,R){return function(S){P(Q);jive.ext.x.xStopPropagation(S);R.setAttribute("class","month_view_day_task_title");R.className="month_view_day_task_title"}}(J,A,N));this.getDOM=function(){return M};this.killYourself=function(){A=null;G=null};this.getTask=M.getTask;this.setDisabled=M.setDisabled;this.isDisabledHuh=M.isDisabledHuh;this.setChecked=M.setChecked;this.isCheckedHuh=M.isCheckedHuh;this.setHighlight=function(P){if(P){M.setAttribute("class","month_day_cell_item_highlight");M.className="month_day_cell_item_highlight"}else{M.setAttribute("class","month_day_cell_item");M.className="month_day_cell_item"}};function L(P){if(P==null||P.isEditable()){M.setDisabled(false)}else{M.setDisabled(true)}}if(A.getProjectID()==0){L(null)}else{var F=G.getProjectCache().getProject(A.getProjectID());if($obj(F)&&F!=null){L(F)}else{var K=new jive.model.ProjectCacheListener();K.loadProject=function(P){if(P.getID()==A.getProjectID()){L(P);G.getProjectCache().removeListener(this)}};G.getProjectCache().addListener(K)}}};

jive.gui.isMonthEventDOM=function(A){return $def(A)&&$def(A.getEvent)};jive.gui.isMonthTaskDOM=function(A){return $def(A)&&$def(A.getTask)};jive.gui.MonthView=function(L,G){var K=this;var R=false;var E=null;this.hasAddView=function(){if(E==null){E=$obj(G.getView("add_event"))}return E};this.dayCells=new jive.ext.y.HashTable();this.eventDOMHolders=new jive.ext.y.HashTable();this.taskDOMHolders=new jive.ext.y.HashTable();var c=false;var C=new jive.ext.y.HashTable();var I=new jive.ext.y.HashTable();var T=new jive.ext.y.HashTable();var d=new jive.ext.y.HashTable();var D=document.createElement("DIV");D.setAttribute("class","month_view_holder");D.className="month_view_holder";var P=true;this.setItemVisibility=function(e){P=e};this.getItemVisibility=function(){return P};this.hasPrintView=function(){return true};this.isExpandedHuh=function(){return R};this.expand=function(){R=true;G.showArrows();jive.ext.x.xDisplayBlock(D)};this.collapse=function(){R=false;jive.ext.x.xDisplayNone(D)};function b(){var e=new Date();e.setTime(G.getCurrentDate().getTime());jive.model.dateMinusMonth(e);G.setCurrentDate(e);G.notifyMonthClicked(e)}function O(){var e=new Date();e.setTime(G.getCurrentDate().getTime());e.setMonth(e.getMonth()+1);while(e.getMonth()>G.getCurrentDate().getMonth()+1){jive.model.dateMinusDay(e)}G.setCurrentDate(e);G.notifyMonthClicked(e)}this.getPrevViewFunc=function(){return b};this.getNextViewFunc=function(){return O};this.getMinDate=function(){return G.getMinDate()};this.getMaxDate=function(){return G.getMaxDate()};this.getHeaderText=function(){var f=L.getLanguageManager().getActiveLanguage();var e=new Date();e.setTime(G.getCurrentDate().getTime());return f.longMonth(e.getMonth())};this.go=function(e){G.setCurrentDate(e);K.showMonth(G.getCurrentDate())};this.getName=function(){return"month"};this.getHash=function(){return"month"};this.updateText=function(){if(D.childNodes.length>0){var e=L.getSettingsManager().getStartWeekOn();var g=L.getLanguageManager().getActiveLanguage();for(var f=e;f-e<7;f++){var h=D.childNodes[0].childNodes[0].childNodes[(f-e)%7];if(h.childNodes.length>0){h.removeChild(h.childNodes[0])}h.appendChild(document.createTextNode(g.longDay(f%7)));h.setAttribute("height","2");h.height="2"}}};this.getDOM=function(){return D};var a;function U(h,k){var j;var i;var e;if($def(h.getEvent)){var g=h.getEvent();j=g.getSubject().toLowerCase();i=g.getDescription().toLowerCase();e=g.getCalendarId()}else{if($def(h.getTask)){var f=h.getTask();j=f.getSubject().toLowerCase();i=f.getDescription().toLowerCase();e=f.getProjectID()}}if(L.isCalendarVisibleHuh(e)){if(k.length==0||k.length>0&&(j.indexOf(k)>=0||i.indexOf(k)>=0)){h.darken()}else{h.lighten()}}}var A="";var H=(new Date()).getMonth();this.filter=function(l){if(A!=l||H!=G.getCurrentDate().getMonth()){A=l;H=G.getCurrentDate().getMonth();if(K.isExpandedHuh()){a=""+(new Date()).getTime()+""+Math.random();var k=a;var j=new Date();var h=G.getMinDate();var f=G.getMaxDate();j.setTime(h.getTime());l=l.toLowerCase();while(k==a&&(j.getTime()<f.getTime()+24*60*60*1000)){var e=N(j);for(var g=1;g<e.childNodes.length;g++){U(e.childNodes[g],l)}j.setTime(j.getTime()+24*60*60*1000)}}}};this.addEvent=function(n){try{var g=L.getSettingsManager();var p=F(n);var o=new Date();if(n.isAllDay()){o.setTime(n.getStart().getTime())}else{o.setTime(g.adjustDate(n.getStart()).getTime())}var h=0;var l=new Date();if(n.isAllDay()){l.setTime(n.getEnd().getTime())}else{l.setTime(g.adjustDate(n.getEnd()).getTime())}if(jive.model.dateLT(o,L.getEventCache().getMinTime())){o.setTime(L.getEventCache().getMinTime().getTime())}if(jive.model.dateGT(l,L.getEventCache().getMaxTime())){l.setTime(L.getEventCache().getMaxTime().getTime())}while(jive.model.dateLTEQ(o,l)){var m=N(o);if($def(L.getDragManager)){var j=L.getDragManager();var f=new Date();f.setTime(o.getTime());var q=new jive.gui.CellDragListener(L,n,f,L.notifyStopDrag,L.notifyDragging);if($obj(p[h].monthViewDList)&&p[h].monthViewDList!=null){j.removeDragListener(p[h],p[h].monthViewDList)}p[h].monthViewDList=q;j.enableDrag(p[h]);j.addDragListener(p[h],q)}if(!L.isCalendarVisibleHuh(n.getCalendarId())){jive.ext.x.xDisplayNone(p[h])}else{jive.ext.x.xDisplayBlock(p[h])}var r=G.getFilterText();U(p[h],r);m.appendEventDOM(p[h]);p[h].myParent=m;h++;o.setDate(o.getDate()+1)}}catch(k){alert("error adding event to month view: "+k)}};this.addTask=function(j){try{var i=L.getSettingsManager();var m=J(j);var l=N(j.getDueDate());l.appendTaskDOM(m);m.myParent=l;m.refresh();if($def(L.getDragManager)){var g=L.getDragManager();var h=new Date();h.setTime(j.getDueDate());var f=new jive.gui.CellDragListener(L,j,h,L.notifyStopDrag,L.notifyDragging);if($obj(m.monthViewDList)&&m.monthViewDList!=null){g.removeDragListener(m,m.monthViewDList)}m.monthViewDList=f;g.enableDrag(m);g.addDragListener(m,f)}if(!L.isCalendarVisibleHuh(j.getProjectID())){jive.ext.x.xDisplayNone(m)}else{jive.ext.x.xDisplayBlock(m)}}catch(k){alert(k)}};this.removeEvent=function(h){try{var k=L.getSettingsManager();var f=F(h,true);if(jive.ext.y.yArr(f)){for(var i=0;i<f.length;i++){if($def(L.getDragManager())){var g=L.getDragManager();g.removeDragListener(f[i],f[i].monthViewDList);g.disableDrag(f[i])}if($obj(jive.ext.x.xParent(f[i]))&&jive.ext.x.xParent(f[i])!=null){jive.ext.x.xParent(f[i]).removeChild(f[i]);f[i].myParent=null}else{if($obj(f[i].myParent)&&f[i].myParent!=null){f[i].myParent.removeChild(f[i]);f[i].myParent=null}}f[i].killYourself()}}}catch(l){alert("error removing event: "+l)}};this.removeTask=function(i){try{var h=L.getSettingsManager();var f=J(i);if($obj(f)){if($def(L.getDragManager)){var g=L.getDragManager();g.removeDragListener(f,f.monthViewDList);g.disableDrag(f)}var k=N(i.getDueDate());k.removeTaskDOM(f);f.myParent=null;f.killYourself()}}catch(j){alert("error removing task: "+i.getSubject()+"\nexception: "+j)}};this.flushCalendar=function(g){var f=K.eventDOMHolders.toArray(jive.gui.isMonthEventDOM);for(var e=0;e<f.length;e++){if(f[e].getEvent().getCalendarId()==g.getId()){K.flushEvent(f[e].getEvent())}}var h=K.taskDOMHolders.toArray(jive.gui.isMonthTaskDOM);for(var e=0;e<h.length;e++){if(h[e].getTask().getCalendarId()==g.getId()){K.flushTask(h[e].getTask())}}};this.flushEvent=function(h){try{K.removeEvent(h);K.eventDOMHolders.clear(h.getId());var f=d.get(h.getId());var g=I.get(f);g.clear(h.getId())}catch(i){alert("error flushing event")}};this.flushTask=function(h){try{K.removeTask(h);K.taskDOMHolders.clear(h.getID());var f=T.get(h.getID());var g=C.get(f);g.clear(h.getID())}catch(i){alert("flushEvent: "+i)}};this.refresh=function(){var j=L.getSettingsManager();var f=K.eventDOMHolders.toArray(jive.gui.isMonthEventDOM);try{for(var h=0;h<f.length;h++){var i=f[h].getEvent();var g=j.getOldTimezone();if(!jive.model.dateEQ(j.adjustDate(i.getStart()),j.adjustDate(i.getStart(),g))||!jive.model.dateEQ(j.adjustDate(i.getEnd()),j.adjustDate(i.getEnd(),g))){K.flushEvent(i);K.addEvent(i)}}}catch(k){alert(k)}if(K.isExpandedHuh()){K.showMonth(G.getCurrentDate())}K.refreshShading()};this.init=function(e){e.appendChild(D)};this.killYourself=function(){L=null;G=null};this.refreshWeather=function(){var g=new Date();g.setTime(G.getMinDate().getTime());while(jive.model.dateLTEQ(g,G.getMaxDate())){var e=N(g);var i=L.getSettingsManager().getWeatherImage(g);var f=e.style.backgroundColor;if(i.length>0){var h=22;if(g.getDate()==1){h=42}else{h=22}e.style.background="url("+i+") "+h+"px 2px no-repeat "+e.style.backgroundColor}else{e.style.background=""}e.style.backgroundColor=f;g.setDate(g.getDate()+1)}};this.refreshShading=function(){var m=L.getSettingsManager();var g=m.getStartWeekOn();var l=new Date();l.setTime(G.getMaxDate().getTime());var k=new Date();k.setTime(G.getMinDate().getTime());k.setHours(17);k.setDate(1);var e=k.getDay();if(g!=0&&e==0){e=7}k.setDate(k.getDate()-e+g);var h=new Date();h.setTime(k.getTime());var o=new Array();o[0]="#FFFFFF";o[1]="#EFEFEF";o[2]="#DFDFDF";o[3]="#CFCFCF";o[4]="#BFBFBF";var j=m.getNOW();var r=m.getSmartShading();var f=G.getCurrentDate().getMonth();while(h.getMonth()<=l.getMonth()&&h.getYear()==l.getYear()||h.getYear()<l.getYear()){var t=N(k);var s=jive.model.dateEQ(k,j);if(r){var p=t.childNodes.length-1;var q=0;for(var n=0;n<p&&q<=4;n++){if(jive.ext.x.xDisplay(t.childNodes[n+1])=="block"){q++}}if(q>4){q=4}else{if(q<0){q=0}}if(s){t.style.backgroundColor="#e4f6e7";t.outColor="#e4f6e7"}else{t.style.backgroundColor=o[p];t.outColor=o[p]}}else{if(t.getDate().getMonth()!=f){t.style.backgroundColor=o[2];t.outColor=o[2]}else{t.style.backgroundColor=o[0];t.outColor=o[0]}}if(s){t.style.backgroundColor="#e4f6e7";t.setAttribute("class","month_cell month_today_cell");t.className="month_cell month_today_cell";t.overColor="#ffffda"}else{t.setAttribute("class","month_cell month_day_cell");t.className="month_cell month_day_cell";t.overColor="#ffffda"}k.setDate(k.getDate()+1);if(k.getDay()==0){h.setTime(k.getTime())}}K.refreshWeather()};this.calendarVisible=function(k,g){var h=L.getSettingsManager().getShowTasks();var l=C.get(k.getId());if($obj(l)&&l!=null){l=l.toArray();for(var f=0;f<l.length;f++){if(g&&h){jive.ext.x.xDisplayBlock(l[f])}else{jive.ext.x.xDisplayNone(l[f])}}}var l=I.get(k.getId());if($obj(l)&&l!=null){l=l.toArray();for(var f=0;f<l.length;f++){for(var e=0;e<l[f].length;e++){if(g){jive.ext.x.xDisplayBlock(l[f][e])}else{jive.ext.x.xDisplayNone(l[f][e])}}}}K.refreshShading()};this.stopDrag=function(k,e,f,m){var n=false;if(K.isExpandedHuh()){if(D.childNodes.length>0){var o=D.childNodes[0];for(var h=1;h<o.childNodes.length;h++){tr=o.childNodes[h];for(var g=0;g<tr.childNodes.length;g++){if(tr.childNodes[g].childNodes.length>0){var l=tr.childNodes[g];if(jive.ext.x.xHasPoint(l,f,m)){if($def(l.dropPoint)){l.dropPoint(k,e);n=true}}}}}}}return n};var X=null;var B=0;this.dragging=function(l,e,f,n){B++;var p=B;var k=false;if(X!=null){if(jive.ext.x.xHasPoint(X,f,n)){var o=Math.floor(0.95*jive.ext.x.xWidth(X));L.showHoverOver(jive.ext.x.xPageX(X),jive.ext.x.xPageY(X),o,jive.ext.x.xHeight(X));k=true}}if(D.childNodes.length>0&&!k){var q=D.childNodes[0];for(var h=1;h<q.childNodes.length&&p==B&&!k;h++){tr=q.childNodes[h];for(var g=0;g<tr.childNodes.length&&p==B&&!k;g++){var m=tr.childNodes[g];if(jive.ext.x.xHasPoint(m,f,n)){if($def(m.dropPoint)){var o=Math.floor(0.95*jive.ext.x.xWidth(m));L.showHoverOver(jive.ext.x.xPageX(m),jive.ext.x.xPageY(m),o,jive.ext.x.xHeight(m));X=m;k=true}}}}if(p!=B){return }}if(!k){L.hideHover()}return k};this.fixHeight=function(h){try{jive.ext.x.xHeight(D,h);var h=h-20;if(D.childNodes.length>0){var k=D.childNodes[0];h+=h%(k.childNodes.length-1);for(var g=1;g<k.childNodes.length;g++){var l=k.childNodes[g];jive.ext.x.xHeight(l,Math.floor(h/(k.childNodes.length-1)));if(jive.ext.x.xIE4Up){for(var f=0;f<l.childNodes.length;f++){jive.ext.x.xDisplayNone(l.childNodes[f]);jive.ext.x.xDisplayBlock(l.childNodes[f])}}}}}catch(m){alert(m)}};this.getEventsOn=function(h){var g=new Array();var e=N(h);for(var f=1;f<e.childNodes.length;f++){if($def(e.childNodes[f].getEvent)){g.push(e.childNodes[f].getEvent())}}return g};this.getTasksOn=function(f){var g=new Array();var e=N(f);return e.getTasks()};function F(l,o){try{var f=L.getSettingsManager();var m=new Date();var j=new Date();if(l.isAllDay()){m.setTime(l.getStart().getTime());j.setTime(l.getEnd().getTime())}else{m.setTime(f.adjustDate(l.getStart()).getTime());j.setTime(f.adjustDate(l.getEnd()).getTime())}if(jive.model.dateLT(m,L.getEventCache().getMinTime())){m.setTime(L.getEventCache().getMinTime().getTime())}if(jive.model.dateGT(j,L.getEventCache().getMaxTime())){j.setTime(L.getEventCache().getMaxTime().getTime())}}catch(k){alert("top of getdomarray: "+k)}try{var n=K.eventDOMHolders.get(l.getId());if(!$obj(n)){if($def(o)&&o){return null}n=new Array();n.getEvent=function(){return l};K.eventDOMHolders.put(l.getId(),n);d.put(l.getId(),l.getCalendarId());var p=I.get(l.getCalendarId());if(!$obj(p)||p==null){p=new jive.ext.y.HashTable();I.put(l.getCalendarId(),p)}p.put(l.getId(),n)}var h=0;while(jive.model.dateLTEQ(m,j)){if(n.length<=h){var q=function(e){return function(i){var r=new jive.model.DateHelper(L);if(jive.model.dateEQ(f.adjustDate(i),e)){return r.formatTo12HourTime(f.adjustDate(i))}else{return r.formatToShortDate(f.adjustDate(i))}}}(m);var g=L.getEventDOMFactory().getEventDOM(l,G.notifyEventClicked,G.notifyEventDblClicked,q);g.showTimes(false);g.getDOM().myParent=null;g.getDOM().killYourself=g.killYourself;g.getDOM().refresh=g.refresh;g.getDOM().lighten=g.lighten;g.getDOM().darken=g.darken;g=g.getDOM();n[h]=g}else{n[h].refresh()}h++;m.setDate(m.getDate()+1)}while(n.length>h){if($obj(jive.ext.x.xParent(n[h]))&&jive.ext.x.xParent(n[h])!=null){jive.ext.x.xParent(n[h]).removeChild(n[h]);n[h].myParent=null}else{if($obj(n[h].myParent)&&n[h].myParent!=null){n[h].myParent.removeChild(n[h]);n[h].myParent=null}}n[h].killYourself();n.splice(h,1)}for(var h=0;h<n.length;h++){if(K.getItemVisibility()){n[h].style.visibility="visible"}else{n[h].style.visibility="hidden"}}return n}catch(k){alert("getting array dom in month: "+k)}}function J(h){var g=L.getSettingsManager();var f=K.taskDOMHolders.get(h.getID());if($obj(f)&&f!=null){f.refresh();return f}var i=new jive.gui.TaskDOM(L,h,G.notifyTaskClicked,G.notifyTaskDblClicked);var f=i.getDOM();f.refresh=i.refresh;f.lighten=i.lighten;f.darken=i.darken;f.getTask=i.getTask;f.killYourself=i.killYourself;f.myParent=null;K.taskDOMHolders.put(h.getID(),f);T.put(h.getID(),h.getProjectID());var e=C.get(h.getProjectID());if(!$obj(e)||e==null){e=new jive.ext.y.HashTable();C.put(h.getProjectID(),e)}e.put(h.getID(),f);if(K.getItemVisibility()){f.style.visibility="visible"}else{f.style.visibility="hidden"}return f}function N(h){var k=new Date();k.setTime(h.getTime());var j=k.getDate();var g=K.dayCells.get(j);if($arr(g)){for(var f=0;f<g.length;f++){if(jive.model.monthYearEQ(g[f].getDate(),k)){return g[f].getDOM()}}}else{g=new Array();K.dayCells.put(j,g)}var e=new jive.gui.MonthDayCell(L,G,K,k);g.push(e);return e.getDOM()}var S=null;var W=null;var M=0;this.showMonth=function(r){var AA=L.getSettingsManager();var o=AA.getStartWeekOn();M++;R=true;var AB=new Date();AB.setTime(r.getTime());AB.setHours(17);AB.setDate(1);var n=AB.getDay();if(o!=0&&n==0){n=7}AB.setDate(AB.getDate()-n+o);var l=new Date();l.setTime(r.getTime());var AC=L.getLanguageManager().getActiveLanguage();var h=new Array();if(c||S==null||!jive.model.dateEQ(S,AB)){c=false;var x=new Date();x.setTime(AB.getTime());G.setMinDate(x);var f;var m;var e;var y=document.createElement("DIV");y.setAttribute("class","month_table");y.className="month_table";while(D.childNodes.length>0){D.removeChild(D.childNodes[0])}e=document.createElement("DIV");y.appendChild(e);jive.ext.x.xHeight(e,20);for(var v=o;v-o<7;v++){m=document.createElement("DIV");e.appendChild(m);m.setAttribute("class","month_table_th");m.className="month_table_th";if(jive.ext.x.xWidth(D)>640){m.appendChild(document.createTextNode(AC.longDay(v%7)))}else{m.appendChild(document.createTextNode(AC.shortDay(v%7)))}m.style.left=((v-o)*14.2857)+"%"}var p=new Array();var g=0;while(l.getMonth()<=r.getMonth()&&l.getYear()==r.getYear()||l.getYear()<r.getYear()){if(AB.getDay()==o){e=document.createElement("DIV");e.setAttribute("class","month_table_row");e.className="month_table_row";p.push(e);g=0}m=N(AB);m.updateText();m.over=false;e.appendChild(m);m.style.left=(g*14.2857)+"%";g++;var z=new Date();z.setTime(AB.getTime());AB=z;AB.setDate(AB.getDate()+1);if(AB.getDay()==o){l.setTime(AB.getTime())}if(jive.ext.x.xIE4Up){var s=K.getTasksOn(AB);h=h.concat(s)}}for(var v=0;v<p.length;v++){y.appendChild(p[v])}G.setMaxDate(AB);var k=new Date();k.setTime(r.getTime());k.setHours(17);G.setCurrentDate(k);var AC=L.getLanguageManager().getActiveLanguage();D.appendChild(y);for(var v=1;v<y.childNodes.length;v++){var e=y.childNodes[v];for(var u=0;u<e.childNodes.length;u++){var f=e.childNodes[u];if(f.childNodes.length>0){jive.ext.x.xZIndex(f.childNodes[0],10+v)}}}S=new Date();W=new Date();S.setTime(G.getMinDate().getTime());W.setTime(G.getMaxDate().getTime())}else{if(jive.ext.x.xIE4Up){while(l.getMonth()<=r.getMonth()&&l.getYear()==r.getYear()||l.getYear()<r.getYear()){var z=new Date();z.setTime(AB.getTime());AB=z;AB.setDate(AB.getDate()+1);if(AB.getDay()==o){l.setTime(AB.getTime())}var s=K.getTasksOn(AB);h=h.concat(s)}}G.setMinDate(S);G.setMaxDate(W)}if(jive.ext.x.xIE4Up){for(var v=0;v<h.length;v++){var w=J(h[v]);w.refresh()}}K.refreshShading();var q=G.getFilterText();K.filter(q);G.fixHeight()};function V(){if(jive.model.isEvent(G.getSelectedItem())){var f=F(G.getSelectedItem());for(var e=0;e<f.length;e++){U(f[e],G.getFilterText())}}if(jive.model.isTask(G.getSelectedItem())){var f=J(G.getSelectedItem());U(f,G.getFilterText())}}function Z(){var f=L.getSettingsManager().getStartWeekOn();var j=G.getCurrentDate();var k=new Date();k.setTime(j.getTime());k.setHours(17);k.setDate(1);var g=k.getDay();if(f!=0&&g==0){g=7}k.setDate(k.getDate()-g+f);var e=new Date();e.setTime(j.getTime());G.setMinDate(k);while(e.getMonth()<=j.getMonth()&&e.getYear()==j.getYear()||e.getYear()<j.getYear()){var l=new Date();l.setTime(k.getTime());k=l;k.setDate(k.getDate()+1);if(k.getDay()==f){e.setTime(k.getTime())}}var i=new Date();i.setTime(k.getTime());i.setDate(i.getDate()+1);G.setMaxDate(i);var h=new Date();h.setTime(j.getTime());h.setHours(17);G.setCurrentDate(h);S=new Date();W=new Date();S.setTime(G.getMinDate().getTime());W.setTime(G.getMaxDate().getTime());c=true}function Q(){var h=L.getSettingsManager().getShowTasks();if(h){var k=L.getCalendarCache().getCalendars();for(var g=0;g<k.length;g++){if(L.isCalendarVisibleHuh(k[g].getId())){var e=C.get(k[g].getId());if($obj(e)){var l=e.toArray();for(var f=0;f<l.length;f++){if($def(l[f].getTask)){jive.ext.x.xDisplayBlock(l[f])}}}}}}else{var l=K.taskDOMHolders.toArray(jive.gui.isMonthTaskDOM);for(var g=0;g<l.length;g++){if($def(l[g].getTask)){jive.ext.x.xDisplayNone(l[g])}}}}var Y=new Object();Y.eventClicked=function(e){V();var g=F(e);if($obj(g)){for(var f=0;f<g.length;f++){g[f].setAttribute("class","month_day_cell_item_highlight");g[f].className="month_day_cell_item_highlight"}}};Y.eventDblClicked=function(e){};Y.taskClicked=function(e){V();var f=J(e);if($obj(f)){f.setAttribute("class","month_day_cell_item_highlight");f.className="month_day_cell_item_highlight"}};Y.taskDblClicked=function(e){};Y.unselectAll=function(){V()};G.addEventListener(Y);var Y=new jive.model.TaskCacheListener();Y.loadTask=function(e){if(e.hasDueDate()){K.addTask(e)}};Y.doneLoadingTasks=function(){K.refreshShading()};Y.taskChanged=function(e){K.refreshShading()};Y.savingTask=function(e){var f=J(e);f.setDisabled(true)};Y.doneSavingTask=function(g){M++;K.refreshShading();if(g.hasDueDate()){var h=J(g);h.refresh();h.setDisabled(false)}var f=T.get(g.getID());if(f!=g.getProjectID()){var e=C.get(f);e.clear(g.getID());var e=C.get(g.getProjectID());if(!$obj(e)||e==null){e=new jive.ext.y.HashTable();C.put(g.getProjectID(),e)}e.put(g.getID(),h)}};Y.savingTaskFailed=function(e){K.refreshShading();var f=J(e);f.setDisabled(false);f.setChecked(e.getStatus()=="Complete")};Y.deletingTask=function(e){K.refreshShading()};Y.doneDeletingTask=function(e){K.refreshShading()};Y.deletingTaskFailed=function(e){K.refreshShading()};Y.deletingTaskSeries=function(e){K.refreshShading()};Y.doneDeletingTaskSeries=function(e){K.refreshShading()};Y.deletingTaskSeriesFailed=function(e){K.refreshShading()};L.getTaskCache().addListener(Y);Z();jive.ext.x.xDisplayNone(D)};

jive.gui.isMonthEventDOM=function(A){return $def(A)&&$def(A.getEvent)};jive.gui.isMonthTaskDOM=function(A){return $def(A)&&$def(A.getTask)};jive.gui.MiniMonthView=function(O,I){var N=this;var U=false;var F=null;this.hasAddView=function(){if(F==null){F=$obj(I.getView("add_event"))}return F};this.dayCells=new jive.ext.y.HashTable();this.eventDOMHolders=new jive.ext.y.HashTable();this.taskDOMHolders=new jive.ext.y.HashTable();this.cpDOMHolders=new jive.ext.y.HashTable();var g=false;var C=new jive.ext.y.HashTable();var K=new jive.ext.y.HashTable();var f=new jive.ext.y.HashTable();var X=new jive.ext.y.HashTable();var D=new jive.ext.y.HashTable();var h=new jive.ext.y.HashTable();var E=document.createElement("DIV");E.setAttribute("class","month_view_holder");E.className="month_view_holder";var S=true;this.setItemVisibility=function(i){S=i};this.getItemVisibility=function(){return S};function M(k){var j=N.taskDOMHolders.get(k.getID());if($obj(j)&&j!=null){j.refresh();return j}var l=new jive.gui.TaskDOM(O,k,I.notifyTaskClicked,I.notifyTaskDblClicked);j=l.getDOM();j.refresh=l.refresh;j.lighten=l.lighten;j.darken=l.darken;j.getTask=l.getTask;j.killYourself=l.killYourself;j.myParent=null;N.taskDOMHolders.put(k.getID(),j);X.put(k.getID(),k.getProjectID());var i=C.get(k.getProjectID());if(!$obj(i)||i==null){i=new jive.ext.y.HashTable();C.put(k.getProjectID(),i)}i.put(k.getID(),j);if(N.getItemVisibility()){j.style.visibility="visible"}else{j.style.visibility="hidden"}return j}function L(l){var k=N.cpDOMHolders.get(l.getID());if($obj(k)&&k!=null){k.refresh();return k}var j=new jive.gui.CPDOM(O,l,I.notifyCheckPointClicked,I.notifyCheckPointDblClicked);k=j.getDOM();k.refresh=j.refresh;k.lighten=j.lighten;k.darken=j.darken;k.getCheckPoint=j.getCheckPoint;k.killYourself=j.killYourself;k.myParent=null;N.cpDOMHolders.put(l.getID(),k);D.put(l.getID(),l.getProject().getID());var i=f.get(l.getProject().getID());if(!$obj(i)||i==null){i=new jive.ext.y.HashTable();f.put(l.getProject().getID(),i)}i.put(l.getID(),k);if(N.getItemVisibility()){k.style.visibility="visible"}else{k.style.visibility="hidden"}return k}function R(m){var o=new Date();o.setTime(m.getTime());var n=o.getDate();var l=N.dayCells.get(n);if($arr(l)){for(var k=0;k<l.length;k++){if(jive.model.monthYearEQ(l[k].getDate(),o)){return l[k].getDOM()}}}else{l=new Array();N.dayCells.put(n,l)}var j=new jive.gui.MonthDayGroupedCell(O,I,N,o);l.push(j);return j.getDOM()}this.hasPrintView=function(){return true};this.isExpandedHuh=function(){return U};this.expand=function(){U=true;I.showArrows();jive.ext.x.xDisplayBlock(E)};this.collapse=function(){U=false;jive.ext.x.xDisplayNone(E)};function e(){var i=new Date();i.setTime(I.getCurrentDate().getTime());jive.model.dateMinusMonth(i);I.setCurrentDate(i);I.notifyMonthClicked(i)}function Q(){var i=new Date();i.setTime(I.getCurrentDate().getTime());i.setMonth(i.getMonth()+1);while(i.getMonth()>I.getCurrentDate().getMonth()+1){jive.model.dateMinusDay(i)}I.setCurrentDate(i);I.notifyMonthClicked(i)}this.getPrevViewFunc=function(){return e};this.getNextViewFunc=function(){return Q};this.getMinDate=function(){return I.getMinDate()};this.getMaxDate=function(){return I.getMaxDate()};this.getHeaderText=function(){var j=O.getLanguageManager().getActiveLanguage();var i=new Date();i.setTime(I.getCurrentDate().getTime());return j.longMonth(i.getMonth())};this.go=function(i){I.setCurrentDate(i);N.showMonth(I.getCurrentDate())};this.getName=function(){return"month"};this.getHash=function(){return"month"};this.updateText=function(){if(E.childNodes.length>0){var j=O.getSettingsManager().getStartWeekOn();var l=O.getLanguageManager().getActiveLanguage();for(var k=j;k-j<7;k++){var m=E.childNodes[0].childNodes[0].childNodes[(k-j)%7];if(m.childNodes.length>0){m.removeChild(m.childNodes[0])}m.appendChild(document.createTextNode(l.longDay(k%7)));m.setAttribute("height","2");m.height="2"}}};this.getDOM=function(){return E};var d;function W(l,o){var n;var m;var i;if($def(l.getEvent)){var k=l.getEvent();n=k.getSubject().toLowerCase();m=k.getDescription().toLowerCase();i=k.getCalendarId()}else{if($def(l.getTask)){var j=l.getTask();n=j.getSubject().toLowerCase();m=j.getDescription().toLowerCase();i=j.getProjectID()}}if(O.isCalendarVisibleHuh(i)){if(o.length==0||o.length>0&&(n.indexOf(o)>=0||m.indexOf(o)>=0)){l.darken()}else{l.lighten()}}}var A="";var J=(new Date()).getMonth();this.filter=function(p){if(A!=p||J!=I.getCurrentDate().getMonth()){A=p;J=I.getCurrentDate().getMonth();if(N.isExpandedHuh()){d=""+(new Date()).getTime()+""+Math.random();var o=d;var n=new Date();var m=I.getMinDate();var k=I.getMaxDate();n.setTime(m.getTime());p=p.toLowerCase();while(o==d&&(n.getTime()<k.getTime()+24*60*60*1000)){var j=R(n);for(var l=1;l<j.childNodes.length;l++){W(j.childNodes[l],p)}n.setTime(n.getTime()+24*60*60*1000)}}}};this.addEvent=function(q){try{var k=O.getSettingsManager();var s=H(q);var r=new Date();if(q.isAllDay()){r.setTime(q.getStart().getTime())}else{r.setTime(k.adjustDate(q.getStart()).getTime())}var l=0;var o=new Date();if(q.isAllDay()){o.setTime(q.getEnd().getTime())}else{o.setTime(k.adjustDate(q.getEnd()).getTime())}if(jive.model.dateLT(r,O.getEventCache().getMinTime())){r.setTime(O.getEventCache().getMinTime().getTime())}if(jive.model.dateGT(o,O.getEventCache().getMaxTime())){o.setTime(O.getEventCache().getMaxTime().getTime())}while(jive.model.dateLTEQ(r,o)){var p=R(r);if($def(O.getDragManager)){var m=O.getDragManager();var j=new Date();j.setTime(r.getTime());var u=new jive.gui.CellDragListener(O,q,j,O.notifyStopDrag,O.notifyDragging);if($obj(s[l].monthViewDList)&&s[l].monthViewDList!=null){m.removeDragListener(s[l],s[l].monthViewDList)}s[l].monthViewDList=u;m.enableDrag(s[l]);m.addDragListener(s[l],u)}if(!O.isCalendarVisibleHuh(q.getCalendarId())){jive.ext.x.xDisplayNone(s[l])}else{jive.ext.x.xDisplayBlock(s[l])}var v=I.getFilterText();W(s[l],v);p.appendEventDOM(s[l]);s[l].myParent=p;l++;r.setDate(r.getDate()+1)}}catch(n){alert("error adding event to month view: "+n)}};this.addCheckPoint=function(m){try{var o=L(m);var n=R(m.getDueDate());n.appendCheckPointDOM(o);o.myParent=n;o.refresh();if($def(O.getDragManager)){var j=O.getDragManager();var k=new Date();k.setTime(ttask.getDueDate());var i=new jive.gui.CellDragListener(O,ttask,k,O.notifyStopDrag,O.notifyDragging);if($obj(o.monthViewDList)&&o.monthViewDList!=null){j.removeDragListener(o,o.monthViewDList)}o.monthViewDList=i;j.enableDrag(o);j.addDragListener(o,i)}if(!O.isCalendarVisibleHuh(m.getProject().getID())){jive.ext.x.xDisplayNone(o)}else{jive.ext.x.xDisplayBlock(o)}}catch(l){alert(l)}};this.addTask=function(l){try{var o=M(l);var n=R(l.getDueDate());n.appendTaskDOM(o);o.myParent=n;o.refresh();if($def(O.getDragManager)){var j=O.getDragManager();var k=new Date();k.setTime(l.getDueDate());var i=new jive.gui.CellDragListener(O,l,k,O.notifyStopDrag,O.notifyDragging);if($obj(o.monthViewDList)&&o.monthViewDList!=null){j.removeDragListener(o,o.monthViewDList)}o.monthViewDList=i;j.enableDrag(o);j.addDragListener(o,i)}if(!O.isCalendarVisibleHuh(l.getProjectID())){jive.ext.x.xDisplayNone(o)}else{jive.ext.x.xDisplayBlock(o)}}catch(m){alert(m)}};this.removeEvent=function(l){try{var n=O.getSettingsManager();var i=H(l,true);if(jive.ext.y.yArr(i)){for(var m=0;m<i.length;m++){if($def(O.getDragManager())){var k=O.getDragManager();k.removeDragListener(i[m],i[m].monthViewDList);k.disableDrag(i[m])}if($obj(jive.ext.x.xParent(i[m]))&&jive.ext.x.xParent(i[m])!=null){jive.ext.x.xParent(i[m]).removeChild(i[m]);i[m].myParent=null}else{if($obj(i[m].myParent)&&i[m].myParent!=null){i[m].myParent.removeChild(i[m]);i[m].myParent=null}}i[m].killYourself()}}}catch(o){alert("error removing event: "+o)}};this.removeTask=function(l){try{var k=O.getSettingsManager();var i=M(l);if($obj(i)){if($def(O.getDragManager)){var j=O.getDragManager();j.removeDragListener(i,i.monthViewDList);j.disableDrag(i)}if($obj(jive.ext.x.xParent(i))&&jive.ext.x.xParent(i)!=null){jive.ext.x.xParent(i).removeChild(i);i.myParent=null}else{if($obj(i.myParent)&&i.myParent!=null){i.myParent.removeChild(i);i.myParent=null}}i.killYourself()}}catch(m){alert("error removing task: "+l.getSubject()+"\nexception: "+m)}};this.flushCalendar=function(l){var k=N.eventDOMHolders.toArray(jive.gui.isMonthEventDOM);for(var j=0;j<k.length;j++){if(k[j].getEvent().getCalendarId()==l.getId()){N.flushEvent(k[j].getEvent())}}var m=N.taskDOMHolders.toArray(jive.gui.isMonthTaskDOM);for(var j=0;j<m.length;j++){if(m[j].getTask().getCalendarId()==l.getId()){N.flushTask(m[j].getTask())}}};this.flushEvent=function(k){try{N.removeEvent(k);N.eventDOMHolders.clear(k.getId());var i=h.get(k.getId());var j=K.get(i);j.clear(k.getId())}catch(l){alert("error flushing event")}};this.flushTask=function(k){try{N.removeTask(k);N.taskDOMHolders.clear(k.getID());var i=X.get(k.getID());var j=C.get(i);j.clear(k.getID())}catch(l){alert("flushEvent: "+l)}};this.refresh=function(){var m=O.getSettingsManager();var i=N.eventDOMHolders.toArray(jive.gui.isMonthEventDOM);try{for(var k=0;k<i.length;k++){var l=i[k].getEvent();var j=m.getOldTimezone();if(!jive.model.dateEQ(m.adjustDate(l.getStart()),m.adjustDate(l.getStart(),j))||!jive.model.dateEQ(m.adjustDate(l.getEnd()),m.adjustDate(l.getEnd(),j))){N.flushEvent(l);N.addEvent(l)}}}catch(n){alert(n)}if(N.isExpandedHuh()){N.showMonth(I.getCurrentDate())}N.refreshShading()};this.init=function(i){i.appendChild(E)};this.killYourself=function(){O=null;I=null};this.refreshWeather=function(){var k=new Date();k.setTime(I.getMinDate().getTime());while(jive.model.dateLTEQ(k,I.getMaxDate())){var i=R(k);var m=O.getSettingsManager().getWeatherImage(k);var j=i.style.backgroundColor;if(m.length>0){var l=22;if(k.getDate()==1){l=42}else{l=22}i.style.background="url("+m+") "+l+"px 2px no-repeat "+i.style.backgroundColor}else{i.style.background=""}i.style.backgroundColor=j;k.setDate(k.getDate()+1)}};this.refreshShading=function(){var p=O.getSettingsManager();var k=p.getStartWeekOn();var o=new Date();o.setTime(I.getMaxDate().getTime());var n=new Date();n.setTime(I.getMinDate().getTime());n.setHours(17);n.setDate(1);var i=n.getDay();if(k!=0&&i==0){i=7}n.setDate(n.getDate()-i+k);var l=new Date();l.setTime(n.getTime());var q=new Array();q[0]="#FFFFFF";q[1]="#EFEFEF";q[2]="#DFDFDF";q[3]="#CFCFCF";q[4]="#BFBFBF";var m=p.getNOW();var s=p.getSmartShading();var j=I.getCurrentDate().getMonth();while(l.getMonth()<=o.getMonth()&&l.getYear()==o.getYear()||l.getYear()<o.getYear()){var u=R(n);var t=jive.model.dateEQ(n,m);if(s){var r=u.countVisibleItems();if(r>4){r=4}else{if(r<0){r=0}}if(t){u.style.backgroundColor="#e4f6e7";u.outColor="#e4f6e7"}else{u.style.backgroundColor=q[r];u.outColor=q[r]}}else{if(u.getDate().getMonth()!=j){u.style.backgroundColor=q[2];u.outColor=q[2]}else{u.style.backgroundColor=q[0];u.outColor=q[0]}}if(t){u.style.backgroundColor="#e4f6e7";u.setAttribute("class","month_cell month_today_cell");u.className="month_cell month_today_cell";u.overColor="#ffffda"}else{u.setAttribute("class","month_cell month_day_cell");u.className="month_cell month_day_cell";u.overColor="#ffffda"}n.setDate(n.getDate()+1);if(n.getDay()==0){l.setTime(n.getTime())}}N.refreshWeather()};this.calendarVisible=function(o,m){var n=O.getSettingsManager().getShowTasks();var p=C.get(o.getId());if($obj(p)&&p!=null){p=p.toArray();for(var l=0;l<p.length;l++){if(m&&n){jive.ext.x.xDisplayBlock(p[l])}else{jive.ext.x.xDisplayNone(p[l])}}}var p=K.get(o.getId());if($obj(p)&&p!=null){p=p.toArray();for(var l=0;l<p.length;l++){for(var k=0;k<p[l].length;k++){if(m){jive.ext.x.xDisplayBlock(p[l][k])}else{jive.ext.x.xDisplayNone(p[l][k])}}}}N.refreshShading()};this.stopDrag=function(o,k,l,q){var r=false;if(N.isExpandedHuh()){if(E.childNodes.length>0){var s=E.childNodes[0];for(var n=1;n<s.childNodes.length;n++){tr=s.childNodes[n];for(var m=0;m<tr.childNodes.length;m++){if(tr.childNodes[m].childNodes.length>0){var p=tr.childNodes[m];if(jive.ext.x.xHasPoint(p,l,q)){if($def(p.dropPoint)){p.dropPoint(o,k);r=true}}}}}}}return r};var a=null;var B=0;this.dragging=function(p,k,l,r){B++;var t=B;var o=false;if(a!=null){if(jive.ext.x.xHasPoint(a,l,r)){var s=Math.floor(0.95*jive.ext.x.xWidth(a));O.showHoverOver(jive.ext.x.xPageX(a),jive.ext.x.xPageY(a),s,jive.ext.x.xHeight(a));o=true}}if(E.childNodes.length>0&&!o){var u=E.childNodes[0];for(var n=1;n<u.childNodes.length&&t==B&&!o;n++){tr=u.childNodes[n];for(var m=0;m<tr.childNodes.length&&t==B&&!o;m++){var q=tr.childNodes[m];if(jive.ext.x.xHasPoint(q,l,r)){if($def(q.dropPoint)){var s=Math.floor(0.95*jive.ext.x.xWidth(q));O.showHoverOver(jive.ext.x.xPageX(q),jive.ext.x.xPageY(q),s,jive.ext.x.xHeight(q));a=q;o=true}}}}if(t!=B){return }}if(!o){O.hideHover()}return o};this.fixHeight=function(m){try{jive.ext.x.xHeight(E,m);var m=m-20;if(E.childNodes.length>0){var n=E.childNodes[0];m+=m%(n.childNodes.length-1);for(var l=1;l<n.childNodes.length;l++){var o=n.childNodes[l];jive.ext.x.xHeight(o,Math.floor(m/(n.childNodes.length-1)));if(jive.ext.x.xIE4Up){for(var k=0;k<o.childNodes.length;k++){jive.ext.x.xDisplayNone(o.childNodes[k]);jive.ext.x.xDisplayBlock(o.childNodes[k])}}}}}catch(p){alert(p)}};this.getEventsOn=function(m){var l=new Array();var j=R(m);for(var k=1;k<j.childNodes.length;k++){if($def(j.childNodes[k].getEvent)){l.push(j.childNodes[k].getEvent())}}return l};this.getTasksOn=function(l){var m=new Array();var j=R(l);for(var k=1;k<j.childNodes.length;k++){if($def(j.childNodes[k].getTask)){m.push(j.childNodes[k].getTask())}}return m};function H(o,r){try{var j=O.getSettingsManager();var p=new Date();var m=new Date();if(o.isAllDay()){p.setTime(o.getStart().getTime());m.setTime(o.getEnd().getTime())}else{p.setTime(j.adjustDate(o.getStart()).getTime());m.setTime(j.adjustDate(o.getEnd()).getTime())}if(jive.model.dateLT(p,O.getEventCache().getMinTime())){p.setTime(O.getEventCache().getMinTime().getTime())}if(jive.model.dateGT(m,O.getEventCache().getMaxTime())){m.setTime(O.getEventCache().getMaxTime().getTime())}}catch(n){alert("top of getdomarray: "+n)}try{var q=N.eventDOMHolders.get(o.getId());if(!$obj(q)){if($def(r)&&r){return null}q=new Array();q.getEvent=function(){return o};N.eventDOMHolders.put(o.getId(),q);h.put(o.getId(),o.getCalendarId());var s=K.get(o.getCalendarId());if(!$obj(s)||s==null){s=new jive.ext.y.HashTable();K.put(o.getCalendarId(),s)}s.put(o.getId(),q)}var l=0;while(jive.model.dateLTEQ(p,m)){if(q.length<=l){var t=function(i){return function(u){var v=new jive.model.DateHelper(O);if(jive.model.dateEQ(j.adjustDate(u),i)){return v.formatTo12HourTime(j.adjustDate(u))}else{return v.formatToShortDate(j.adjustDate(u))}}}(p);var k=O.getEventDOMFactory().getEventDOM(o,I.notifyEventClicked,I.notifyEventDblClicked,t);k.showTimes(false);k.getDOM().myParent=null;k.getDOM().killYourself=k.killYourself;k.getDOM().refresh=k.refresh;k.getDOM().lighten=k.lighten;k.getDOM().darken=k.darken;k=k.getDOM();q[l]=k}else{q[l].refresh()}l++;p.setDate(p.getDate()+1)}while(q.length>l){if($obj(jive.ext.x.xParent(q[l]))&&jive.ext.x.xParent(q[l])!=null){jive.ext.x.xParent(q[l]).removeChild(q[l]);q[l].myParent=null}else{if($obj(q[l].myParent)&&q[l].myParent!=null){q[l].myParent.removeChild(q[l]);q[l].myParent=null}}q[l].killYourself();q.splice(l,1)}for(var l=0;l<q.length;l++){if(N.getItemVisibility()){q[l].style.visibility="visible"}else{q[l].style.visibility="hidden"}}return q}catch(n){alert("getting array dom in month: "+n)}}var G=2;this.setNumWeeks=function(i){G=i};var V=null;var Z=null;var P=0;this.showMonth=function(v){var AD=O.getSettingsManager();var r=AD.getStartWeekOn();P++;U=true;var AE=new Date();AE.setTime(v.getTime());AE.setHours(17);r=AE.getDay();var p=new Date();p.setTime(v.getTime());var AF=O.getLanguageManager().getActiveLanguage();var n=new Array();if(g||V==null||!jive.model.dateEQ(V,AE)){g=false;var AA=new Date();AA.setTime(AE.getTime());I.setMinDate(AA);var l;var q;var k;var AB=document.createElement("DIV");AB.setAttribute("class","month_table");AB.className="month_table";while(E.childNodes.length>0){E.removeChild(E.childNodes[0])}k=document.createElement("DIV");AB.appendChild(k);jive.ext.x.xHeight(k,20);for(var y=r;y-r<7;y++){q=document.createElement("DIV");k.appendChild(q);q.setAttribute("class","month_table_th");q.className="month_table_th";if(jive.ext.x.xWidth(E)>640){q.appendChild(document.createTextNode(AF.longDay(y%7)))}else{q.appendChild(document.createTextNode(AF.shortDay(y%7)))}q.style.left=((y-r)*14.2857)+"%"}var s=new Array();var m=0;for(var y=0;y<G*7;y++){if(AE.getDay()==r){k=document.createElement("DIV");k.setAttribute("class","month_table_row");k.className="month_table_row";s.push(k);m=0}q=R(AE);q.updateText();q.over=false;k.appendChild(q);q.style.left=(m*14.2857)+"%";m++;var AC=new Date();AC.setTime(AE.getTime());AE=AC;AE.setDate(AE.getDate()+1);if(AE.getDay()==r){p.setTime(AE.getTime())}if(jive.ext.x.xIE4Up){var w=N.getTasksOn(AE);n=n.concat(w)}}for(var y=0;y<s.length;y++){AB.appendChild(s[y])}I.setMaxDate(AE);var o=new Date();o.setTime(v.getTime());o.setHours(17);I.setCurrentDate(o);var AF=O.getLanguageManager().getActiveLanguage();E.appendChild(AB);for(var y=1;y<AB.childNodes.length;y++){var k=AB.childNodes[y];for(var x=0;x<k.childNodes.length;x++){var l=k.childNodes[x];if(l.childNodes.length>0){jive.ext.x.xZIndex(l.childNodes[0],10+y)}}}V=new Date();Z=new Date();V.setTime(I.getMinDate().getTime());Z.setTime(I.getMaxDate().getTime())}else{if(jive.ext.x.xIE4Up){while(p.getMonth()<=v.getMonth()&&p.getYear()==v.getYear()||p.getYear()<v.getYear()){var AC=new Date();AC.setTime(AE.getTime());AE=AC;AE.setDate(AE.getDate()+1);if(AE.getDay()==r){p.setTime(AE.getTime())}var w=N.getTasksOn(AE);n=n.concat(w)}}I.setMinDate(V);I.setMaxDate(Z)}if(jive.ext.x.xIE4Up){for(var y=0;y<n.length;y++){var z=M(n[y]);z.refresh()}}N.refreshShading();var u=I.getFilterText();N.filter(u);I.fixHeight()};function Y(){if(jive.model.isEvent(I.getSelectedItem())){var k=H(I.getSelectedItem());for(var j=0;j<k.length;j++){W(k[j],I.getFilterText())}}if(jive.model.isTask(I.getSelectedItem())){var k=M(I.getSelectedItem());W(k,I.getFilterText())}}function c(){var j=O.getSettingsManager().getStartWeekOn();var n=I.getCurrentDate();var o=new Date();o.setTime(n.getTime());o.setHours(17);o.setDate(1);var k=o.getDay();if(j!=0&&k==0){k=7}o.setDate(o.getDate()-k+j);var i=new Date();i.setTime(n.getTime());I.setMinDate(o);while(i.getMonth()<=n.getMonth()&&i.getYear()==n.getYear()||i.getYear()<n.getYear()){var p=new Date();p.setTime(o.getTime());o=p;o.setDate(o.getDate()+1);if(o.getDay()==j){i.setTime(o.getTime())}}var m=new Date();m.setTime(o.getTime());m.setDate(m.getDate()+1);I.setMaxDate(m);var l=new Date();l.setTime(n.getTime());l.setHours(17);I.setCurrentDate(l);V=new Date();Z=new Date();V.setTime(I.getMinDate().getTime());Z.setTime(I.getMaxDate().getTime());g=true}function T(){var n=O.getSettingsManager().getShowTasks();if(n){var o=O.getCalendarCache().getCalendars();for(var m=0;m<o.length;m++){if(O.isCalendarVisibleHuh(o[m].getId())){var k=C.get(o[m].getId());if($obj(k)){var p=k.toArray();for(var l=0;l<p.length;l++){if($def(p[l].getTask)){jive.ext.x.xDisplayBlock(p[l])}}}}}}else{var p=N.taskDOMHolders.toArray(jive.gui.isMonthTaskDOM);for(var m=0;m<p.length;m++){if($def(p[m].getTask)){jive.ext.x.xDisplayNone(p[m])}}}}var b=new Object();b.eventClicked=function(j){Y();var l=H(j);if($obj(l)){for(var k=0;k<l.length;k++){l[k].setAttribute("class","month_day_cell_item_highlight");l[k].className="month_day_cell_item_highlight"}}};b.eventDblClicked=function(i){};b.taskClicked=function(i){Y();var j=M(i);if($obj(j)){j.setAttribute("class","month_day_cell_item_highlight");j.className="month_day_cell_item_highlight"}};b.taskDblClicked=function(i){};b.unselectAll=function(){Y()};I.addEventListener(b);var b=new jive.model.ProjectCacheListener();b.loadProject=function(k){var l=k.getCheckPoints();for(var j=0;j<l.length;j++){N.addCheckPoint(l[j])}};O.getProjectCache().addListener(b);var b=new jive.model.TaskCacheListener();b.loadTask=function(i){if(i.hasDueDate()){N.addTask(i)}};b.doneLoadingTasks=function(){N.refreshShading()};b.taskChanged=function(i){N.refreshShading()};b.savingTask=function(i){var j=M(i);j.setDisabled(true)};b.doneSavingTask=function(k){P++;N.refreshShading();if(k.hasDueDate()){var l=M(k);l.refresh();l.setDisabled(false)}var j=X.get(k.getID());if(j!=k.getProjectID()){var i=C.get(j);i.clear(k.getID());var i=C.get(k.getProjectID());if(!$obj(i)||i==null){i=new jive.ext.y.HashTable();C.put(k.getProjectID(),i)}i.put(k.getID(),l)}};b.savingTaskFailed=function(i){N.refreshShading();var j=M(i);j.setDisabled(false);j.setChecked(i.getStatus()=="Complete")};b.deletingTask=function(i){N.refreshShading()};b.doneDeletingTask=function(i){N.refreshShading()};b.deletingTaskFailed=function(i){N.refreshShading()};b.deletingTaskSeries=function(i){N.refreshShading()};b.doneDeletingTaskSeries=function(i){N.refreshShading()};b.deletingTaskSeriesFailed=function(i){N.refreshShading()};O.getTaskCache().addListener(b);c();jive.ext.x.xDisplayNone(E)};

jive.gui.MonthDayCell=function(E,C,F,D){var A=new jive.gui.MonthDayGroupedCell(E,C,F,D);var B=A.getDOM();this.getTasks=B.getTasks;B.appendTaskDOM=function(G){var I=G.getTask().getSubject().toLowerCase();for(var H=0;H<B.childNodes.length;H++){if($def(B.childNodes[H].getEvent)){B.insertBefore(G,B.childNodes[H]);break}else{if($def(B.childNodes[H].getTask)){if(B.childNodes[H].getTask().getSubject().toLowerCase()>I){B.insertBefore(G,B.childNodes[H]);break}}}}if(H==B.childNodes.length){B.appendChild(G)}};this.appendTaskDOM=B.appendTaskDOM;B.removeTaskDOM=function(G){B.removeChild(G)};this.removeTaskDOM=B.removeTaskDOM;B.getTasks=function(){var G=B;var I=new Array();for(var H=1;H<G.childNodes.length;H++){if($def(G.childNodes[H].getTask)){I.push(G.childNodes[H].getTask())}}return I};this.getDOM=function(){return B}};

jive.gui.MonthDayGroupedCell=function(H,A,G,D){var J=this;var E;var B=H.getLanguageManager().getActiveLanguage();var O=document.createElement("DIV");var N=D.getDate();if(D.getDate()==1){N=B.shortMonth(D.getMonth())+" "+N}var K=new jive.ext.y.HashTable();var C=new jive.ext.y.HashTable();var F=document.createElement("SPAN");F.getDate=function(R){return function(){return R}}(D);F.setAttribute("class","month_day_cell_number");F.className="month_day_cell_number";var Q=document.createElement("SPAN");Q.id="add_link";Q.setAttribute("class","month_day_cell_number_link");Q.className="month_day_cell_number_link";Q.appendChild(document.createTextNode("[ + ]"));jive.ext.x.xDisplayNone(Q);F.appendChild(Q);F.appendChild(document.createTextNode(N));O.appendChild(F);var I=0;var P=document.createElement("DIV");P.href="javascript:;";P.className="jive-link-checkpoint jiveTT-hover-tasks";P.setAttribute("class","jive-link-checkpoint jiveTT-hover-tasks");O.appendChild(P);jive.ext.x.xDisplayNone(P);var M=0;var L=document.createElement("DIV");L.href="javascript:;";L.className="jive-link-task jiveTT-hover-tasks";L.setAttribute("class","jive-link-task jiveTT-hover-tasks");O.appendChild(L);jive.ext.x.xDisplayNone(L);jive.ext.x.xAddEventListener(L,"mouseover",function(R){return function(Z){var W=E.getDOM();while(W.childNodes.length>0){W.removeChild(W.childNodes[0])}var d=document.createElement("strong");var h=(L!=1)?"s":"";var b=new jive.model.DateHelper(H);d.appendChild(document.createTextNode(b.formatToMedDate(J.getDate())+", "+J.getDate().getFullYear()+" - "+M+" task"+h));var a=document.createElement("UL");var V=J.getTasks();for(var Y=0;Y<V.length;Y++){var T=V[Y];var g=document.createElement("LI");var c=document.createElement("A");c.className="jiveTT-hover-user jive-username-link";c.href=T.getAssignedTo().getURL();var X=document.createElement("IMG");X.className="jive-avatar";X.setAttribute("class","jive-avatar");X.src=CS_BASE_URL+"/people/"+T.getAssignedTo().getUsername()+"/avatar/22.png";c.appendChild(X);var f=document.createElement("SPAN");var S=document.createElement("A");S.href=T.getAssignedTo().getURL();S.className="jiveTT-hover-user jive-username-link";S.setAttribute("class","jiveTT-hover-user jive-username-link");S.appendChild(document.createTextNode(T.getAssignedTo().getFullName()));jive.ext.x.xAddEventListener(S,"mouseover",function(e){return function(){quickuserprofile.getUserProfileTooltip(e)}}(T.getAssignedTo().getID()));jive.ext.x.xAddEventListener(S,"mouseout",function(){quickuserprofile.cancelTooltip()});var U=document.createElement("A");U.href=T.getURL();U.appendChild(document.createTextNode(T.getSubject()));f.appendChild(U);f.appendChild(document.createTextNode(" : "));f.appendChild(S);g.appendChild(c);g.appendChild(f);a.appendChild(g)}W.appendChild(d);W.appendChild(a)}}(D));jive.ext.x.xAddEventListener(P,"mouseover",function(R){return function(X){var U=E.getDOM();while(U.childNodes.length>0){U.removeChild(U.childNodes[0])}var b=document.createElement("strong");var h=(I!=1)?"s":"";var a=new jive.model.DateHelper(H);b.appendChild(document.createTextNode(a.formatToMedDate(J.getDate())+", "+J.getDate().getFullYear()+" - "+I+" checkpoint"+h));var Y=document.createElement("UL");var W=J.getCheckPoints();for(var V=0;V<W.length;V++){var Z=W[V];var f=document.createElement("LI");var d=document.createElement("SPAN");d.id="jive-note-checkpoint-body";var S=document.createElement("STRONG");S.className="jive-link-checkpoint";S.setAttribute("class","jive-link-checkpoint");S.appendChild(document.createTextNode(Z.getName()));d.appendChild(S);if(Z.getProject().isEditable()){var T=document.createElement("P");var c=document.createElement("A");c.href=CS_BASE_URL+"/edit-checkpoint!input.jspa?project="+Z.getProject().getID()+"&checkPointID="+Z.getID();c.appendChild(document.createTextNode("Edit"));var g=document.createElement("A");g.href=CS_BASE_URL+"/delete-checkpoint!input.jspa?project="+Z.getProject().getID()+"&checkPointID="+Z.getID();g.appendChild(document.createTextNode("Delete"));T.appendChild(c);T.appendChild(g);d.appendChild(T)}f.appendChild(d);Y.appendChild(f)}U.appendChild(b);U.appendChild(Y)}}(D));O.mouseover=function(){if(typeof (jive)!="undefined"){try{if(!O.overed){O.outColor=O.style.backgroundColor}if(!H.isReadOnly()&&G.getItemVisibility()&&G.hasAddView()){jive.ext.x.xDisplayBlock(Q)}O.style.backgroundColor=O.overColor;O.overed=true}catch(R){}}};O.mouseout=function(){if(typeof (jive)!="undefined"){try{jive.ext.x.xDisplayNone(Q);O.style.backgroundColor=O.outColor;O.overed=false}catch(R){}}};O.updateText=function(){var R=H.getLanguageManager().getActiveLanguage();var T=D.getDate();if(D.getDate()==1){var S=F.childNodes[0];T=R.shortMonth(D.getMonth())+" "+T;while(F.childNodes.length>0){F.removeChild(F.childNodes[0])}F.appendChild(S);F.appendChild(document.createTextNode(T))}};O.getDate=function(R){return function(){return R}}(D);O.dropPoint=function(R,U){if(U!=null){var W=new Date();W.setTime(O.getDate().getTime());W.setHours(U.getHours());W.setMinutes(U.getMinutes());W.setSeconds(U.getSeconds());W.setMilliseconds(U.getMilliseconds());var X=W.getTime()-U.getTime()}if(U!=null&&X!=0&&jive.model.isEvent(R)){var T=new Date();T.setTime(R.getStart().getTime());var V=new Date();V.setTime(R.getEnd().getTime());var S=V.getTime()-T.getTime();T.setTime(T.getTime()+X);V.setTime(T.getTime()+S);R.setStart(T);R.setEnd(V);R.confirm()}else{if((U==null||X!=0)&&jive.model.isTask(R)){if(U!=null){var W=new Date();W.setTime(R.getDueDate().getTime()+X);R.setDueDate(W)}else{var W=new Date();W.setTime(O.getDate().getTime());R.setDueDate(W)}R.confirm()}}};O.appendTaskDOM=function(R){K.put(R.getTask().getID(),R.getTask());E=new JiveProjectTooltip(R.getTask().getProjectID(),"jive-note-checkpoint-body","jive-note-tasks-body","","","","","");jive.ext.x.xAddEventListener(L,"mouseout",E.cancelTooltip);M++;jive.ext.x.xDisplayNone(R);while(L.childNodes.length>0){L.removeChild(L.childNodes[0])}L.appendChild(document.createTextNode(M+" tasks"));jive.ext.x.xDisplayBlock(L)};this.appendTaskDOM=O.appendTaskDOM;O.removeTaskDOM=function(R){K.clear(R.getTask().getID());M--;if(M==0){jive.ext.x.xDisplayNone(L)}};this.removeTaskDOM=O.removeTaskDOM;O.getTasks=function(){return K.toArray(jive.model.isTask)};this.getTasks=O.getTasks;L.getTasks=J.getTasks;O.getCheckPoints=function(){return C.toArray(jive.model.isCheckPoint)};this.getCheckPoints=O.getCheckPoints;P.getCheckPoints=O.getCheckPoints;O.appendEventDOM=function(R){var S=R.getEvent();for(var T=0;T<O.childNodes.length;T++){if($def(O.childNodes[T].getEvent)){if(O.childNodes[T].getEvent().getStart()>S.getStart()){O.insertBefore(R,O.childNodes[T]);break}}}if(T==O.childNodes.length){O.appendChild(R)}};O.appendCheckPointDOM=function(R){C.put(R.getCheckPoint().getID(),R.getCheckPoint());E=new JiveProjectTooltip(R.getCheckPoint().getProject().getID(),"jive-note-checkpoint-body","jive-note-tasks-body","","","","","");jive.ext.x.xAddEventListener(P,"mouseout",E.cancelTooltip);I++;jive.ext.x.xDisplayNone(R);while(P.childNodes.length>0){P.removeChild(P.childNodes[0])}var S=(I!=1)?"s":"";P.appendChild(document.createTextNode(I+" checkpoint"+S));jive.ext.x.xDisplayBlock(P)};O.countVisibleItems=function(){return J.getTasks().length+J.getCheckPoints().length};this.countVisibleItems=O.countVisibleItems;jive.ext.x.xAddEventListener(Q,"click",function(R,S){return function(T){R.notifyAddEventClicked(S.getDate());jive.ext.x.xStopPropagation(T)}}(A,F),true);jive.ext.x.xAddEventListener(O,"click",function(R,S){return function(){R.notifyDayClicked(S.getDate())}}(A,F),false);jive.ext.x.xAddEventListener(O,"mouseover",O.mouseover);jive.ext.x.xAddEventListener(O,"mouseout",O.mouseout);this.getDate=O.getDate;this.getDOM=function(){return O}};

jive.gui.BasicGui=function(L){var B=null;var O=new Array();var P=new Array();this.addPriorityEventListener=function(Z){P.splice(0,0,Z)};this.addEventListener=function(Z){P.push(Z)};var H=new Date();H.setHours(17);var U=new Date();U.setHours(17);var X=new Date();X.setHours(17);var I=this;var Q=false;this.hasInitHuh=function(){return Q};var E=document.createElement("DIV");E.className="month_view_very_inner";var M=document.createElement("DIV");M.setAttribute("class","month_view_main");M.className="month_view_main";var S=new jive.gui.SimpleHeader(L);var Y=document.createElement("DIV");Y.setAttribute("class","month_view_inner");Y.className="month_view_inner";var N=true;this.showPrintHuh=function(Z){N=Z;if(Z&&I.getActiveView().hasPrintView()){I.getHeader().showPrintHuh(true)}else{I.getHeader().showPrintHuh(false)}};this.shouldShowPrintHuh=function(){return N};this.setNavFilter=function(Z){I.getHeader().setNavFilter(Z)};this.showFilterHuh=function(Z){I.getHeader().showFilterHuh(Z)};this.getFilterText=function(){return I.getHeader().getFilterText()};this.getHeaderFooterHeight=function(){return I.getHeader().getHeight()};var W=function(){};var F=function(){};function D(){return W}function A(){return F}var J=new jive.ext.y.HashTable();this.isViewHuh=function(Z){return Z!=null&&$obj(Z)&&$def(Z.isExpandedHuh)};this.addView=function(Z){var a=I.getView(Z.getName());if(!$obj(a)||a==null){J.put(Z.getHash(),Z);if(I.hasInitHuh()){Z.init(E);Z.collapse()}}};this.removeView=function(Z){J.clear(Z)};this.getAllViews=function(){return J.toArray(I.isViewHuh)};this.getView=function(Z){return J.get(Z)};this.showView=function(e,c){var a=I.getAllViews();var Z=false;for(var b=0;b<a.length;b++){if(a[b].getHash()==c){Z=true}}if(!Z){return I.showView(e,"month")}for(var b=0;b<a.length;b++){if(a[b].getHash()==c){if(!a[b].isExpandedHuh()){a[b].expand()}if(a[b].hasPrintView()&&N){I.getHeader().showPrintHuh(true)}else{I.getHeader().showPrintHuh(false)}a[b].go(e);I.getHeader().setTitleText(a[b].getHeaderText(e).escapeHTML());W=a[b].getPrevViewFunc();F=a[b].getNextViewFunc();U.setTime(a[b].getMinDate());X.setTime(a[b].getMaxDate());I.notifyTimesChanged(a[b].getMinDate(),a[b].getMaxDate())}else{if(a[b].isExpandedHuh()){a[b].collapse()}}}I.fixHeight()};this.getCurrentDate=function(){var Z=new Date();Z.setTime(H.getTime());return Z};this.setCurrentDate=function(Z){H.setTime(Z.getTime())};this.notifyPrintClicked=function(a){var b=new Date();b.setTime(a.getTime());for(var Z=0;Z<O.length;Z++){O[Z].printClicked(b)}};this.hideArrows=function(){I.getHeader().showArrowsHuh(false)};this.showArrows=function(){I.getHeader().showArrowsHuh(true)};this.ensureMinDate=function(Z){if(jive.model.dateLT(Z,U)){U.setTime(Z.getTime())}};this.ensureMaxDate=function(Z){if(jive.model.dateGT(Z,X)){X.setTime(Z.getTime())}};this.getMinDate=function(){return U};this.setMinDate=function(Z){U.setTime(Z.getTime())};this.getMaxDate=function(){return X};this.setMaxDate=function(Z){X.setTime(Z.getTime())};var R=new jive.gui.MiniMonthView(L,I);this.updateText=function(){var a=I.getAllViews();for(var b=0;b<a.length;b++){a[b].updateText()}var Z=L.getLanguageManager().getActiveLanguage();I.getHeader().updateText();I.getHeader().setTitleText(I.getActiveView().getHeaderText(I.getCurrentDate()).escapeHTML())};M.appendChild(S.getDOM());M.appendChild(Y);Y.appendChild(E);this.getDOM=function(){return M};this.getEventsOn=function(Z){return I.getView("month").getEventsOn(Z)};this.getTasksOn=function(Z){return I.getView("month").getTasksOn(Z)};this.addEvent=function(a){var Z=I.getAllViews();for(var b=0;b<Z.length;b++){Z[b].addEvent(a)}};this.addTask=function(b){var Z=I.getAllViews();for(var a=0;a<Z.length;a++){Z[a].addTask(b)}};this.removeEvent=function(a){var Z=I.getAllViews();for(var b=0;b<Z.length;b++){Z[b].removeEvent(a)}};this.removeTask=function(b){var Z=I.getAllViews();for(var a=0;a<Z.length;a++){Z[a].removeTask(b)}};this.flushCalendar=function(b){var Z=I.getAllViews();for(var a=0;a<Z.length;a++){Z[a].flushCalendar(b)}};this.flushEvent=function(a){var Z=I.getAllViews();for(var b=0;b<Z.length;b++){Z[b].flushEvent(a)}if(jotlet.model.isEvent(B)&&B.getId()==a.getId()){B=null}};this.flushTask=function(b){var Z=I.getAllViews();for(var a=0;a<Z.length;a++){Z[a].flushTask(b)}if(jotlet.model.isTask(B)&&B.getId()==b.getId()){B=null}};this.refreshWeather=function(){var Z=I.getAllViews();for(var a=0;a<Z.length;a++){if($def(Z[a].refreshWeather)){Z[a].refreshWeather()}}};this.refreshShading=function(){var Z=I.getAllViews();for(var a=0;a<Z.length;a++){if($def(Z[a].refreshShading)){Z[a].refreshShading()}}};this.getActiveView=function(){var Z=I.getAllViews();for(var a=0;a<Z.length;a++){if(Z[a].isExpandedHuh()){return Z[a]}}return I.getView("month")};this.showMonth=function(Z){I.showView(Z,"month")};this.showWeek=function(Z){I.showView(Z,"week")};this.showDay=function(Z){I.showView(Z,"day")};this.showList=function(Z){I.showView(Z,"list")};this.refresh=function(){var Z=I.getAllViews();for(var a=0;a<Z.length;a++){if(Z[a].isExpandedHuh()){Z[a].refresh();I.refreshShading();return }}I.showMonth(I.getCurrentDate());I.refreshShading()};this.fixHeight=function(){try{if(jive.ext.x.xParent(M)!=null){var Z=jive.ext.x.xHeight(jive.ext.x.xParent(M))-I.getHeaderFooterHeight();jive.ext.x.xHeight(Y,Z);I.getView("month").fixHeight(Z)}}catch(a){alert(a)}};this.init=function(){Q=true;var Z=I.getAllViews();for(var a=0;a<Z.length;a++){Z[a].init(E)}};this.isShowingDay=function(){return I.getView("day").isExpandedHuh()};this.isShowingWeek=function(){return I.getView("week").isExpandedHuh()};this.killYourself=function(){L=null;for(var Z=0;Z<J.length;Z++){J[Z].killYourself()}};I.addView(R);this.addListener=function(Z){O.push(Z)};this.notifyStopDrag=function(a,c,e,f){var d=false;var Z=I.getAllViews();for(var b=0;b<Z.length;b++){if(Z[b].isExpandedHuh()&&$def(Z[b].stopDrag)){d=Z[b].stopDrag(a,c,e,f)}}if(!d){for(var b=0;b<O.length&&!d;b++){d=O[b].stopDrag(a,c,e,f)}}return d};var T=null;var C=0;this.notifyDragging=function(b,d,e,f){C++;var a=C;var g=false;var Z=I.getAllViews();for(var c=0;c<Z.length;c++){if(Z[c].isExpandedHuh()){if($def(Z[c].dragging)){g=Z[c].dragging(b,d,e,f)}}}if(!g){for(var c=0;c<O.length&&!g;c++){g=g||O[c].dragging(b,d,e,f)}if(!g){L.hideHover()}}return g};this.notifyDayClicked=function(a){var b=new Date();b.setTime(a.getTime());for(var Z=0;Z<O.length;Z++){O[Z].dayClicked(b)}};this.notifyTimesChanged=function(b,a){for(var Z=0;Z<O.length;Z++){O[Z].timesChanged(b,a)}};this.notifyQuickAddTask=function(c,b,Z){for(var a=0;a<O.length;a++){O[a].quickAddTask(c,b,Z)}};this.filter=function(b){var Z=I.getAllViews();for(var a=0;a<Z.length;a++){if(Z[a].isExpandedHuh()){if($def(Z[a].filter)){Z[a].filter(b)}}}};this.calendarVisible=function(c,b){var Z=I.getAllViews();for(var a=0;a<Z.length;a++){if($def(Z[a].calendarVisible)){Z[a].calendarVisible(c,b)}}I.refreshShading()};this.notifyEventClicked=function(Z){for(var a=0;a<P.length;a++){P[a].eventClicked(Z)}};this.notifyTaskClicked=function(a){try{for(var Z=0;Z<P.length;Z++){P[Z].taskClicked(a)}}catch(b){alert(b)}};this.notifyCheckPointClicked=function(b){try{for(var Z=0;Z<P.length;Z++){P[Z].checkPointClicked(b)}}catch(a){alert(a)}};this.notifyEventDblClicked=function(Z){for(var a=0;a<P.length;a++){P[a].eventDblClicked(Z)}};this.notifyTaskDblClicked=function(a){for(var Z=0;Z<P.length;Z++){P[Z].taskDblClicked(a)}};this.notifyCheckPointDblClicked=function(a){for(var Z=0;Z<P.length;Z++){P[Z].checkPointDblClicked(a)}};this.notifyUnselectAll=function(){for(var Z=0;Z<P.length;Z++){P[Z].unselectAll()}};var G=new Array();this.addNavListener=function(Z){G.push(Z)};this.removeNavListener=function(a){for(var Z=0;Z<G.length;Z++){if(G[Z]==a){G.splice(Z,1)}}};this.notifyMonthClicked=function(a){for(var Z=0;Z<G.length;Z++){G[Z].monthClicked(a)}};this.notifyWeekClicked=function(a){for(var Z=0;Z<G.length;Z++){G[Z].weekClicked(a)}};this.notifyDayClicked=function(a){for(var Z=0;Z<G.length;Z++){G[Z].dayClicked(a)}};this.notifyListClicked=function(){for(var Z=0;Z<G.length;Z++){G[Z].listClicked()}};this.notifyAddEventClicked=function(a){for(var Z=0;Z<G.length;Z++){G[Z].addEventClicked(a)}};this.notifyBackClicked=function(){for(var Z=0;Z<G.length;Z++){G[Z].backClicked()}};var V=new Object();V.eventClicked=function(Z){B=Z};V.eventDblClicked=function(Z){};V.taskClicked=function(Z){B=Z};V.taskDblClicked=function(Z){};V.checkPointClicked=function(Z){B=Z};V.checkPointDblClicked=function(Z){};V.unselectAll=function(){B=null};this.addEventListener(V);this.unselectAll=function(){I.notifyUnselectAll()};this.getSelectedItem=function(){return B};var K=new Object();K.printClicked=function(a,Z){return function(){a(Z())}}(I.notifyPrintClicked,I.getCurrentDate);K.leftClicked=function(Z){return function(){var a=Z();a()}}(D);K.rightClicked=function(Z){return function(){var a=Z();a()}}(A);K.searchByText=function(b){var Z=I.getAllViews();for(var a=0;a<Z.length;a++){if($def(Z[a].filter)){Z[a].filter(b)}}};S.addListener(K);this.setHeader=function(Z){M.removeChild(S.getDOM());S.killYourself();S=Z;S.addListener(K);M.insertBefore(S.getDOM(),Y)};this.getHeader=function(){return S}};

jive.gui.SimpleHeader=function(B,E){var D;if($obj(E)){D=E}else{D=this}var G=document.createElement("DIV");G.setAttribute("class","month_view_header_button_wrap");G.className="month_view_header_button_wrap";var C=document.createElement("DIV");C.setAttribute("class","month_view_header color_header");C.className="month_view_header color_header";C.appendChild(document.createElement("DIV"));var A=document.createElement("span");A.setAttribute("class","month_view_header_link");A.className="month_view_header_link";G.appendChild(A);A.appendChild(document.createTextNode("<"));var H=document.createElement("span");H.setAttribute("class","month_view_float_r month_view_header_link");H.className="month_view_float_r month_view_header_link";H.appendChild(document.createTextNode(">"));G.appendChild(H);var I=document.createElement("SPAN");I.setAttribute("class","month_view_headerc");I.className="month_view_headerc";G.appendChild(I);C.appendChild(G);jive.ext.x.xDisplayBlock(C);this.getDOM=function(){return C};this.showArrowsHuh=function(J){if(J){jive.ext.x.xDisplayBlock(A);jive.ext.x.xShow(H)}else{jive.ext.x.xDisplayNone(A);jive.ext.x.xHide(H)}};this.showPrintHuh=function(J){};this.showFilterHuh=function(J){};this.getHeight=function(){return(jive.ext.x.xDisplay(C)=="block")?jive.ext.x.xHeight(C):0};this.setTitleText=function(J){while(I.childNodes.length>0){I.removeChild(I.childNodes[0])}I.appendChild(document.createTextNode(J))};this.setNavFilter=function(J){};this.updateText=function(){};this.getFilterText=function(){return""};var F=new Array();this.addListener=function(J){F.push(J)};this.notifyPrintClicked=function(){for(var J=0;J<F.length;J++){F[J].printClicked()}};this.notifyLeftClicked=function(){for(var J=0;J<F.length;J++){F[J].leftClicked()}};this.notifyRightClicked=function(){for(var J=0;J<F.length;J++){F[J].rightClicked()}};this.notifySearchByText=function(K){for(var J=0;J<F.length;J++){F[J].searchByText(K)}};jive.ext.x.xAddEventListener(A,"click",function(J){return function(){J.notifyLeftClicked()}}(D));jive.ext.x.xAddEventListener(H,"click",function(J){return function(){J.notifyRightClicked()}}(D));this.killYourself=function(){}};

jive.gui.NullHeader=function(C){var B=this;var D=document.createElement("DIV");jive.ext.x.xDisplayNone(D);this.getDOM=function(){return D};this.showArrowsHuh=function(E){};this.showPrintHuh=function(E){};this.showFilterHuh=function(E){};this.getHeight=function(){return 0};this.setTitleText=function(E){};this.setNavFilter=function(E){};this.updateText=function(){};this.getFilterText=function(){return""};var A=new Array();this.addListener=function(E){A.push(E)};this.notifyPrintClicked=function(){for(var E=0;E<A.length;E++){A[E].printClicked()}};this.notifyLeftClicked=function(){for(var E=0;E<A.length;E++){A[E].leftClicked()}};this.notifyRightClicked=function(){for(var E=0;E<A.length;E++){A[E].rightClicked()}};this.notifySearchByText=function(F){for(var E=0;E<A.length;E++){A[E].searchByText(F)}};this.killYourself=function(){}};

var pc=navigator.userAgent.toLowerCase();var ie4_win=(pc.indexOf("win")!=-1)&&(pc.indexOf("msie")!=-1)&&(parseInt(navigator.appVersion)>=4);var is_gecko=pc.indexOf("gecko/")!=-1&&parseFloat(pc.substring(pc.indexOf("gecko/")+6,pc.indexOf("gecko/")+14))>20030108;function styleTag(M,D,H){var E=0;var C=H.scrollTop;var A;if(document.selection){if(document.selection.createRange().parentElement().tagName=="TEXTAREA"){var F=document.selection.createRange().text;E=getSelectionRangeEnd(H);A=_markupText(F,M,D);document.selection.createRange().text=A[0];E+=A[1]}}else{if(typeof (H.selectionStart)!="undefined"&&typeof (H.selectionEnd)!="undefined"){if(H.selectionStart==H.selectionEnd){return }var G=H.textLength;var B=H.selectionStart;var I=H.selectionEnd;if(I==1||I==2){I=G}var L=(H.value).substring(0,B);var K=(H.value).substring(B,I);var J=(H.value).substring(I,G);A=_markupText(K,M,D);H.value=L+A[0]+J;E=I+A[1]}else{return }}if(E>0){setCaretTo(H,E,C)}}function _markupText(J,M,E){var A=trimLeadingSpace(J);J=A[0];var I=A[1];A=trimTrailingSpace(J);J=A[0];var F=A[1];var D=0;if(J.indexOf("\n")>0){var L=J.split("\n");var H="";for(var G=0;G<L.length;G++){var K=L[G];A=trimLeadingSpace(K);K=A[0];var C=A[1];A=trimTrailingSpace(K);K=A[0];var B=A[1];if(K==""){H+=C+K+B}else{H+=C+M+K+E+B;D+=(M.length+E.length)}if(G<L.length-1){H+="\n"}}J=I+H+F}else{J=I+M+J+E+F}A=new Array(2);A[0]=J;A[1]=D;return A}function trimLeadingSpace(C){var B="";while(C.length>0&&(C.charAt(0)==" "||C.charAt(0)=="\n"||C.charAt(0)=="\r")){B+=C.charAt(0);C=C.substring(1)}var A=new Array(2);A[0]=C;A[1]=B;return A}function trimTrailingSpace(C){var B="";while(C.length>0&&(C.charAt(C.length-1)==" "||C.charAt(C.length-1)=="\n"||C.charAt(C.length-1)=="\r")){B+=C.charAt(C.length-1);C=C.substring(0,C.length-1)}var A=new Array(2);A[0]=C;A[1]=B;return A}function getSelectionRangeText(B){if(document.selection){return document.selection.createRange().text}else{if(is_gecko){var C=B.selectionStart;var A=B.selectionEnd;return B.value.substr(C,A-C)}else{return""}}}function getSelectionRangeEnd(B){if(document.selection){var A=document.selection.createRange();var C=A.duplicate();C.moveToElementText(B);C.setEndPoint("EndToEnd",A);var D=C.text.length-A.text.length;return D+A.text.length}else{if(is_gecko){return B.selectionEnd}else{return 0}}}function setCaretTo(B,G,E){B.focus();if(B.createTextRange){var C=0;var D=0;var F=B.value;while(C>-1&&C<G){C=F.indexOf("\r\n",C);if(C>=0){D++;C+=2}}if(D>1){D--}var A=B.createTextRange();A.move("character",(G-D));A.select()}else{if(B.selectionStart){B.setSelectionRange(G,G)}}if(E>0){B.scrollTop=E}}function caret(A){if(ie4_win&&A.createTextRange&&document.selection.createRange().parentElement().tagName=="TEXTAREA"){A.caretPos=document.selection.createRange().duplicate()}}function funcname(B){var A=B.toString().match(/function (\w*)/)[1];if((A==null)||(A.length==0)){return"anonymous"}return A}function stacktrace(){var B="";for(var A=arguments.caller;A!=null;A=A.caller){B+=funcname(A.callee)+"\n";if(A.caller==A){break}}return B}function printStackTrace(){alert("stack trace is "+stacktrace())};

var Prototype={Version:"1.6.0.2",Browser:{IE:!!(window.attachEvent&&!window.opera),Opera:!!window.opera,WebKit:navigator.userAgent.indexOf("AppleWebKit/")>-1,Gecko:navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("KHTML")==-1,MobileSafari:!!navigator.userAgent.match(/Apple.*Mobile.*Safari/)},BrowserFeatures:{XPath:!!document.evaluate,ElementExtensions:!!window.HTMLElement,SpecificElementExtensions:document.createElement("div").__proto__&&document.createElement("div").__proto__!==document.createElement("form").__proto__},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(A){return A}};if(Prototype.Browser.MobileSafari){Prototype.BrowserFeatures.SpecificElementExtensions=false}var Class={create:function(){var E=null,D=$A(arguments);if(Object.isFunction(D[0])){E=D.shift()}function A(){this.initialize.apply(this,arguments)}Object.extend(A,Class.Methods);A.superclass=E;A.subclasses=[];if(E){var B=function(){};B.prototype=E.prototype;A.prototype=new B;E.subclasses.push(A)}for(var C=0;C<D.length;C++){A.addMethods(D[C])}if(!A.prototype.initialize){A.prototype.initialize=Prototype.emptyFunction}A.prototype.constructor=A;return A}};Class.Methods={addMethods:function(G){var C=this.superclass&&this.superclass.prototype;var B=Object.keys(G);if(!Object.keys({toString:true}).length){B.push("toString","valueOf")}for(var A=0,D=B.length;A<D;A++){var F=B[A],E=G[F];if(C&&Object.isFunction(E)&&E.argumentNames().first()=="$super"){var H=E,E=Object.extend((function(I){return function(){return C[I].apply(this,arguments)}})(F).wrap(H),{valueOf:function(){return H},toString:function(){return H.toString()}})}this.prototype[F]=E}return this}};var Abstract={};Object.extend=function(A,C){for(var B in C){A[B]=C[B]}return A};Object.extend(Object,{inspect:function(A){try{if(Object.isUndefined(A)){return"undefined"}if(A===null){return"null"}return A.inspect?A.inspect():String(A)}catch(B){if(B instanceof RangeError){return"..."}throw B}},toJSON:function(A){var C=typeof A;switch(C){case"undefined":case"function":case"unknown":return ;case"boolean":return A.toString()}if(A===null){return"null"}if(A.toJSON){return A.toJSON()}if(Object.isElement(A)){return }var B=[];for(var E in A){var D=Object.toJSON(A[E]);if(!Object.isUndefined(D)){B.push(E.toJSON()+": "+D)}}return"{"+B.join(", ")+"}"},toQueryString:function(A){return $H(A).toQueryString()},toHTML:function(A){return A&&A.toHTML?A.toHTML():String.interpret(A)},keys:function(A){var B=[];for(var C in A){B.push(C)}return B},values:function(B){var A=[];for(var C in B){A.push(B[C])}return A},clone:function(A){return Object.extend({},A)},isElement:function(A){return A&&A.nodeType==1},isArray:function(A){return A!=null&&typeof A=="object"&&"splice" in A&&"join" in A},isHash:function(A){return A instanceof Hash},isFunction:function(A){return typeof A=="function"},isString:function(A){return typeof A=="string"},isNumber:function(A){return typeof A=="number"},isUndefined:function(A){return typeof A=="undefined"}});Object.extend(Function.prototype,{argumentNames:function(){var A=this.toString().match(/^[\s\(]*function[^(]*\((.*?)\)/)[1].split(",").invoke("strip");return A.length==1&&!A[0]?[]:A},bind:function(){if(arguments.length<2&&Object.isUndefined(arguments[0])){return this}var A=this,C=$A(arguments),B=C.shift();return function(){return A.apply(B,C.concat($A(arguments)))}},bindAsEventListener:function(){var A=this,C=$A(arguments),B=C.shift();return function(D){return A.apply(B,[D||window.event].concat(C))}},curry:function(){if(!arguments.length){return this}var A=this,B=$A(arguments);return function(){return A.apply(this,B.concat($A(arguments)))}},delay:function(){var A=this,B=$A(arguments),C=B.shift()*1000;return window.setTimeout(function(){return A.apply(A,B)},C)},wrap:function(B){var A=this;return function(){return B.apply(this,[A.bind(this)].concat($A(arguments)))}},methodize:function(){if(this._methodized){return this._methodized}var A=this;return this._methodized=function(){return A.apply(null,[this].concat($A(arguments)))}}});Function.prototype.defer=Function.prototype.delay.curry(0.01);Date.prototype.toJSON=function(){return'"'+this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+'Z"'};var Try={these:function(){var C;for(var B=0,D=arguments.length;B<D;B++){var A=arguments[B];try{C=A();break}catch(E){}}return C}};RegExp.prototype.match=RegExp.prototype.test;RegExp.escape=function(A){return String(A).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};var PeriodicalExecuter=Class.create({initialize:function(B,A){this.callback=B;this.frequency=A;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1000)},execute:function(){this.callback(this)},stop:function(){if(!this.timer){return }clearInterval(this.timer);this.timer=null},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.execute()}finally{this.currentlyExecuting=false}}}});Object.extend(String,{interpret:function(A){return A==null?"":String(A)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});Object.extend(String.prototype,{gsub:function(E,C){var A="",D=this,B;C=arguments.callee.prepareReplacement(C);while(D.length>0){if(B=D.match(E)){A+=D.slice(0,B.index);A+=String.interpret(C(B));D=D.slice(B.index+B[0].length)}else{A+=D,D=""}}return A},sub:function(C,A,B){A=this.gsub.prepareReplacement(A);B=Object.isUndefined(B)?1:B;return this.gsub(C,function(D){if(--B<0){return D[0]}return A(D)})},scan:function(B,A){this.gsub(B,A);return String(this)},truncate:function(B,A){B=B||30;A=Object.isUndefined(A)?"...":A;return this.length>B?this.slice(0,B-A.length)+A:String(this)},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")},extractScripts:function(){var B=new RegExp(Prototype.ScriptFragment,"img");var A=new RegExp(Prototype.ScriptFragment,"im");return(this.match(B)||[]).map(function(C){return(C.match(A)||["",""])[1]})},evalScripts:function(){return this.extractScripts().map(function(script){return eval(script)})},escapeHTML:function(){var A=arguments.callee;A.text.data=this;return A.div.innerHTML},unescapeHTML:function(){var A=new Element("div");A.innerHTML=this.stripTags();return A.childNodes[0]?(A.childNodes.length>1?$A(A.childNodes).inject("",function(B,C){return B+C.nodeValue}):A.childNodes[0].nodeValue):""},toQueryParams:function(B){var A=this.strip().match(/([^?#]*)(#.*)?$/);if(!A){return{}}return A[1].split(B||"&").inject({},function(E,F){if((F=F.split("="))[0]){var C=decodeURIComponent(F.shift());var D=F.length>1?F.join("="):F[0];if(D!=undefined){D=decodeURIComponent(D)}if(C in E){if(!Object.isArray(E[C])){E[C]=[E[C]]}E[C].push(D)}else{E[C]=D}}return E})},toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},times:function(A){return A<1?"":new Array(A+1).join(this)},camelize:function(){var D=this.split("-"),A=D.length;if(A==1){return D[0]}var C=this.charAt(0)=="-"?D[0].charAt(0).toUpperCase()+D[0].substring(1):D[0];for(var B=1;B<A;B++){C+=D[B].charAt(0).toUpperCase()+D[B].substring(1)}return C},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.gsub(/::/,"/").gsub(/([A-Z]+)([A-Z][a-z])/,"#{1}_#{2}").gsub(/([a-z\d])([A-Z])/,"#{1}_#{2}").gsub(/-/,"_").toLowerCase()},dasherize:function(){return this.gsub(/_/,"-")},inspect:function(B){var A=this.gsub(/[\x00-\x1f\\]/,function(C){var D=String.specialChar[C[0]];return D?D:"\\u00"+C[0].charCodeAt().toPaddedString(2,16)});if(B){return'"'+A.replace(/"/g,'\\"')+'"'}return"'"+A.replace(/'/g,"\\'")+"'"},toJSON:function(){return this.inspect(true)},unfilterJSON:function(A){return this.sub(A||Prototype.JSONFilter,"#{1}")},isJSON:function(){var A=this;if(A.blank()){return false}A=this.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return(/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/).test(A)},evalJSON:function(sanitize){var json=this.unfilterJSON();try{if(!sanitize||json.isJSON()){return eval("("+json+")")}}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect())},include:function(A){return this.indexOf(A)>-1},startsWith:function(A){return this.indexOf(A)===0},endsWith:function(A){var B=this.length-A.length;return B>=0&&this.lastIndexOf(A)===B},empty:function(){return this==""},blank:function(){return/^\s*$/.test(this)},interpolate:function(A,B){return new Template(this,B).evaluate(A)}});if(Prototype.Browser.WebKit||Prototype.Browser.IE){Object.extend(String.prototype,{escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(){return this.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")}})}String.prototype.gsub.prepareReplacement=function(B){if(Object.isFunction(B)){return B}var A=new Template(B);return function(C){return A.evaluate(C)}};String.prototype.parseQuery=String.prototype.toQueryParams;Object.extend(String.prototype.escapeHTML,{div:document.createElement("div"),text:document.createTextNode("")});with(String.prototype.escapeHTML){div.appendChild(text)}var Template=Class.create({initialize:function(A,B){this.template=A.toString();this.pattern=B||Template.Pattern},evaluate:function(A){if(Object.isFunction(A.toTemplateReplacements)){A=A.toTemplateReplacements()}return this.template.gsub(this.pattern,function(D){if(A==null){return""}var F=D[1]||"";if(F=="\\"){return D[2]}var B=A,G=D[3];var E=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;D=E.exec(G);if(D==null){return F}while(D!=null){var C=D[1].startsWith("[")?D[2].gsub("\\\\]","]"):D[1];B=B[C];if(null==B||""==D[3]){break}G=G.substring("["==D[3]?D[1].length:D[0].length);D=E.exec(G)}return F+String.interpret(B)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={};var Enumerable={each:function(C,B){var A=0;C=C.bind(B);try{this._each(function(E){C(E,A++)})}catch(D){if(D!=$break){throw D}}return this},eachSlice:function(D,C,B){C=C?C.bind(B):Prototype.K;var A=-D,E=[],F=this.toArray();while((A+=D)<F.length){E.push(F.slice(A,A+D))}return E.collect(C,B)},all:function(C,B){C=C?C.bind(B):Prototype.K;var A=true;this.each(function(E,D){A=A&&!!C(E,D);if(!A){throw $break}});return A},any:function(C,B){C=C?C.bind(B):Prototype.K;var A=false;this.each(function(E,D){if(A=!!C(E,D)){throw $break}});return A},collect:function(C,B){C=C?C.bind(B):Prototype.K;var A=[];this.each(function(E,D){A.push(C(E,D))});return A},detect:function(C,B){C=C.bind(B);var A;this.each(function(E,D){if(C(E,D)){A=E;throw $break}});return A},findAll:function(C,B){C=C.bind(B);var A=[];this.each(function(E,D){if(C(E,D)){A.push(E)}});return A},grep:function(D,C,B){C=C?C.bind(B):Prototype.K;var A=[];if(Object.isString(D)){D=new RegExp(D)}this.each(function(F,E){if(D.match(F)){A.push(C(F,E))}});return A},include:function(A){if(Object.isFunction(this.indexOf)){if(this.indexOf(A)!=-1){return true}}var B=false;this.each(function(C){if(C==A){B=true;throw $break}});return B},inGroupsOf:function(B,A){A=Object.isUndefined(A)?null:A;return this.eachSlice(B,function(C){while(C.length<B){C.push(A)}return C})},inject:function(A,C,B){C=C.bind(B);this.each(function(E,D){A=C(A,E,D)});return A},invoke:function(B){var A=$A(arguments).slice(1);return this.map(function(C){return C[B].apply(C,A)})},max:function(C,B){C=C?C.bind(B):Prototype.K;var A;this.each(function(E,D){E=C(E,D);if(A==null||E>=A){A=E}});return A},min:function(C,B){C=C?C.bind(B):Prototype.K;var A;this.each(function(E,D){E=C(E,D);if(A==null||E<A){A=E}});return A},partition:function(D,B){D=D?D.bind(B):Prototype.K;var C=[],A=[];this.each(function(F,E){(D(F,E)?C:A).push(F)});return[C,A]},pluck:function(B){var A=[];this.each(function(C){A.push(C[B])});return A},reject:function(C,B){C=C.bind(B);var A=[];this.each(function(E,D){if(!C(E,D)){A.push(E)}});return A},sortBy:function(B,A){B=B.bind(A);return this.map(function(D,C){return{value:D,criteria:B(D,C)}}).sort(function(F,E){var D=F.criteria,C=E.criteria;return D<C?-1:D>C?1:0}).pluck("value")},toArray:function(){return this.map()},zip:function(){var B=Prototype.K,A=$A(arguments);if(Object.isFunction(A.last())){B=A.pop()}var C=[this].concat(A).map($A);return this.map(function(E,D){return B(C.pluck(D))})},size:function(){return this.toArray().length},inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"}};Object.extend(Enumerable,{map:Enumerable.collect,find:Enumerable.detect,select:Enumerable.findAll,filter:Enumerable.findAll,member:Enumerable.include,entries:Enumerable.toArray,every:Enumerable.all,some:Enumerable.any});function $A(C){if(!C){return[]}if(C.toArray){return C.toArray()}var B=C.length||0,A=new Array(B);while(B--){A[B]=C[B]}return A}if(Prototype.Browser.WebKit){$A=function(C){if(!C){return[]}if(!(Object.isFunction(C)&&C=="[object NodeList]")&&C.toArray){return C.toArray()}var B=C.length||0,A=new Array(B);while(B--){A[B]=C[B]}return A}}Array.from=$A;Object.extend(Array.prototype,Enumerable);if(!Array.prototype._reverse){Array.prototype._reverse=Array.prototype.reverse}Object.extend(Array.prototype,{_each:function(B){for(var A=0,C=this.length;A<C;A++){B(this[A])}},clear:function(){this.length=0;return this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(A){return A!=null})},flatten:function(){return this.inject([],function(B,A){return B.concat(Object.isArray(A)?A.flatten():[A])})},without:function(){var A=$A(arguments);return this.select(function(B){return !A.include(B)})},reverse:function(A){return(A!==false?this:this.toArray())._reverse()},reduce:function(){return this.length>1?this:this[0]},uniq:function(A){return this.inject([],function(D,C,B){if(0==B||(A?D.last()!=C:!D.include(C))){D.push(C)}return D})},intersect:function(A){return this.uniq().findAll(function(B){return A.detect(function(C){return B===C})})},clone:function(){return[].concat(this)},size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"},toJSON:function(){var A=[];this.each(function(B){var C=Object.toJSON(B);if(!Object.isUndefined(C)){A.push(C)}});return"["+A.join(", ")+"]"}});if(Object.isFunction(Array.prototype.forEach)){Array.prototype._each=Array.prototype.forEach}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(C,A){A||(A=0);var B=this.length;if(A<0){A=B+A}for(;A<B;A++){if(this[A]===C){return A}}return -1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(B,A){A=isNaN(A)?this.length:(A<0?this.length+A:A)+1;var C=this.slice(0,A).reverse().indexOf(B);return(C<0)?C:A-C-1}}Array.prototype.toArray=Array.prototype.clone;function $w(A){if(!Object.isString(A)){return[]}A=A.strip();return A?A.split(/\s+/):[]}if(Prototype.Browser.Opera){Array.prototype.concat=function(){var E=[];for(var B=0,C=this.length;B<C;B++){E.push(this[B])}for(var B=0,C=arguments.length;B<C;B++){if(Object.isArray(arguments[B])){for(var A=0,D=arguments[B].length;A<D;A++){E.push(arguments[B][A])}}else{E.push(arguments[B])}}return E}}Object.extend(Number.prototype,{toColorPart:function(){return this.toPaddedString(2,16)},succ:function(){return this+1},times:function(A){$R(0,this,true).each(A);return this},toPaddedString:function(C,B){var A=this.toString(B||10);return"0".times(C-A.length)+A},toJSON:function(){return isFinite(this)?this.toString():"null"}});$w("abs round ceil floor").each(function(A){Number.prototype[A]=Math[A].methodize()});function $H(A){return new Hash(A)}var Hash=Class.create(Enumerable,(function(){function A(B,C){if(Object.isUndefined(C)){return B}return B+"="+encodeURIComponent(String.interpret(C))}return{initialize:function(B){this._object=Object.isHash(B)?B.toObject():Object.clone(B)},_each:function(C){for(var B in this._object){var D=this._object[B],E=[B,D];E.key=B;E.value=D;C(E)}},set:function(B,C){return this._object[B]=C},get:function(B){return this._object[B]},unset:function(B){var C=this._object[B];delete this._object[B];return C},toObject:function(){return Object.clone(this._object)},keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},index:function(C){var B=this.detect(function(D){return D.value===C});return B&&B.key},merge:function(B){return this.clone().update(B)},update:function(B){return new Hash(B).inject(this,function(C,D){C.set(D.key,D.value);return C})},toQueryString:function(){return this.map(function(D){var C=encodeURIComponent(D.key),B=D.value;if(B&&typeof B=="object"){if(Object.isArray(B)){return B.map(A.curry(C)).join("&")}}return A(C,B)}).join("&")},inspect:function(){return"#<Hash:{"+this.map(function(B){return B.map(Object.inspect).join(": ")}).join(", ")+"}>"},toJSON:function(){return Object.toJSON(this.toObject())},clone:function(){return new Hash(this)}}})());Hash.prototype.toTemplateReplacements=Hash.prototype.toObject;Hash.from=$H;var ObjectRange=Class.create(Enumerable,{initialize:function(C,A,B){this.start=C;this.end=A;this.exclusive=B},_each:function(A){var B=this.start;while(this.include(B)){A(B);B=B.succ()}},include:function(A){if(A<this.start){return false}if(this.exclusive){return A<this.end}return A<=this.end}});var $R=function(C,A,B){return new ObjectRange(C,A,B)};var Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||false},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(A){this.responders._each(A)},register:function(A){if(!this.include(A)){this.responders.push(A)}},unregister:function(A){this.responders=this.responders.without(A)},dispatch:function(D,B,C,A){this.each(function(E){if(Object.isFunction(E[D])){try{E[D].apply(E,[B,C,A])}catch(F){}}})}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(A){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:true,evalJS:true};Object.extend(this.options,A||{});this.options.method=this.options.method.toLowerCase();if(Object.isString(this.options.parameters)){this.options.parameters=this.options.parameters.toQueryParams()}else{if(Object.isHash(this.options.parameters)){this.options.parameters=this.options.parameters.toObject()}}}});Ajax.Request=Class.create(Ajax.Base,{_complete:false,initialize:function($super,B,A){$super(A);this.transport=Ajax.getTransport();this.request(B)},request:function(B){this.url=B;this.method=this.options.method;var D=Object.clone(this.options.parameters);if(!["get","post"].include(this.method)){D._method=this.method;this.method="post"}this.parameters=D;if(D=Object.toQueryString(D)){if(this.method=="get"){this.url+=(this.url.include("?")?"&":"?")+D}else{if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){D+="&_="}}}try{var A=new Ajax.Response(this);if(this.options.onCreate){this.options.onCreate(A)}Ajax.Responders.dispatch("onCreate",this,A);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);if(this.options.asynchronous){this.respondToReadyState.bind(this).defer(1)}this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body=this.method=="post"?(this.options.postBody||D):null;this.transport.send(this.body);if(!this.options.asynchronous&&this.transport.overrideMimeType){this.onStateChange()}}catch(C){this.dispatchException(C)}},onStateChange:function(){var A=this.transport.readyState;if(A>1&&!((A==4)&&this._complete)){this.respondToReadyState(this.transport.readyState)}},setRequestHeaders:function(){var E={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){E["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005){E.Connection="close"}}if(typeof this.options.requestHeaders=="object"){var C=this.options.requestHeaders;if(Object.isFunction(C.push)){for(var B=0,D=C.length;B<D;B+=2){E[C[B]]=C[B+1]}}else{$H(C).each(function(F){E[F.key]=F.value})}}for(var A in E){this.transport.setRequestHeader(A,E[A])}},success:function(){var A=this.getStatus();return !A||(A>=200&&A<300)},getStatus:function(){try{return this.transport.status||0}catch(A){return 0}},respondToReadyState:function(A){var C=Ajax.Request.Events[A],B=new Ajax.Response(this);if(C=="Complete"){try{this._complete=true;(this.options["on"+B.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(B,B.headerJSON)}catch(D){this.dispatchException(D)}var E=B.getHeader("Content-type");if(this.options.evalJS=="force"||(this.options.evalJS&&this.isSameOrigin()&&E&&E.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))){this.evalResponse()}}try{(this.options["on"+C]||Prototype.emptyFunction)(B,B.headerJSON);Ajax.Responders.dispatch("on"+C,this,B,B.headerJSON)}catch(D){this.dispatchException(D)}if(C=="Complete"){this.transport.onreadystatechange=Prototype.emptyFunction}},isSameOrigin:function(){var A=this.url.match(/^\s*https?:\/\/[^\/]*/);return !A||(A[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""}))},getHeader:function(A){try{return this.transport.getResponseHeader(A)||null}catch(B){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(e){this.dispatchException(e)}},dispatchException:function(A){(this.options.onException||Prototype.emptyFunction)(this,A);Ajax.Responders.dispatch("onException",this,A)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Response=Class.create({initialize:function(C){this.request=C;var D=this.transport=C.transport,A=this.readyState=D.readyState;if((A>2&&!Prototype.Browser.IE)||A==4){this.status=this.getStatus();this.statusText=this.getStatusText();this.responseText=String.interpret(D.responseText);this.headerJSON=this._getHeaderJSON()}if(A==4){var B=D.responseXML;this.responseXML=Object.isUndefined(B)?null:B;this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(A){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(A){return null}},getResponseHeader:function(A){return this.transport.getResponseHeader(A)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var A=this.getHeader("X-JSON");if(!A){return null}A=decodeURIComponent(escape(A));try{return A.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(B){this.request.dispatchException(B)}},_getResponseJSON:function(){var A=this.request.options;if(!A.evalJSON||(A.evalJSON!="force"&&!(this.getHeader("Content-type")||"").include("application/json"))||this.responseText.blank()){return null}try{return this.responseText.evalJSON(A.sanitizeJSON||!this.request.isSameOrigin())}catch(B){this.request.dispatchException(B)}}});Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,A,C,B){this.container={success:(A.success||A),failure:(A.failure||(A.success?null:A))};B=Object.clone(B);var D=B.onComplete;B.onComplete=(function(E,F){this.updateContent(E.responseText);if(Object.isFunction(D)){D(E,F)}}).bind(this);$super(C,B)},updateContent:function(D){var C=this.container[this.success()?"success":"failure"],A=this.options;if(!A.evalScripts){D=D.stripScripts()}if(C=$(C)){if(A.insertion){if(Object.isString(A.insertion)){var B={};B[A.insertion]=D;C.insert(B)}else{A.insertion(C,D)}}else{C.update(D)}}}});Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,A,C,B){$super(B);this.onComplete=this.options.onComplete;this.frequency=(this.options.frequency||2);this.decay=(this.options.decay||1);this.updater={};this.container=A;this.url=C;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(A){if(this.options.decay){this.decay=(A.responseText==this.lastText?this.decay*this.options.decay:1);this.lastText=A.responseText}this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});function $(B){if(arguments.length>1){for(var A=0,D=[],C=arguments.length;A<C;A++){D.push($(arguments[A]))}return D}if(Object.isString(B)){B=document.getElementById(B)}return Element.extend(B)}if(Prototype.BrowserFeatures.XPath){document._getElementsByXPath=function(F,A){var C=[];var E=document.evaluate(F,$(A)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(var B=0,D=E.snapshotLength;B<D;B++){C.push(Element.extend(E.snapshotItem(B)))}return C}}if(!window.Node){var Node={}}if(!Node.ELEMENT_NODE){Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12})}(function(){var A=this.Element;this.Element=function(D,C){C=C||{};D=D.toLowerCase();var B=Element.cache;if(Prototype.Browser.IE&&C.name){D="<"+D+' name="'+C.name+'">';delete C.name;return Element.writeAttribute(document.createElement(D),C)}if(!B[D]){B[D]=Element.extend(document.createElement(D))}return Element.writeAttribute(B[D].cloneNode(false),C)};Object.extend(this.Element,A||{})}).call(window);Element.cache={};Element.Methods={visible:function(A){return $(A).style.display!="none"},toggle:function(A){A=$(A);Element[Element.visible(A)?"hide":"show"](A);return A},hide:function(A){$(A).style.display="none";return A},show:function(A){$(A).style.display="";return A},remove:function(A){A=$(A);A.parentNode.removeChild(A);return A},update:function(A,B){A=$(A);if(B&&B.toElement){B=B.toElement()}if(Object.isElement(B)){return A.update().insert(B)}B=Object.toHTML(B);A.innerHTML=B.stripScripts();B.evalScripts.bind(B).defer();return A},replace:function(B,C){B=$(B);if(C&&C.toElement){C=C.toElement()}else{if(!Object.isElement(C)){C=Object.toHTML(C);var A=B.ownerDocument.createRange();A.selectNode(B);C.evalScripts.bind(C).defer();C=A.createContextualFragment(C.stripScripts())}}B.parentNode.replaceChild(C,B);return B},insert:function(C,E){C=$(C);if(Object.isString(E)||Object.isNumber(E)||Object.isElement(E)||(E&&(E.toElement||E.toHTML))){E={bottom:E}}var D,F,B,G;for(var A in E){D=E[A];A=A.toLowerCase();F=Element._insertionTranslations[A];if(D&&D.toElement){D=D.toElement()}if(Object.isElement(D)){F(C,D);continue}D=Object.toHTML(D);B=((A=="before"||A=="after")?C.parentNode:C).tagName.toUpperCase();G=Element._getContentFromAnonymousElement(B,D.stripScripts());if(A=="top"||A=="after"){G.reverse()}G.each(F.curry(C));D.evalScripts.bind(D).defer()}return C},wrap:function(B,C,A){B=$(B);if(Object.isElement(C)){$(C).writeAttribute(A||{})}else{if(Object.isString(C)){C=new Element(C,A)}else{C=new Element("div",C)}}if(B.parentNode){B.parentNode.replaceChild(C,B)}C.appendChild(B);return C},inspect:function(B){B=$(B);var A="<"+B.tagName.toLowerCase();$H({id:"id",className:"class"}).each(function(F){var E=F.first(),C=F.last();var D=(B[E]||"").toString();if(D){A+=" "+C+"="+D.inspect(true)}});return A+">"},recursivelyCollect:function(A,C){A=$(A);var B=[];while(A=A[C]){if(A.nodeType==1){B.push(Element.extend(A))}}return B},ancestors:function(A){return $(A).recursivelyCollect("parentNode")},descendants:function(A){return $(A).select("*")},firstDescendant:function(A){A=$(A).firstChild;while(A&&A.nodeType!=1){A=A.nextSibling}return $(A)},immediateDescendants:function(A){if(!(A=$(A).firstChild)){return[]}while(A&&A.nodeType!=1){A=A.nextSibling}if(A){return[A].concat($(A).nextSiblings())}return[]},previousSiblings:function(A){return $(A).recursivelyCollect("previousSibling")},nextSiblings:function(A){return $(A).recursivelyCollect("nextSibling")},siblings:function(A){A=$(A);return A.previousSiblings().reverse().concat(A.nextSiblings())},match:function(B,A){if(Object.isString(A)){A=new Selector(A)}return A.match($(B))},up:function(B,D,A){B=$(B);if(arguments.length==1){return $(B.parentNode)}var C=B.ancestors();return Object.isNumber(D)?C[D]:Selector.findElement(C,D,A)},down:function(B,C,A){B=$(B);if(arguments.length==1){return B.firstDescendant()}return Object.isNumber(C)?B.descendants()[C]:B.select(C)[A||0]},previous:function(B,D,A){B=$(B);if(arguments.length==1){return $(Selector.handlers.previousElementSibling(B))}var C=B.previousSiblings();return Object.isNumber(D)?C[D]:Selector.findElement(C,D,A)},next:function(C,D,B){C=$(C);if(arguments.length==1){return $(Selector.handlers.nextElementSibling(C))}var A=C.nextSiblings();return Object.isNumber(D)?A[D]:Selector.findElement(A,D,B)},select:function(){var A=$A(arguments),B=$(A.shift());return Selector.findChildElements(B,A)},adjacent:function(){var A=$A(arguments),B=$(A.shift());return Selector.findChildElements(B.parentNode,A).without(B)},identify:function(B){B=$(B);var C=B.readAttribute("id"),A=arguments.callee;if(C){return C}do{C="anonymous_element_"+A.counter++}while($(C));B.writeAttribute("id",C);return C},readAttribute:function(C,A){C=$(C);if(Prototype.Browser.IE){var B=Element._attributeTranslations.read;if(B.values[A]){return B.values[A](C,A)}if(B.names[A]){A=B.names[A]}if(A.include(":")){return(!C.attributes||!C.attributes[A])?null:C.attributes[A].value}}return C.getAttribute(A)},writeAttribute:function(E,C,F){E=$(E);var B={},D=Element._attributeTranslations.write;if(typeof C=="object"){B=C}else{B[C]=Object.isUndefined(F)?true:F}for(var A in B){C=D.names[A]||A;F=B[A];if(D.values[A]){C=D.values[A](E,F)}if(F===false||F===null){E.removeAttribute(C)}else{if(F===true){E.setAttribute(C,C)}else{E.setAttribute(C,F)}}}return E},getHeight:function(A){return $(A).getDimensions().height},getWidth:function(A){return $(A).getDimensions().width},classNames:function(A){return new Element.ClassNames(A)},hasClassName:function(A,B){if(!(A=$(A))){return }var C=A.className;return(C.length>0&&(C==B||new RegExp("(^|\\s)"+B+"(\\s|$)").test(C)))},addClassName:function(A,B){if(!(A=$(A))){return }if(!A.hasClassName(B)){A.className+=(A.className?" ":"")+B}return A},removeClassName:function(A,B){if(!(A=$(A))){return }A.className=A.className.replace(new RegExp("(^|\\s+)"+B+"(\\s+|$)")," ").strip();return A},toggleClassName:function(A,B){if(!(A=$(A))){return }return A[A.hasClassName(B)?"removeClassName":"addClassName"](B)},cleanWhitespace:function(B){B=$(B);var C=B.firstChild;while(C){var A=C.nextSibling;if(C.nodeType==3&&!/\S/.test(C.nodeValue)){B.removeChild(C)}C=A}return B},empty:function(A){return $(A).innerHTML.blank()},descendantOf:function(D,C){D=$(D),C=$(C);var F=C;if(D.compareDocumentPosition){return(D.compareDocumentPosition(C)&8)===8}if(D.sourceIndex&&!Prototype.Browser.Opera){var E=D.sourceIndex,B=C.sourceIndex,A=C.nextSibling;if(!A){do{C=C.parentNode}while(!(A=C.nextSibling)&&C.parentNode)}if(A&&A.sourceIndex){return(E>B&&E<A.sourceIndex)}}while(D=D.parentNode){if(D==F){return true}}return false},scrollTo:function(A){A=$(A);var B=A.cumulativeOffset();window.scrollTo(B[0],B[1]);return A},getStyle:function(B,C){B=$(B);C=C=="float"?"cssFloat":C.camelize();var D=B.style[C];if(!D){var A=document.defaultView.getComputedStyle(B,null);D=A?A[C]:null}if(C=="opacity"){return D?parseFloat(D):1}return D=="auto"?null:D},getOpacity:function(A){return $(A).getStyle("opacity")},setStyle:function(B,C){B=$(B);var E=B.style,A;if(Object.isString(C)){B.style.cssText+=";"+C;return C.include("opacity")?B.setOpacity(C.match(/opacity:\s*(\d?\.?\d*)/)[1]):B}for(var D in C){if(D=="opacity"){B.setOpacity(C[D])}else{E[(D=="float"||D=="cssFloat")?(Object.isUndefined(E.styleFloat)?"cssFloat":"styleFloat"):D]=C[D]}}return B},setOpacity:function(A,B){A=$(A);A.style.opacity=(B==1||B==="")?"":(B<0.00001)?0:B;return A},getDimensions:function(C){C=$(C);var G=$(C).getStyle("display");if(G!="none"&&G!=null){return{width:C.offsetWidth,height:C.offsetHeight}}var B=C.style;var F=B.visibility;var D=B.position;var A=B.display;B.visibility="hidden";B.position="absolute";B.display="block";var H=C.clientWidth;var E=C.clientHeight;B.display=A;B.position=D;B.visibility=F;return{width:H,height:E}},makePositioned:function(A){A=$(A);var B=Element.getStyle(A,"position");if(B=="static"||!B){A._madePositioned=true;A.style.position="relative";if(window.opera){A.style.top=0;A.style.left=0}}return A},undoPositioned:function(A){A=$(A);if(A._madePositioned){A._madePositioned=undefined;A.style.position=A.style.top=A.style.left=A.style.bottom=A.style.right=""}return A},makeClipping:function(A){A=$(A);if(A._overflow){return A}A._overflow=Element.getStyle(A,"overflow")||"auto";if(A._overflow!=="hidden"){A.style.overflow="hidden"}return A},undoClipping:function(A){A=$(A);if(!A._overflow){return A}A.style.overflow=A._overflow=="auto"?"":A._overflow;A._overflow=null;return A},cumulativeOffset:function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;B=B.offsetParent}while(B);return Element._returnOffset(C,A)},positionedOffset:function(B){var A=0,D=0;do{A+=B.offsetTop||0;D+=B.offsetLeft||0;B=B.offsetParent;if(B){if(B.tagName=="BODY"){break}var C=Element.getStyle(B,"position");if(C!=="static"){break}}}while(B);return Element._returnOffset(D,A)},absolutize:function(B){B=$(B);if(B.getStyle("position")=="absolute"){return }var D=B.positionedOffset();var F=D[1];var E=D[0];var C=B.clientWidth;var A=B.clientHeight;B._originalLeft=E-parseFloat(B.style.left||0);B._originalTop=F-parseFloat(B.style.top||0);B._originalWidth=B.style.width;B._originalHeight=B.style.height;B.style.position="absolute";B.style.top=F+"px";B.style.left=E+"px";B.style.width=C+"px";B.style.height=A+"px";return B},relativize:function(A){A=$(A);if(A.getStyle("position")=="relative"){return }A.style.position="relative";var C=parseFloat(A.style.top||0)-(A._originalTop||0);var B=parseFloat(A.style.left||0)-(A._originalLeft||0);A.style.top=C+"px";A.style.left=B+"px";A.style.height=A._originalHeight;A.style.width=A._originalWidth;return A},cumulativeScrollOffset:function(B){var A=0,C=0;do{A+=B.scrollTop||0;C+=B.scrollLeft||0;B=B.parentNode}while(B);return Element._returnOffset(C,A)},getOffsetParent:function(A){if(A.offsetParent){return $(A.offsetParent)}if(A==document.body){return $(A)}while((A=A.parentNode)&&A!=document.body){if(Element.getStyle(A,"position")!="static"){return $(A)}}return $(document.body)},viewportOffset:function(D){var A=0,C=0;var B=D;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;if(B.offsetParent==document.body&&Element.getStyle(B,"position")=="absolute"){break}}while(B=B.offsetParent);B=D;do{if(!Prototype.Browser.Opera||B.tagName=="BODY"){A-=B.scrollTop||0;C-=B.scrollLeft||0}}while(B=B.parentNode);return Element._returnOffset(C,A)},clonePosition:function(B,D){var A=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},arguments[2]||{});D=$(D);var E=D.viewportOffset();B=$(B);var F=[0,0];var C=null;if(Element.getStyle(B,"position")=="absolute"){C=B.getOffsetParent();F=C.viewportOffset()}if(C==document.body){F[0]-=document.body.offsetLeft;F[1]-=document.body.offsetTop}if(A.setLeft){B.style.left=(E[0]-F[0]+A.offsetLeft)+"px"}if(A.setTop){B.style.top=(E[1]-F[1]+A.offsetTop)+"px"}if(A.setWidth){B.style.width=D.offsetWidth+"px"}if(A.setHeight){B.style.height=D.offsetHeight+"px"}return B}};Element.Methods.identify.counter=1;Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants});Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}};if(Prototype.Browser.Opera){Element.Methods.getStyle=Element.Methods.getStyle.wrap(function(D,B,C){switch(C){case"left":case"top":case"right":case"bottom":if(D(B,"position")==="static"){return null}case"height":case"width":if(!Element.visible(B)){return null}var E=parseInt(D(B,C),10);if(E!==B["offset"+C.capitalize()]){return E+"px"}var A;if(C==="height"){A=["border-top-width","padding-top","padding-bottom","border-bottom-width"]}else{A=["border-left-width","padding-left","padding-right","border-right-width"]}return A.inject(E,function(F,G){var H=D(B,G);return H===null?F:F-parseInt(H,10)})+"px";default:return D(B,C)}});Element.Methods.readAttribute=Element.Methods.readAttribute.wrap(function(C,A,B){if(B==="title"){return A.title}return C(A,B)})}else{if(Prototype.Browser.IE){Element.Methods.getOffsetParent=Element.Methods.getOffsetParent.wrap(function(C,B){B=$(B);var A=B.getStyle("position");if(A!=="static"){return C(B)}B.setStyle({position:"relative"});var D=C(B);B.setStyle({position:A});return D});$w("positionedOffset viewportOffset").each(function(A){Element.Methods[A]=Element.Methods[A].wrap(function(E,C){C=$(C);var B=C.getStyle("position");if(B!=="static"){return E(C)}var D=C.getOffsetParent();if(D&&D.getStyle("position")==="fixed"){D.setStyle({zoom:1})}C.setStyle({position:"relative"});var F=E(C);C.setStyle({position:B});return F})});Element.Methods.getStyle=function(A,B){A=$(A);B=(B=="float"||B=="cssFloat")?"styleFloat":B.camelize();var C=A.style[B];if(!C&&A.currentStyle){C=A.currentStyle[B]}if(B=="opacity"){if(C=(A.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/)){if(C[1]){return parseFloat(C[1])/100}}return 1}if(C=="auto"){if((B=="width"||B=="height")&&(A.getStyle("display")!="none")){return A["offset"+B.capitalize()]+"px"}return null}return C};Element.Methods.setOpacity=function(B,E){function F(G){return G.replace(/alpha\([^\)]*\)/gi,"")}B=$(B);var A=B.currentStyle;if((A&&!A.hasLayout)||(!A&&B.style.zoom=="normal")){B.style.zoom=1}var D=B.getStyle("filter"),C=B.style;if(E==1||E===""){(D=F(D))?C.filter=D:C.removeAttribute("filter");return B}else{if(E<0.00001){E=0}}C.filter=F(D)+"alpha(opacity="+(E*100)+")";return B};Element._attributeTranslations={read:{names:{"class":"className","for":"htmlFor"},values:{_getAttr:function(A,B){return A.getAttribute(B,2)},_getAttrNode:function(A,C){var B=A.getAttributeNode(C);return B?B.value:""},_getEv:function(A,B){B=A.getAttribute(B);return B?B.toString().slice(23,-2):null},_flag:function(A,B){return $(A).hasAttribute(B)?B:null},style:function(A){return A.style.cssText.toLowerCase()},title:function(A){return A.title}}}};Element._attributeTranslations.write={names:Object.extend({cellpadding:"cellPadding",cellspacing:"cellSpacing"},Element._attributeTranslations.read.names),values:{checked:function(A,B){A.checked=!!B},style:function(A,B){A.style.cssText=B?B:""}}};Element._attributeTranslations.has={};$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc").each(function(A){Element._attributeTranslations.write.names[A.toLowerCase()]=A;Element._attributeTranslations.has[A.toLowerCase()]=A});(function(A){Object.extend(A,{href:A._getAttr,src:A._getAttr,type:A._getAttr,action:A._getAttrNode,disabled:A._flag,checked:A._flag,readonly:A._flag,multiple:A._flag,onload:A._getEv,onunload:A._getEv,onclick:A._getEv,ondblclick:A._getEv,onmousedown:A._getEv,onmouseup:A._getEv,onmouseover:A._getEv,onmousemove:A._getEv,onmouseout:A._getEv,onfocus:A._getEv,onblur:A._getEv,onkeypress:A._getEv,onkeydown:A._getEv,onkeyup:A._getEv,onsubmit:A._getEv,onreset:A._getEv,onselect:A._getEv,onchange:A._getEv})})(Element._attributeTranslations.read.values)}else{if(Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent)){Element.Methods.setOpacity=function(A,B){A=$(A);A.style.opacity=(B==1)?0.999999:(B==="")?"":(B<0.00001)?0:B;return A}}else{if(Prototype.Browser.WebKit){Element.Methods.setOpacity=function(A,B){A=$(A);A.style.opacity=(B==1||B==="")?"":(B<0.00001)?0:B;if(B==1){if(A.tagName=="IMG"&&A.width){A.width++;A.width--}else{try{var D=document.createTextNode(" ");A.appendChild(D);A.removeChild(D)}catch(C){}}}return A};Element.Methods.cumulativeOffset=function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;if(B.offsetParent==document.body){if(Element.getStyle(B,"position")=="absolute"){break}}B=B.offsetParent}while(B);return Element._returnOffset(C,A)}}}}}if(Prototype.Browser.IE||Prototype.Browser.Opera){Element.Methods.update=function(B,C){B=$(B);if(C&&C.toElement){C=C.toElement()}if(Object.isElement(C)){return B.update().insert(C)}C=Object.toHTML(C);var A=B.tagName.toUpperCase();if(A in Element._insertionTranslations.tags){$A(B.childNodes).each(function(D){B.removeChild(D)});Element._getContentFromAnonymousElement(A,C.stripScripts()).each(function(D){B.appendChild(D)})}else{B.innerHTML=C.stripScripts()}C.evalScripts.bind(C).defer();return B}}if("outerHTML" in document.createElement("div")){Element.Methods.replace=function(C,E){C=$(C);if(E&&E.toElement){E=E.toElement()}if(Object.isElement(E)){C.parentNode.replaceChild(E,C);return C}E=Object.toHTML(E);var D=C.parentNode,B=D.tagName.toUpperCase();if(Element._insertionTranslations.tags[B]){var F=C.next();var A=Element._getContentFromAnonymousElement(B,E.stripScripts());D.removeChild(C);if(F){A.each(function(G){D.insertBefore(G,F)})}else{A.each(function(G){D.appendChild(G)})}}else{C.outerHTML=E.stripScripts()}E.evalScripts.bind(E).defer();return C}}Element._returnOffset=function(B,C){var A=[B,C];A.left=B;A.top=C;return A};Element._getContentFromAnonymousElement=function(C,B){var D=new Element("div"),A=Element._insertionTranslations.tags[C];if(A){D.innerHTML=A[0]+B+A[1];A[2].times(function(){D=D.firstChild})}else{D.innerHTML=B}return $A(D.childNodes)};Element._insertionTranslations={before:function(A,B){A.parentNode.insertBefore(B,A)},top:function(A,B){A.insertBefore(B,A.firstChild)},bottom:function(A,B){A.appendChild(B)},after:function(A,B){A.parentNode.insertBefore(B,A.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};(function(){Object.extend(this.tags,{THEAD:this.tags.TBODY,TFOOT:this.tags.TBODY,TH:this.tags.TD})}).call(Element._insertionTranslations);Element.Methods.Simulated={hasAttribute:function(A,C){C=Element._attributeTranslations.has[C]||C;var B=$(A).getAttributeNode(C);return B&&B.specified}};Element.Methods.ByTag={};Object.extend(Element,Element.Methods);if(!Prototype.BrowserFeatures.ElementExtensions&&document.createElement("div").__proto__){window.HTMLElement={};window.HTMLElement.prototype=document.createElement("div").__proto__;Prototype.BrowserFeatures.ElementExtensions=true}Element.extend=(function(){if(Prototype.BrowserFeatures.SpecificElementExtensions){return Prototype.K}var A={},B=Element.Methods.ByTag;var C=Object.extend(function(F){if(!F||F._extendedByPrototype||F.nodeType!=1||F==window){return F}var D=Object.clone(A),E=F.tagName,H,G;if(B[E]){Object.extend(D,B[E])}for(H in D){G=D[H];if(Object.isFunction(G)&&!(H in F)){F[H]=G.methodize()}}F._extendedByPrototype=Prototype.emptyFunction;return F},{refresh:function(){if(!Prototype.BrowserFeatures.ElementExtensions){Object.extend(A,Element.Methods);Object.extend(A,Element.Methods.Simulated)}}});C.refresh();return C})();Element.hasAttribute=function(A,B){if(A.hasAttribute){return A.hasAttribute(B)}return Element.Methods.Simulated.hasAttribute(A,B)};Element.addMethods=function(C){var I=Prototype.BrowserFeatures,D=Element.Methods.ByTag;if(!C){Object.extend(Form,Form.Methods);Object.extend(Form.Element,Form.Element.Methods);Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods)})}if(arguments.length==2){var B=C;C=arguments[1]}if(!B){Object.extend(Element.Methods,C||{})}else{if(Object.isArray(B)){B.each(H)}else{H(B)}}function H(F){F=F.toUpperCase();if(!Element.Methods.ByTag[F]){Element.Methods.ByTag[F]={}}Object.extend(Element.Methods.ByTag[F],C)}function A(L,K,F){F=F||false;for(var N in L){var M=L[N];if(!Object.isFunction(M)){continue}if(!F||!(N in K)){K[N]=M.methodize()}}}function E(L){var F;var K={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(K[L]){F="HTML"+K[L]+"Element"}if(window[F]){return window[F]}F="HTML"+L+"Element";if(window[F]){return window[F]}F="HTML"+L.capitalize()+"Element";if(window[F]){return window[F]}window[F]={};window[F].prototype=document.createElement(L).__proto__;return window[F]}if(I.ElementExtensions){A(Element.Methods,HTMLElement.prototype);A(Element.Methods.Simulated,HTMLElement.prototype,true)}if(I.SpecificElementExtensions){for(var J in Element.Methods.ByTag){var G=E(J);if(Object.isUndefined(G)){continue}A(D[J],G.prototype)}}Object.extend(Element,Element.Methods);delete Element.ByTag;if(Element.extend.refresh){Element.extend.refresh()}Element.cache={}};document.viewport={getDimensions:function(){var A={};var C=Prototype.Browser;$w("width height").each(function(E){var B=E.capitalize();A[E]=(C.WebKit&&!document.evaluate)?self["inner"+B]:(C.Opera)?document.body["client"+B]:document.documentElement["client"+B]});return A},getWidth:function(){return this.getDimensions().width},getHeight:function(){return this.getDimensions().height},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}};var Selector=Class.create({initialize:function(A){this.expression=A.strip();this.compileMatcher()},shouldUseXPath:function(){if(!Prototype.BrowserFeatures.XPath){return false}var A=this.expression;if(Prototype.Browser.WebKit&&(A.include("-of-type")||A.include(":empty"))){return false}if((/(\[[\w-]*?:|:checked)/).test(this.expression)){return false}return true},compileMatcher:function(){if(this.shouldUseXPath()){return this.compileXPathMatcher()}var e=this.expression,ps=Selector.patterns,h=Selector.handlers,c=Selector.criteria,le,p,m;if(Selector._cache[e]){this.matcher=Selector._cache[e];return }this.matcher=["this.matcher = function(root) {","var r = root, h = Selector.handlers, c = false, n;"];while(e&&le!=e&&(/\S/).test(e)){le=e;for(var i in ps){p=ps[i];if(m=e.match(p)){this.matcher.push(Object.isFunction(c[i])?c[i](m):new Template(c[i]).evaluate(m));e=e.replace(m[0],"");break}}}this.matcher.push("return h.unique(n);\n}");eval(this.matcher.join("\n"));Selector._cache[this.expression]=this.matcher},compileXPathMatcher:function(){var E=this.expression,F=Selector.patterns,B=Selector.xpath,D,A;if(Selector._cache[E]){this.xpath=Selector._cache[E];return }this.matcher=[".//*"];while(E&&D!=E&&(/\S/).test(E)){D=E;for(var C in F){if(A=E.match(F[C])){this.matcher.push(Object.isFunction(B[C])?B[C](A):new Template(B[C]).evaluate(A));E=E.replace(A[0],"");break}}}this.xpath=this.matcher.join("");Selector._cache[this.expression]=this.xpath},findElements:function(A){A=A||document;if(this.xpath){return document._getElementsByXPath(this.xpath,A)}return this.matcher(A)},match:function(H){this.tokens=[];var L=this.expression,A=Selector.patterns,E=Selector.assertions;var B,D,F;while(L&&B!==L&&(/\S/).test(L)){B=L;for(var I in A){D=A[I];if(F=L.match(D)){if(E[I]){this.tokens.push([I,Object.clone(F)]);L=L.replace(F[0],"")}else{return this.findElements(document).include(H)}}}}var K=true,C,J;for(var I=0,G;G=this.tokens[I];I++){C=G[0],J=G[1];if(!Selector.assertions[C](H,J)){K=false;break}}return K},toString:function(){return this.expression},inspect:function(){return"#<Selector:"+this.expression.inspect()+">"}});Object.extend(Selector,{_cache:{},xpath:{descendant:"//*",child:"/*",adjacent:"/following-sibling::*[1]",laterSibling:"/following-sibling::*",tagName:function(A){if(A[1]=="*"){return""}return"[local-name()='"+A[1].toLowerCase()+"' or local-name()='"+A[1].toUpperCase()+"']"},className:"[contains(concat(' ', @class, ' '), ' #{1} ')]",id:"[@id='#{1}']",attrPresence:function(A){A[1]=A[1].toLowerCase();return new Template("[@#{1}]").evaluate(A)},attr:function(A){A[1]=A[1].toLowerCase();A[3]=A[5]||A[6];return new Template(Selector.xpath.operators[A[2]]).evaluate(A)},pseudo:function(A){var B=Selector.xpath.pseudos[A[1]];if(!B){return""}if(Object.isFunction(B)){return B(A)}return new Template(Selector.xpath.pseudos[A[1]]).evaluate(A)},operators:{"=":"[@#{1}='#{3}']","!=":"[@#{1}!='#{3}']","^=":"[starts-with(@#{1}, '#{3}')]","$=":"[substring(@#{1}, (string-length(@#{1}) - string-length('#{3}') + 1))='#{3}']","*=":"[contains(@#{1}, '#{3}')]","~=":"[contains(concat(' ', @#{1}, ' '), ' #{3} ')]","|=":"[contains(concat('-', @#{1}, '-'), '-#{3}-')]"},pseudos:{"first-child":"[not(preceding-sibling::*)]","last-child":"[not(following-sibling::*)]","only-child":"[not(preceding-sibling::* or following-sibling::*)]",empty:"[count(*) = 0 and (count(text()) = 0 or translate(text(), ' \t\r\n', '') = '')]",checked:"[@checked]",disabled:"[@disabled]",enabled:"[not(@disabled)]",not:function(B){var H=B[6],G=Selector.patterns,A=Selector.xpath,E,C;var F=[];while(H&&E!=H&&(/\S/).test(H)){E=H;for(var D in G){if(B=H.match(G[D])){C=Object.isFunction(A[D])?A[D](B):new Template(A[D]).evaluate(B);F.push("("+C.substring(1,C.length-1)+")");H=H.replace(B[0],"");break}}}return"[not("+F.join(" and ")+")]"},"nth-child":function(A){return Selector.xpath.pseudos.nth("(count(./preceding-sibling::*) + 1) ",A)},"nth-last-child":function(A){return Selector.xpath.pseudos.nth("(count(./following-sibling::*) + 1) ",A)},"nth-of-type":function(A){return Selector.xpath.pseudos.nth("position() ",A)},"nth-last-of-type":function(A){return Selector.xpath.pseudos.nth("(last() + 1 - position()) ",A)},"first-of-type":function(A){A[6]="1";return Selector.xpath.pseudos["nth-of-type"](A)},"last-of-type":function(A){A[6]="1";return Selector.xpath.pseudos["nth-last-of-type"](A)},"only-of-type":function(A){var B=Selector.xpath.pseudos;return B["first-of-type"](A)+B["last-of-type"](A)},nth:function(E,C){var F,G=C[6],B;if(G=="even"){G="2n+0"}if(G=="odd"){G="2n+1"}if(F=G.match(/^(\d+)$/)){return"["+E+"= "+F[1]+"]"}if(F=G.match(/^(-?\d*)?n(([+-])(\d+))?/)){if(F[1]=="-"){F[1]=-1}var D=F[1]?Number(F[1]):1;var A=F[2]?Number(F[2]):0;B="[((#{fragment} - #{b}) mod #{a} = 0) and ((#{fragment} - #{b}) div #{a} >= 0)]";return new Template(B).evaluate({fragment:E,a:D,b:A})}}}},criteria:{tagName:'n = h.tagName(n, r, "#{1}", c);      c = false;',className:'n = h.className(n, r, "#{1}", c);    c = false;',id:'n = h.id(n, r, "#{1}", c);           c = false;',attrPresence:'n = h.attrPresence(n, r, "#{1}", c); c = false;',attr:function(A){A[3]=(A[5]||A[6]);return new Template('n = h.attr(n, r, "#{1}", "#{3}", "#{2}", c); c = false;').evaluate(A)},pseudo:function(A){if(A[6]){A[6]=A[6].replace(/"/g,'\\"')}return new Template('n = h.pseudo(n, "#{1}", "#{6}", r, c); c = false;').evaluate(A)},descendant:'c = "descendant";',child:'c = "child";',adjacent:'c = "adjacent";',laterSibling:'c = "laterSibling";'},patterns:{laterSibling:/^\s*~\s*/,child:/^\s*>\s*/,adjacent:/^\s*\+\s*/,descendant:/^\s/,tagName:/^\s*(\*|[\w\-]+)(\b|$)?/,id:/^#([\w\-\*]+)(\b|$)/,className:/^\.([\w\-\*]+)(\b|$)/,pseudo:/^:((first|last|nth|nth-last|only)(-child|-of-type)|empty|checked|(en|dis)abled|not)(\((.*?)\))?(\b|$|(?=\s|[:+~>]))/,attrPresence:/^\[([\w]+)\]/,attr:/\[((?:[\w-]*:)?[\w-]+)\s*(?:([!^$*~|]?=)\s*((['"])([^\4]*?)\4|([^'"][^\]]*?)))?\]/},assertions:{tagName:function(A,B){return B[1].toUpperCase()==A.tagName.toUpperCase()},className:function(A,B){return Element.hasClassName(A,B[1])},id:function(A,B){return A.id===B[1]},attrPresence:function(A,B){return Element.hasAttribute(A,B[1])},attr:function(B,C){var A=Element.readAttribute(B,C[1]);return A&&Selector.operators[C[2]](A,C[5]||C[6])}},handlers:{concat:function(B,A){for(var C=0,D;D=A[C];C++){B.push(D)}return B},mark:function(A){var D=Prototype.emptyFunction;for(var B=0,C;C=A[B];B++){C._countedByPrototype=D}return A},unmark:function(A){for(var B=0,C;C=A[B];B++){C._countedByPrototype=undefined}return A},index:function(A,D,G){A._countedByPrototype=Prototype.emptyFunction;if(D){for(var B=A.childNodes,E=B.length-1,C=1;E>=0;E--){var F=B[E];if(F.nodeType==1&&(!G||F._countedByPrototype)){F.nodeIndex=C++}}}else{for(var E=0,C=1,B=A.childNodes;F=B[E];E++){if(F.nodeType==1&&(!G||F._countedByPrototype)){F.nodeIndex=C++}}}},unique:function(B){if(B.length==0){return B}var D=[],E;for(var C=0,A=B.length;C<A;C++){if(!(E=B[C])._countedByPrototype){E._countedByPrototype=Prototype.emptyFunction;D.push(Element.extend(E))}}return Selector.handlers.unmark(D)},descendant:function(A){var D=Selector.handlers;for(var C=0,B=[],E;E=A[C];C++){D.concat(B,E.getElementsByTagName("*"))}return B},child:function(A){var E=Selector.handlers;for(var D=0,C=[],F;F=A[D];D++){for(var B=0,G;G=F.childNodes[B];B++){if(G.nodeType==1&&G.tagName!="!"){C.push(G)}}}return C},adjacent:function(A){for(var C=0,B=[],E;E=A[C];C++){var D=this.nextElementSibling(E);if(D){B.push(D)}}return B},laterSibling:function(A){var D=Selector.handlers;for(var C=0,B=[],E;E=A[C];C++){D.concat(B,Element.nextSiblings(E))}return B},nextElementSibling:function(A){while(A=A.nextSibling){if(A.nodeType==1){return A}}return null},previousElementSibling:function(A){while(A=A.previousSibling){if(A.nodeType==1){return A}}return null},tagName:function(A,H,C,B){var I=C.toUpperCase();var E=[],G=Selector.handlers;if(A){if(B){if(B=="descendant"){for(var F=0,D;D=A[F];F++){G.concat(E,D.getElementsByTagName(C))}return E}else{A=this[B](A)}if(C=="*"){return A}}for(var F=0,D;D=A[F];F++){if(D.tagName.toUpperCase()===I){E.push(D)}}return E}else{return H.getElementsByTagName(C)}},id:function(B,A,H,F){var G=$(H),D=Selector.handlers;if(!G){return[]}if(!B&&A==document){return[G]}if(B){if(F){if(F=="child"){for(var C=0,E;E=B[C];C++){if(G.parentNode==E){return[G]}}}else{if(F=="descendant"){for(var C=0,E;E=B[C];C++){if(Element.descendantOf(G,E)){return[G]}}}else{if(F=="adjacent"){for(var C=0,E;E=B[C];C++){if(Selector.handlers.previousElementSibling(G)==E){return[G]}}}else{B=D[F](B)}}}}for(var C=0,E;E=B[C];C++){if(E==G){return[G]}}return[]}return(G&&Element.descendantOf(G,A))?[G]:[]},className:function(B,A,C,D){if(B&&D){B=this[D](B)}return Selector.handlers.byClassName(B,A,C)},byClassName:function(C,B,F){if(!C){C=Selector.handlers.descendant([B])}var H=" "+F+" ";for(var E=0,D=[],G,A;G=C[E];E++){A=G.className;if(A.length==0){continue}if(A==F||(" "+A+" ").include(H)){D.push(G)}}return D},attrPresence:function(C,B,A,G){if(!C){C=B.getElementsByTagName("*")}if(C&&G){C=this[G](C)}var E=[];for(var D=0,F;F=C[D];D++){if(Element.hasAttribute(F,A)){E.push(F)}}return E},attr:function(A,I,H,J,C,B){if(!A){A=I.getElementsByTagName("*")}if(A&&B){A=this[B](A)}var K=Selector.operators[C],F=[];for(var E=0,D;D=A[E];E++){var G=Element.readAttribute(D,H);if(G===null){continue}if(K(G,J)){F.push(D)}}return F},pseudo:function(B,C,E,A,D){if(B&&D){B=this[D](B)}if(!B){B=A.getElementsByTagName("*")}return Selector.pseudos[C](B,E,A)}},pseudos:{"first-child":function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(Selector.handlers.previousElementSibling(E)){continue}C.push(E)}return C},"last-child":function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(Selector.handlers.nextElementSibling(E)){continue}C.push(E)}return C},"only-child":function(B,G,A){var E=Selector.handlers;for(var D=0,C=[],F;F=B[D];D++){if(!E.previousElementSibling(F)&&!E.nextElementSibling(F)){C.push(F)}}return C},"nth-child":function(B,C,A){return Selector.pseudos.nth(B,C,A)},"nth-last-child":function(B,C,A){return Selector.pseudos.nth(B,C,A,true)},"nth-of-type":function(B,C,A){return Selector.pseudos.nth(B,C,A,false,true)},"nth-last-of-type":function(B,C,A){return Selector.pseudos.nth(B,C,A,true,true)},"first-of-type":function(B,C,A){return Selector.pseudos.nth(B,"1",A,false,true)},"last-of-type":function(B,C,A){return Selector.pseudos.nth(B,"1",A,true,true)},"only-of-type":function(B,D,A){var C=Selector.pseudos;return C["last-of-type"](C["first-of-type"](B,D,A),D,A)},getIndices:function(B,A,C){if(B==0){return A>0?[A]:[]}return $R(1,C).inject([],function(D,E){if(0==(E-A)%B&&(E-A)/B>=0){D.push(E)}return D})},nth:function(A,L,N,K,C){if(A.length==0){return[]}if(L=="even"){L="2n+0"}if(L=="odd"){L="2n+1"}var J=Selector.handlers,I=[],B=[],E;J.mark(A);for(var H=0,D;D=A[H];H++){if(!D.parentNode._countedByPrototype){J.index(D.parentNode,K,C);B.push(D.parentNode)}}if(L.match(/^\d+$/)){L=Number(L);for(var H=0,D;D=A[H];H++){if(D.nodeIndex==L){I.push(D)}}}else{if(E=L.match(/^(-?\d*)?n(([+-])(\d+))?/)){if(E[1]=="-"){E[1]=-1}var O=E[1]?Number(E[1]):1;var M=E[2]?Number(E[2]):0;var P=Selector.pseudos.getIndices(O,M,A.length);for(var H=0,D,F=P.length;D=A[H];H++){for(var G=0;G<F;G++){if(D.nodeIndex==P[G]){I.push(D)}}}}}J.unmark(A);J.unmark(B);return I},empty:function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(E.tagName=="!"||(E.firstChild&&!E.innerHTML.match(/^\s*$/))){continue}C.push(E)}return C},not:function(A,D,I){var G=Selector.handlers,J,C;var H=new Selector(D).findElements(I);G.mark(H);for(var F=0,E=[],B;B=A[F];F++){if(!B._countedByPrototype){E.push(B)}}G.unmark(H);return E},enabled:function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(!E.disabled){C.push(E)}}return C},disabled:function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(E.disabled){C.push(E)}}return C},checked:function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(E.checked){C.push(E)}}return C}},operators:{"=":function(B,A){return B==A},"!=":function(B,A){return B!=A},"^=":function(B,A){return B.startsWith(A)},"$=":function(B,A){return B.endsWith(A)},"*=":function(B,A){return B.include(A)},"~=":function(B,A){return(" "+B+" ").include(" "+A+" ")},"|=":function(B,A){return("-"+B.toUpperCase()+"-").include("-"+A.toUpperCase()+"-")}},split:function(B){var A=[];B.scan(/(([\w#:.~>+()\s-]+|\*|\[.*?\])+)\s*(,|$)/,function(C){A.push(C[1].strip())});return A},matchElements:function(F,G){var E=$$(G),D=Selector.handlers;D.mark(E);for(var C=0,B=[],A;A=F[C];C++){if(A._countedByPrototype){B.push(A)}}D.unmark(E);return B},findElement:function(B,C,A){if(Object.isNumber(C)){A=C;C=false}return Selector.matchElements(B,C||"*")[A||0]},findChildElements:function(E,G){G=Selector.split(G.join(","));var D=[],F=Selector.handlers;for(var C=0,B=G.length,A;C<B;C++){A=new Selector(G[C].strip());F.concat(D,A.findElements(E))}return(B>1)?F.unique(D):D}});if(Prototype.Browser.IE){Object.extend(Selector.handlers,{concat:function(B,A){for(var C=0,D;D=A[C];C++){if(D.tagName!=="!"){B.push(D)}}return B},unmark:function(A){for(var B=0,C;C=A[B];B++){C.removeAttribute("_countedByPrototype")}return A}})}function $$(){return Selector.findChildElements(document,$A(arguments))}var Form={reset:function(A){$(A).reset();return A},serializeElements:function(G,B){if(typeof B!="object"){B={hash:!!B}}else{if(Object.isUndefined(B.hash)){B.hash=true}}var C,F,A=false,E=B.submit;var D=G.inject({},function(H,I){if(!I.disabled&&I.name){C=I.name;F=$(I).getValue();if(F!=null&&(I.type!="submit"||(!A&&E!==false&&(!E||C==E)&&(A=true)))){if(C in H){if(!Object.isArray(H[C])){H[C]=[H[C]]}H[C].push(F)}else{H[C]=F}}}return H});return B.hash?D:Object.toQueryString(D)}};Form.Methods={serialize:function(B,A){return Form.serializeElements(Form.getElements(B),A)},getElements:function(A){return $A($(A).getElementsByTagName("*")).inject([],function(B,C){if(Form.Element.Serializers[C.tagName.toLowerCase()]){B.push(Element.extend(C))}return B})},getInputs:function(G,C,D){G=$(G);var A=G.getElementsByTagName("input");if(!C&&!D){return $A(A).map(Element.extend)}for(var E=0,H=[],F=A.length;E<F;E++){var B=A[E];if((C&&B.type!=C)||(D&&B.name!=D)){continue}H.push(Element.extend(B))}return H},disable:function(A){A=$(A);Form.getElements(A).invoke("disable");return A},enable:function(A){A=$(A);Form.getElements(A).invoke("enable");return A},findFirstElement:function(B){var C=$(B).getElements().findAll(function(D){return"hidden"!=D.type&&!D.disabled});var A=C.findAll(function(D){return D.hasAttribute("tabIndex")&&D.tabIndex>=0}).sortBy(function(D){return D.tabIndex}).first();return A?A:C.find(function(D){return["input","select","textarea"].include(D.tagName.toLowerCase())})},focusFirstElement:function(A){A=$(A);A.findFirstElement().activate();return A},request:function(B,A){B=$(B),A=Object.clone(A||{});var D=A.parameters,C=B.readAttribute("action")||"";if(C.blank()){C=window.location.href}A.parameters=B.serialize(true);if(D){if(Object.isString(D)){D=D.toQueryParams()}Object.extend(A.parameters,D)}if(B.hasAttribute("method")&&!A.method){A.method=B.method}return new Ajax.Request(C,A)}};Form.Element={focus:function(A){$(A).focus();return A},select:function(A){$(A).select();return A}};Form.Element.Methods={serialize:function(A){A=$(A);if(!A.disabled&&A.name){var B=A.getValue();if(B!=undefined){var C={};C[A.name]=B;return Object.toQueryString(C)}}return""},getValue:function(A){A=$(A);var B=A.tagName.toLowerCase();return Form.Element.Serializers[B](A)},setValue:function(A,B){A=$(A);var C=A.tagName.toLowerCase();Form.Element.Serializers[C](A,B);return A},clear:function(A){$(A).value="";return A},present:function(A){return $(A).value!=""},activate:function(A){A=$(A);try{A.focus();if(A.select&&(A.tagName.toLowerCase()!="input"||!["button","reset","submit"].include(A.type))){A.select()}}catch(B){}return A},disable:function(A){A=$(A);A.blur();A.disabled=true;return A},enable:function(A){A=$(A);A.disabled=false;return A}};var Field=Form.Element;var $F=Form.Element.Methods.getValue;Form.Element.Serializers={input:function(A,B){switch(A.type.toLowerCase()){case"checkbox":case"radio":return Form.Element.Serializers.inputSelector(A,B);default:return Form.Element.Serializers.textarea(A,B)}},inputSelector:function(A,B){if(Object.isUndefined(B)){return A.checked?A.value:null}else{A.checked=!!B}},textarea:function(A,B){if(Object.isUndefined(B)){return A.value}else{A.value=B}},select:function(D,A){if(Object.isUndefined(A)){return this[D.type=="select-one"?"selectOne":"selectMany"](D)}else{var C,F,G=!Object.isArray(A);for(var B=0,E=D.length;B<E;B++){C=D.options[B];F=this.optionValue(C);if(G){if(F==A){C.selected=true;return }}else{C.selected=A.include(F)}}}},selectOne:function(B){var A=B.selectedIndex;return A>=0?this.optionValue(B.options[A]):null},selectMany:function(D){var A,E=D.length;if(!E){return null}for(var C=0,A=[];C<E;C++){var B=D.options[C];if(B.selected){A.push(this.optionValue(B))}}return A},optionValue:function(A){return Element.extend(A).hasAttribute("value")?A.value:A.text}};Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,A,B,C){$super(C,B);this.element=$(A);this.lastValue=this.getValue()},execute:function(){var A=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(A)?this.lastValue!=A:String(this.lastValue)!=String(A)){this.callback(this.element,A);this.lastValue=A}}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});Abstract.EventObserver=Class.create({initialize:function(A,B){this.element=$(A);this.callback=B;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form"){this.registerFormCallbacks()}else{this.registerCallback(this.element)}},onElementEvent:function(){var A=this.getValue();if(this.lastValue!=A){this.callback(this.element,A);this.lastValue=A}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(A){if(A.type){switch(A.type.toLowerCase()){case"checkbox":case"radio":Event.observe(A,"click",this.onElementEvent.bind(this));break;default:Event.observe(A,"change",this.onElementEvent.bind(this));break}}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});if(!window.Event){var Event={}}Object.extend(Event,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{},relatedTarget:function(B){var A;switch(B.type){case"mouseover":A=B.fromElement;break;case"mouseout":A=B.toElement;break;default:return null}return Element.extend(A)}});Event.Methods=(function(){var A;if(Prototype.Browser.IE){var B={0:1,1:4,2:2};A=function(D,C){return D.button==B[C]}}else{if(Prototype.Browser.WebKit){A=function(D,C){switch(C){case 0:return D.which==1&&!D.metaKey;case 1:return D.which==1&&D.metaKey;default:return false}}}else{A=function(D,C){return D.which?(D.which===C+1):(D.button===C)}}}return{isLeftClick:function(C){return A(C,0)},isMiddleClick:function(C){return A(C,1)},isRightClick:function(C){return A(C,2)},element:function(D){var C=Event.extend(D).target;return Element.extend(C.nodeType==Node.TEXT_NODE?C.parentNode:C)},findElement:function(D,F){var C=Event.element(D);if(!F){return C}var E=[C].concat(C.ancestors());return Selector.findElement(E,F,0)},pointer:function(C){return{x:C.pageX||(C.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)),y:C.pageY||(C.clientY+(document.documentElement.scrollTop||document.body.scrollTop))}},pointerX:function(C){return Event.pointer(C).x},pointerY:function(C){return Event.pointer(C).y},stop:function(C){Event.extend(C);C.preventDefault();C.stopPropagation();C.stopped=true}}})();Event.extend=(function(){var A=Object.keys(Event.Methods).inject({},function(B,C){B[C]=Event.Methods[C].methodize();return B});if(Prototype.Browser.IE){Object.extend(A,{stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false},inspect:function(){return"[object Event]"}});return function(B){if(!B){return false}if(B._extendedByPrototype){return B}B._extendedByPrototype=Prototype.emptyFunction;var C=Event.pointer(B);Object.extend(B,{target:B.srcElement,relatedTarget:Event.relatedTarget(B),pageX:C.x,pageY:C.y});return Object.extend(B,A)}}else{Event.prototype=Event.prototype||document.createEvent("HTMLEvents").__proto__;Object.extend(Event.prototype,A);return Prototype.K}})();Object.extend(Event,(function(){var B=Event.cache;function C(J){if(J._prototypeEventID){return J._prototypeEventID[0]}arguments.callee.id=arguments.callee.id||1;return J._prototypeEventID=[++arguments.callee.id]}function G(J){if(J&&J.include(":")){return"dataavailable"}return J}function A(J){return B[J]=B[J]||{}}function F(L,J){var K=A(L);return K[J]=K[J]||[]}function H(K,J,L){var O=C(K);var N=F(O,J);if(N.pluck("handler").include(L)){return false}var M=function(P){if(!Event||!Event.extend||(P.eventName&&P.eventName!=J)){return false}Event.extend(P);L.call(K,P)};M.handler=L;N.push(M);return M}function I(M,J,K){var L=F(M,J);return L.find(function(N){return N.handler==K})}function D(M,J,K){var L=A(M);if(!L[J]){return false}L[J]=L[J].without(I(M,J,K))}function E(){for(var K in B){for(var J in B[K]){B[K][J]=null}}}if(window.attachEvent){window.attachEvent("onunload",E)}return{observe:function(L,J,M){L=$(L);var K=G(J);var N=H(L,J,M);if(!N){return L}if(L.addEventListener){L.addEventListener(K,N,false)}else{L.attachEvent("on"+K,N)}return L},stopObserving:function(L,J,M){L=$(L);var O=C(L),K=G(J);if(!M&&J){F(O,J).each(function(P){if(L&&L.stopObserving){L.stopObserving(J,P.handler)}});return L}else{if(!J){Object.keys(A(O)).each(function(P){L.stopObserving(P)});return L}}var N=I(O,J,M);if(!N){return L}if(L.removeEventListener){L.removeEventListener(K,N,false)}else{L.detachEvent("on"+K,N)}D(O,J,M);return L},fire:function(L,K,J){L=$(L);if(L==document&&document.createEvent&&!L.dispatchEvent){L=document.documentElement}var M;if(document.createEvent){M=document.createEvent("HTMLEvents");M.initEvent("dataavailable",true,true)}else{M=document.createEventObject();M.eventType="ondataavailable"}M.eventName=K;M.memo=J||{};if(document.createEvent){L.dispatchEvent(M)}else{L.fireEvent(M.eventType,M)}return Event.extend(M)}}})());Object.extend(Event,Event.Methods);Element.addMethods({fire:Event.fire,observe:Event.observe,stopObserving:Event.stopObserving});Object.extend(document,{fire:Element.Methods.fire.methodize(),observe:Element.Methods.observe.methodize(),stopObserving:Element.Methods.stopObserving.methodize(),loaded:false});(function(){var B;function A(){if(document.loaded){return }if(B){window.clearInterval(B)}document.fire("dom:loaded");document.loaded=true}if(document.addEventListener){if(Prototype.Browser.WebKit){B=window.setInterval(function(){if(/loaded|complete/.test(document.readyState)){A()}},0);Event.observe(window,"load",A)}else{document.addEventListener("DOMContentLoaded",A,false)}}else{document.write("<script id=__onDOMContentLoaded defer src=//:><\/script>");$("__onDOMContentLoaded").onreadystatechange=function(){if(this.readyState=="complete"){this.onreadystatechange=null;A()}}}})();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;var Insertion={Before:function(A,B){return Element.insert(A,{before:B})},Top:function(A,B){return Element.insert(A,{top:B})},Bottom:function(A,B){return Element.insert(A,{bottom:B})},After:function(A,B){return Element.insert(A,{after:B})}};var $continue=new Error('"throw $continue" is deprecated, use "return" instead');var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(B,A,C){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(B,A,C)}this.xcomp=A;this.ycomp=C;this.offset=Element.cumulativeOffset(B);return(C>=this.offset[1]&&C<this.offset[1]+B.offsetHeight&&A>=this.offset[0]&&A<this.offset[0]+B.offsetWidth)},withinIncludingScrolloffsets:function(B,A,D){var C=Element.cumulativeScrollOffset(B);this.xcomp=A+C[0]-this.deltaX;this.ycomp=D+C[1]-this.deltaY;this.offset=Element.cumulativeOffset(B);return(this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+B.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+B.offsetWidth)},overlap:function(B,A){if(!B){return 0}if(B=="vertical"){return((this.offset[1]+A.offsetHeight)-this.ycomp)/A.offsetHeight}if(B=="horizontal"){return((this.offset[0]+A.offsetWidth)-this.xcomp)/A.offsetWidth}},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(A){Position.prepare();return Element.absolutize(A)},relativize:function(A){Position.prepare();return Element.relativize(A)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(B,C,A){A=A||{};return Element.clonePosition(C,B,A)}};if(!document.getElementsByClassName){document.getElementsByClassName=function(B){function A(C){return C.blank()?null:"[contains(concat(' ', @class, ' '), ' "+C+" ')]"}B.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(C,E){E=E.toString().strip();var D=/\s/.test(E)?$w(E).map(A).join(""):A(E);return D?document._getElementsByXPath(".//*"+D,C):[]}:function(E,F){F=F.toString().strip();var G=[],H=(/\s/.test(F)?$w(F):null);if(!H&&!F){return G}var C=$(E).getElementsByTagName("*");F=" "+F+" ";for(var D=0,J,I;J=C[D];D++){if(J.className&&(I=" "+J.className+" ")&&(I.include(F)||(H&&H.all(function(K){return !K.toString().blank()&&I.include(" "+K+" ")})))){G.push(Element.extend(J))}}return G};return function(D,C){return $(C||document.body).getElementsByClassName(D)}}(Element.Methods)}Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(A){this.element=$(A)},_each:function(A){this.element.className.split(/\s+/).select(function(B){return B.length>0})._each(A)},set:function(A){this.element.className=A},add:function(A){if(this.include(A)){return }this.set($A(this).concat(A).join(" "))},remove:function(A){if(!this.include(A)){return }this.set($A(this).without(A).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);Element.addMethods();

var Scriptaculous={Version:"1.8.1",require:function(A){document.write('<script type="text/javascript" src="'+A+'"><\/script>')},REQUIRED_PROTOTYPE:"1.6.0",load:function(){function A(B){var C=B.split(".");return parseInt(C[0])*100000+parseInt(C[1])*1000+parseInt(C[2])}if((typeof Prototype=="undefined")||(typeof Element=="undefined")||(typeof Element.Methods=="undefined")||(A(Prototype.Version)<A(Scriptaculous.REQUIRED_PROTOTYPE))){throw ("script.aculo.us requires the Prototype JavaScript framework >= "+Scriptaculous.REQUIRED_PROTOTYPE)}$A(document.getElementsByTagName("script")).findAll(function(B){return(B.src&&B.src.match(/scriptaculous\.js(\?.*)?$/))}).each(function(C){var D=C.src.replace(/scriptaculous\.js(\?.*)?$/,"");var B=C.src.match(/\?.*load=([a-z,]*)/);(B?B[1]:"builder,effects,dragdrop,controls,slider,sound").split(",").each(function(E){Scriptaculous.require(D+E+".js")})})}};Scriptaculous.load();

String.prototype.parseColor=function(){var A="#";if(this.slice(0,4)=="rgb("){var C=this.slice(4,this.length-1).split(",");var B=0;do{A+=parseInt(C[B]).toColorPart()}while(++B<3)}else{if(this.slice(0,1)=="#"){if(this.length==4){for(var B=1;B<4;B++){A+=(this.charAt(B)+this.charAt(B)).toLowerCase()}}if(this.length==7){A=this.toLowerCase()}}}return(A.length==7?A:(arguments[0]||this))};Element.collectTextNodes=function(A){return $A($(A).childNodes).collect(function(B){return(B.nodeType==3?B.nodeValue:(B.hasChildNodes()?Element.collectTextNodes(B):""))}).flatten().join("")};Element.collectTextNodesIgnoreClass=function(A,B){return $A($(A).childNodes).collect(function(C){return(C.nodeType==3?C.nodeValue:((C.hasChildNodes()&&!Element.hasClassName(C,B))?Element.collectTextNodesIgnoreClass(C,B):""))}).flatten().join("")};Element.setContentZoom=function(A,B){A=$(A);A.setStyle({fontSize:(B/100)+"em"});if(Prototype.Browser.WebKit){window.scrollBy(0,0)}return A};Element.getInlineOpacity=function(A){return $(A).style.opacity||""};Element.forceRerendering=function(A){try{A=$(A);var C=document.createTextNode(" ");A.appendChild(C);A.removeChild(C)}catch(B){}};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(A){return(-Math.cos(A*Math.PI)/2)+0.5},reverse:function(A){return 1-A},flicker:function(A){var A=((-Math.cos(A*Math.PI)/4)+0.75)+Math.random()/4;return A>1?1:A},wobble:function(A){return(-Math.cos(A*Math.PI*(9*A))/2)+0.5},pulse:function(B,A){A=A||5;return(((B%(1/A))*A).round()==0?((B*A*2)-(B*A*2).floor()):1-((B*A*2)-(B*A*2).floor()))},spring:function(A){return 1-(Math.cos(A*4.5*Math.PI)*Math.exp(-A*6))},none:function(A){return 0},full:function(A){return 1}},DefaultOptions:{duration:1,fps:100,sync:false,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(A){var B="position:relative";if(Prototype.Browser.IE){B+=";zoom:1"}A=$(A);$A(A.childNodes).each(function(C){if(C.nodeType==3){C.nodeValue.toArray().each(function(D){A.insertBefore(new Element("span",{style:B}).update(D==" "?String.fromCharCode(160):D),C)});Element.remove(C)}})},multiple:function(B,C){var E;if(((typeof B=="object")||Object.isFunction(B))&&(B.length)){E=B}else{E=$(B).childNodes}var A=Object.extend({speed:0.1,delay:0},arguments[2]||{});var D=A.delay;$A(E).each(function(G,F){new C(G,Object.extend(A,{delay:F*A.speed+D}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(B,C){B=$(B);C=(C||"appear").toLowerCase();var A=Object.extend({queue:{position:"end",scope:(B.id||"global"),limit:1}},arguments[2]||{});Effect[B.visible()?Effect.PAIRS[C][1]:Effect.PAIRS[C][0]](B,A)}};Effect.DefaultOptions.transition=Effect.Transitions.sinoidal;Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[];this.interval=null},_each:function(A){this.effects._each(A)},add:function(B){var C=new Date().getTime();var A=Object.isString(B.options.queue)?B.options.queue:B.options.queue.position;switch(A){case"front":this.effects.findAll(function(D){return D.state=="idle"}).each(function(D){D.startOn+=B.finishOn;D.finishOn+=B.finishOn});break;case"with-last":C=this.effects.pluck("startOn").max()||C;break;case"end":C=this.effects.pluck("finishOn").max()||C;break}B.startOn+=C;B.finishOn+=C;if(!B.options.queue.limit||(this.effects.length<B.options.queue.limit)){this.effects.push(B)}if(!this.interval){this.interval=setInterval(this.loop.bind(this),15)}},remove:function(A){this.effects=this.effects.reject(function(B){return B==A});if(this.effects.length==0){clearInterval(this.interval);this.interval=null}},loop:function(){var C=new Date().getTime();for(var B=0,A=this.effects.length;B<A;B++){this.effects[B]&&this.effects[B].loop(C)}}});Effect.Queues={instances:$H(),get:function(A){if(!Object.isString(A)){return A}return this.instances.get(A)||this.instances.set(A,new Effect.ScopedQueue())}};Effect.Queue=Effect.Queues.get("global");Effect.Base=Class.create({position:null,start:function(options){function codeForEvent(options,eventName){return((options[eventName+"Internal"]?"this.options."+eventName+"Internal(this);":"")+(options[eventName]?"this.options."+eventName+"(this);":""))}if(options&&options.transition===false){options.transition=Effect.Transitions.linear}this.options=Object.extend(Object.extend({},Effect.DefaultOptions),options||{});this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1000;this.finishOn=this.startOn+(this.options.duration*1000);this.fromToDelta=this.options.to-this.options.from;this.totalTime=this.finishOn-this.startOn;this.totalFrames=this.options.fps*this.options.duration;eval('this.render = function(pos){ if (this.state=="idle"){this.state="running";'+codeForEvent(this.options,"beforeSetup")+(this.setup?"this.setup();":"")+codeForEvent(this.options,"afterSetup")+'};if (this.state=="running"){pos=this.options.transition(pos)*'+this.fromToDelta+"+"+this.options.from+";this.position=pos;"+codeForEvent(this.options,"beforeUpdate")+(this.update?"this.update(pos);":"")+codeForEvent(this.options,"afterUpdate")+"}}");this.event("beforeStart");if(!this.options.sync){Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).add(this)}},loop:function(C){if(C>=this.startOn){if(C>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");if(this.finish){this.finish()}this.event("afterFinish");return }var B=(C-this.startOn)/this.totalTime,A=(B*this.totalFrames).round();if(A>this.currentFrame){this.render(B);this.currentFrame=A}}},cancel:function(){if(!this.options.sync){Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this)}this.state="finished"},event:function(A){if(this.options[A+"Internal"]){this.options[A+"Internal"](this)}if(this.options[A]){this.options[A](this)}},inspect:function(){var A=$H();for(property in this){if(!Object.isFunction(this[property])){A.set(property,this[property])}}return"#<Effect:"+A.inspect()+",options:"+$H(this.options).inspect()+">"}});Effect.Parallel=Class.create(Effect.Base,{initialize:function(A){this.effects=A||[];this.start(arguments[1])},update:function(A){this.effects.invoke("render",A)},finish:function(A){this.effects.each(function(B){B.render(1);B.cancel();B.event("beforeFinish");if(B.finish){B.finish(A)}B.event("afterFinish")})}});Effect.Tween=Class.create(Effect.Base,{initialize:function(C,F,E){C=Object.isString(C)?$(C):C;var B=$A(arguments),D=B.last(),A=B.length==5?B[3]:null;this.method=Object.isFunction(D)?D.bind(C):Object.isFunction(C[D])?C[D].bind(C):function(G){C[D]=G};this.start(Object.extend({from:F,to:E},A||{}))},update:function(A){this.method(A)}});Effect.Event=Class.create(Effect.Base,{initialize:function(){this.start(Object.extend({duration:0},arguments[0]||{}))},update:Prototype.emptyFunction});Effect.Opacity=Class.create(Effect.Base,{initialize:function(B){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}if(Prototype.Browser.IE&&(!this.element.currentStyle.hasLayout)){this.element.setStyle({zoom:1})}var A=Object.extend({from:this.element.getOpacity()||0,to:1},arguments[1]||{});this.start(A)},update:function(A){this.element.setOpacity(A)}});Effect.Move=Class.create(Effect.Base,{initialize:function(B){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(A)},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");if(this.options.mode=="absolute"){this.options.x=this.options.x-this.originalLeft;this.options.y=this.options.y-this.originalTop}},update:function(A){this.element.setStyle({left:(this.options.x*A+this.originalLeft).round()+"px",top:(this.options.y*A+this.originalTop).round()+"px"})}});Effect.MoveBy=function(B,A,C){return new Effect.Move(B,Object.extend({x:C,y:A},arguments[3]||{}))};Effect.Scale=Class.create(Effect.Base,{initialize:function(B,C){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:C},arguments[2]||{});this.start(A)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(B){this.originalStyle[B]=this.element.style[B]}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var A=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(B){if(A.indexOf(B)>0){this.fontSize=parseFloat(A);this.fontSizeType=B}}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=="box"){this.dims=[this.element.offsetHeight,this.element.offsetWidth]}if(/^content/.test(this.options.scaleMode)){this.dims=[this.element.scrollHeight,this.element.scrollWidth]}if(!this.dims){this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]}},update:function(A){var B=(this.options.scaleFrom/100)+(this.factor*A);if(this.options.scaleContent&&this.fontSize){this.element.setStyle({fontSize:this.fontSize*B+this.fontSizeType})}this.setDimensions(this.dims[0]*B,this.dims[1]*B)},finish:function(A){if(this.restoreAfterFinish){this.element.setStyle(this.originalStyle)}},setDimensions:function(A,D){var E={};if(this.options.scaleX){E.width=D.round()+"px"}if(this.options.scaleY){E.height=A.round()+"px"}if(this.options.scaleFromCenter){var C=(A-this.dims[0])/2;var B=(D-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY){E.top=this.originalTop-C+"px"}if(this.options.scaleX){E.left=this.originalLeft-B+"px"}}else{if(this.options.scaleY){E.top=-C+"px"}if(this.options.scaleX){E.left=-B+"px"}}}this.element.setStyle(E)}});Effect.Highlight=Class.create(Effect.Base,{initialize:function(B){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(A)},setup:function(){if(this.element.getStyle("display")=="none"){this.cancel();return }this.oldStyle={};if(!this.options.keepBackgroundImage){this.oldStyle.backgroundImage=this.element.getStyle("background-image");this.element.setStyle({backgroundImage:"none"})}if(!this.options.endcolor){this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")}if(!this.options.restorecolor){this.options.restorecolor=this.element.getStyle("background-color")}this._base=$R(0,2).map(function(A){return parseInt(this.options.startcolor.slice(A*2+1,A*2+3),16)}.bind(this));this._delta=$R(0,2).map(function(A){return parseInt(this.options.endcolor.slice(A*2+1,A*2+3),16)-this._base[A]}.bind(this))},update:function(A){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(B,C,D){return B+((this._base[D]+(this._delta[D]*A)).round().toColorPart())}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}});Effect.ScrollTo=function(D){var C=arguments[1]||{},B=document.viewport.getScrollOffsets(),E=$(D).cumulativeOffset(),A=(window.height||document.body.scrollHeight)-document.viewport.getHeight();if(C.offset){E[1]+=C.offset}return new Effect.Tween(null,B.top,E[1]>A?A:E[1],C,function(F){scrollTo(B.left,F.round())})};Effect.Fade=function(C){C=$(C);var A=C.getInlineOpacity();var B=Object.extend({from:C.getOpacity()||1,to:0,afterFinishInternal:function(D){if(D.options.to!=0){return }D.element.hide().setStyle({opacity:A})}},arguments[1]||{});return new Effect.Opacity(C,B)};Effect.Appear=function(B){B=$(B);var A=Object.extend({from:(B.getStyle("display")=="none"?0:B.getOpacity()||0),to:1,afterFinishInternal:function(C){C.element.forceRerendering()},beforeSetup:function(C){C.element.setOpacity(C.options.from).show()}},arguments[1]||{});return new Effect.Opacity(B,A)};Effect.Puff=function(B){B=$(B);var A={opacity:B.getInlineOpacity(),position:B.getStyle("position"),top:B.style.top,left:B.style.left,width:B.style.width,height:B.style.height};return new Effect.Parallel([new Effect.Scale(B,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new Effect.Opacity(B,{sync:true,to:0})],Object.extend({duration:1,beforeSetupInternal:function(C){Position.absolutize(C.effects[0].element)},afterFinishInternal:function(C){C.effects[0].element.hide().setStyle(A)}},arguments[1]||{}))};Effect.BlindUp=function(A){A=$(A);A.makeClipping();return new Effect.Scale(A,0,Object.extend({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(B){B.element.hide().undoClipping()}},arguments[1]||{}))};Effect.BlindDown=function(B){B=$(B);var A=B.getDimensions();return new Effect.Scale(B,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:A.height,originalWidth:A.width},restoreAfterFinish:true,afterSetup:function(C){C.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(C){C.element.undoClipping()}},arguments[1]||{}))};Effect.SwitchOff=function(B){B=$(B);var A=B.getInlineOpacity();return new Effect.Appear(B,Object.extend({duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(C){new Effect.Scale(C.element,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(D){D.element.makePositioned().makeClipping()},afterFinishInternal:function(D){D.element.hide().undoClipping().undoPositioned().setStyle({opacity:A})}})}},arguments[1]||{}))};Effect.DropOut=function(B){B=$(B);var A={top:B.getStyle("top"),left:B.getStyle("left"),opacity:B.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(B,{x:0,y:100,sync:true}),new Effect.Opacity(B,{sync:true,to:0})],Object.extend({duration:0.5,beforeSetup:function(C){C.effects[0].element.makePositioned()},afterFinishInternal:function(C){C.effects[0].element.hide().undoPositioned().setStyle(A)}},arguments[1]||{}))};Effect.Shake=function(D){D=$(D);var B=Object.extend({distance:20,duration:0.5},arguments[1]||{});var E=parseFloat(B.distance);var C=parseFloat(B.duration)/10;var A={top:D.getStyle("top"),left:D.getStyle("left")};return new Effect.Move(D,{x:E,y:0,duration:C,afterFinishInternal:function(F){new Effect.Move(F.element,{x:-E*2,y:0,duration:C*2,afterFinishInternal:function(G){new Effect.Move(G.element,{x:E*2,y:0,duration:C*2,afterFinishInternal:function(H){new Effect.Move(H.element,{x:-E*2,y:0,duration:C*2,afterFinishInternal:function(I){new Effect.Move(I.element,{x:E*2,y:0,duration:C*2,afterFinishInternal:function(J){new Effect.Move(J.element,{x:-E,y:0,duration:C,afterFinishInternal:function(K){K.element.undoPositioned().setStyle(A)}})}})}})}})}})}})};Effect.SlideDown=function(C){C=$(C).cleanWhitespace();var A=C.down().getStyle("bottom");var B=C.getDimensions();return new Effect.Scale(C,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:B.height,originalWidth:B.width},restoreAfterFinish:true,afterSetup:function(D){D.element.makePositioned();D.element.down().makePositioned();if(window.opera){D.element.setStyle({top:""})}D.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(D){D.element.down().setStyle({bottom:(D.dims[0]-D.element.clientHeight)+"px"})},afterFinishInternal:function(D){D.element.undoClipping().undoPositioned();D.element.down().undoPositioned().setStyle({bottom:A})}},arguments[1]||{}))};Effect.SlideUp=function(C){C=$(C).cleanWhitespace();var A=C.down().getStyle("bottom");var B=C.getDimensions();return new Effect.Scale(C,window.opera?0:1,Object.extend({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:B.height,originalWidth:B.width},restoreAfterFinish:true,afterSetup:function(D){D.element.makePositioned();D.element.down().makePositioned();if(window.opera){D.element.setStyle({top:""})}D.element.makeClipping().show()},afterUpdateInternal:function(D){D.element.down().setStyle({bottom:(D.dims[0]-D.element.clientHeight)+"px"})},afterFinishInternal:function(D){D.element.hide().undoClipping().undoPositioned();D.element.down().undoPositioned().setStyle({bottom:A})}},arguments[1]||{}))};Effect.Squish=function(A){return new Effect.Scale(A,window.opera?1:0,{restoreAfterFinish:true,beforeSetup:function(B){B.element.makeClipping()},afterFinishInternal:function(B){B.element.hide().undoClipping()}})};Effect.Grow=function(C){C=$(C);var B=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{});var A={top:C.style.top,left:C.style.left,height:C.style.height,width:C.style.width,opacity:C.getInlineOpacity()};var G=C.getDimensions();var H,F;var E,D;switch(B.direction){case"top-left":H=F=E=D=0;break;case"top-right":H=G.width;F=D=0;E=-G.width;break;case"bottom-left":H=E=0;F=G.height;D=-G.height;break;case"bottom-right":H=G.width;F=G.height;E=-G.width;D=-G.height;break;case"center":H=G.width/2;F=G.height/2;E=-G.width/2;D=-G.height/2;break}return new Effect.Move(C,{x:H,y:F,duration:0.01,beforeSetup:function(I){I.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(I){new Effect.Parallel([new Effect.Opacity(I.element,{sync:true,to:1,from:0,transition:B.opacityTransition}),new Effect.Move(I.element,{x:E,y:D,sync:true,transition:B.moveTransition}),new Effect.Scale(I.element,100,{scaleMode:{originalHeight:G.height,originalWidth:G.width},sync:true,scaleFrom:window.opera?1:0,transition:B.scaleTransition,restoreAfterFinish:true})],Object.extend({beforeSetup:function(J){J.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(J){J.effects[0].element.undoClipping().undoPositioned().setStyle(A)}},B))}})};Effect.Shrink=function(C){C=$(C);var B=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{});var A={top:C.style.top,left:C.style.left,height:C.style.height,width:C.style.width,opacity:C.getInlineOpacity()};var F=C.getDimensions();var E,D;switch(B.direction){case"top-left":E=D=0;break;case"top-right":E=F.width;D=0;break;case"bottom-left":E=0;D=F.height;break;case"bottom-right":E=F.width;D=F.height;break;case"center":E=F.width/2;D=F.height/2;break}return new Effect.Parallel([new Effect.Opacity(C,{sync:true,to:0,from:1,transition:B.opacityTransition}),new Effect.Scale(C,window.opera?1:0,{sync:true,transition:B.scaleTransition,restoreAfterFinish:true}),new Effect.Move(C,{x:E,y:D,sync:true,transition:B.moveTransition})],Object.extend({beforeStartInternal:function(G){G.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(G){G.effects[0].element.hide().undoClipping().undoPositioned().setStyle(A)}},B))};Effect.Pulsate=function(C){C=$(C);var B=arguments[1]||{};var A=C.getInlineOpacity();var E=B.transition||Effect.Transitions.sinoidal;var D=function(F){return E(1-Effect.Transitions.pulse(F,B.pulses))};D.bind(E);return new Effect.Opacity(C,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(F){F.element.setStyle({opacity:A})}},B),{transition:D}))};Effect.Fold=function(B){B=$(B);var A={top:B.style.top,left:B.style.left,width:B.style.width,height:B.style.height};B.makeClipping();return new Effect.Scale(B,5,Object.extend({scaleContent:false,scaleX:false,afterFinishInternal:function(C){new Effect.Scale(B,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(D){D.element.hide().undoClipping().setStyle(A)}})}},arguments[1]||{}))};Effect.Morph=Class.create(Effect.Base,{initialize:function(C){this.element=$(C);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({style:{}},arguments[1]||{});if(!Object.isString(A.style)){this.style=$H(A.style)}else{if(A.style.include(":")){this.style=A.style.parseStyle()}else{this.element.addClassName(A.style);this.style=$H(this.element.getStyles());this.element.removeClassName(A.style);var B=this.element.getStyles();this.style=this.style.reject(function(D){return D.value==B[D.key]});A.afterFinishInternal=function(D){D.element.addClassName(D.options.style);D.transforms.each(function(E){D.element.style[E.style]=""})}}}this.start(A)},setup:function(){function A(B){if(!B||["rgba(0, 0, 0, 0)","transparent"].include(B)){B="#ffffff"}B=B.parseColor();return $R(0,2).map(function(C){return parseInt(B.slice(C*2+1,C*2+3),16)})}this.transforms=this.style.map(function(G){var F=G[0],E=G[1],D=null;if(E.parseColor("#zzzzzz")!="#zzzzzz"){E=E.parseColor();D="color"}else{if(F=="opacity"){E=parseFloat(E);if(Prototype.Browser.IE&&(!this.element.currentStyle.hasLayout)){this.element.setStyle({zoom:1})}}else{if(Element.CSS_LENGTH.test(E)){var C=E.match(/^([\+\-]?[0-9\.]+)(.*)$/);E=parseFloat(C[1]);D=(C.length==3)?C[2]:null}}}var B=this.element.getStyle(F);return{style:F.camelize(),originalValue:D=="color"?A(B):parseFloat(B||0),targetValue:D=="color"?A(E):E,unit:D}}.bind(this)).reject(function(B){return((B.originalValue==B.targetValue)||(B.unit!="color"&&(isNaN(B.originalValue)||isNaN(B.targetValue))))})},update:function(A){var D={},B,C=this.transforms.length;while(C--){D[(B=this.transforms[C]).style]=B.unit=="color"?"#"+(Math.round(B.originalValue[0]+(B.targetValue[0]-B.originalValue[0])*A)).toColorPart()+(Math.round(B.originalValue[1]+(B.targetValue[1]-B.originalValue[1])*A)).toColorPart()+(Math.round(B.originalValue[2]+(B.targetValue[2]-B.originalValue[2])*A)).toColorPart():(B.originalValue+(B.targetValue-B.originalValue)*A).toFixed(3)+(B.unit===null?"":B.unit)}this.element.setStyle(D,true)}});Effect.Transform=Class.create({initialize:function(A){this.tracks=[];this.options=arguments[1]||{};this.addTracks(A)},addTracks:function(A){A.each(function(B){B=$H(B);var C=B.values().first();this.tracks.push($H({ids:B.keys().first(),effect:Effect.Morph,options:{style:C}}))}.bind(this));return this},play:function(){return new Effect.Parallel(this.tracks.map(function(A){var D=A.get("ids"),C=A.get("effect"),B=A.get("options");var E=[$(D)||$$(D)].flatten();return E.map(function(F){return new C(F,Object.extend({sync:true},B))})}).flatten(),this.options)}});Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex");Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/;String.__parseStyleElement=document.createElement("div");String.prototype.parseStyle=function(){var B,A=$H();if(Prototype.Browser.WebKit){B=new Element("div",{style:this}).style}else{String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>';B=String.__parseStyleElement.childNodes[0].style}Element.CSS_PROPERTIES.each(function(C){if(B[C]){A.set(C,B[C])}});if(Prototype.Browser.IE&&this.include("opacity")){A.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1])}return A};if(document.defaultView&&document.defaultView.getComputedStyle){Element.getStyles=function(B){var A=document.defaultView.getComputedStyle($(B),null);return Element.CSS_PROPERTIES.inject({},function(C,D){C[D]=A[D];return C})}}else{Element.getStyles=function(B){B=$(B);var A=B.currentStyle,C;C=Element.CSS_PROPERTIES.inject({},function(D,E){D[E]=A[E];return D});if(!C.opacity){C.opacity=B.getOpacity()}return C}}Effect.Methods={morph:function(A,B){A=$(A);new Effect.Morph(A,Object.extend({style:B},arguments[2]||{}));return A},visualEffect:function(C,E,B){C=$(C);var D=E.dasherize().camelize(),A=D.charAt(0).toUpperCase()+D.substring(1);new Effect[A](C,B);return C},highlight:function(B,A){B=$(B);new Effect.Highlight(B,A);return B}};$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(A){Effect.Methods[A]=function(C,B){C=$(C);Effect[A.charAt(0).toUpperCase()+A.substring(1)](C,B);return C}});$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(A){Effect.Methods[A]=Element[A]});Element.addMethods(Effect.Methods);

if(typeof Effect=="undefined"){throw ("controls.js requires including script.aculo.us' effects.js library")}var Autocompleter={};Autocompleter.Base=Class.create({baseInitialize:function(B,C,A){B=$(B);this.element=B;this.update=$(C);this.hasFocus=false;this.changed=false;this.active=false;this.index=0;this.entryCount=0;this.oldElementValue=this.element.value;if(this.setOptions){this.setOptions(A)}else{this.options=A||{}}this.options.paramName=this.options.paramName||this.element.name;this.options.tokens=this.options.tokens||[];this.options.frequency=this.options.frequency||0.4;this.options.minChars=this.options.minChars||1;this.options.onShow=this.options.onShow||function(D,E){if(!E.style.position||E.style.position=="absolute"){E.style.position="absolute";Position.clone(D,E,{setHeight:false,offsetTop:D.offsetHeight})}Effect.Appear(E,{duration:0.15})};this.options.onHide=this.options.onHide||function(D,E){new Effect.Fade(E,{duration:0.15})};if(typeof (this.options.tokens)=="string"){this.options.tokens=new Array(this.options.tokens)}if(!this.options.tokens.include("\n")){this.options.tokens.push("\n")}this.observer=null;this.element.setAttribute("autocomplete","off");Element.hide(this.update);Event.observe(this.element,"blur",this.onBlur.bindAsEventListener(this));Event.observe(this.element,"keypress",this.onKeyPress.bindAsEventListener(this))},show:function(){if(Element.getStyle(this.update,"display")=="none"){this.options.onShow(this.element,this.update)}if(!this.iefix&&(Prototype.Browser.IE)&&(Element.getStyle(this.update,"position")=="absolute")){new Insertion.After(this.update,'<iframe id="'+this.update.id+'_iefix" style="display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" src="javascript:false;" frameborder="0" scrolling="no"></iframe>');this.iefix=$(this.update.id+"_iefix")}if(this.iefix){setTimeout(this.fixIEOverlapping.bind(this),50)}},fixIEOverlapping:function(){Position.clone(this.update,this.iefix,{setTop:(!this.update.style.height)});this.iefix.style.zIndex=1;this.update.style.zIndex=2;Element.show(this.iefix)},hide:function(){this.stopIndicator();if(Element.getStyle(this.update,"display")!="none"){this.options.onHide(this.element,this.update)}if(this.iefix){Element.hide(this.iefix)}},startIndicator:function(){if(this.options.indicator){Element.show(this.options.indicator)}},stopIndicator:function(){if(this.options.indicator){Element.hide(this.options.indicator)}},onKeyPress:function(A){if(this.active){switch(A.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry();Event.stop(A);case Event.KEY_ESC:this.hide();this.active=false;Event.stop(A);return ;case Event.KEY_LEFT:case Event.KEY_RIGHT:return ;case Event.KEY_UP:this.markPrevious();this.render();Event.stop(A);return ;case Event.KEY_DOWN:this.markNext();this.render();Event.stop(A);return }}else{if(A.keyCode==Event.KEY_TAB||A.keyCode==Event.KEY_RETURN||(Prototype.Browser.WebKit>0&&A.keyCode==0)){return }}this.changed=true;this.hasFocus=true;if(this.observer){clearTimeout(this.observer)}this.observer=setTimeout(this.onObserverEvent.bind(this),this.options.frequency*1000)},activate:function(){this.changed=false;this.hasFocus=true;this.getUpdatedChoices()},onHover:function(B){var A=Event.findElement(B,"LI");if(this.index!=A.autocompleteIndex){this.index=A.autocompleteIndex;this.render()}Event.stop(B)},onClick:function(B){var A=Event.findElement(B,"LI");this.index=A.autocompleteIndex;this.selectEntry();this.hide()},onBlur:function(A){setTimeout(this.hide.bind(this),250);this.hasFocus=false;this.active=false},render:function(){if(this.entryCount>0){for(var A=0;A<this.entryCount;A++){this.index==A?Element.addClassName(this.getEntry(A),"selected"):Element.removeClassName(this.getEntry(A),"selected")}if(this.hasFocus){this.show();this.active=true}}else{this.active=false;this.hide()}},markPrevious:function(){if(this.index>0){this.index--}else{this.index=this.entryCount-1}this.getEntry(this.index).scrollIntoView(true)},markNext:function(){if(this.index<this.entryCount-1){this.index++}else{this.index=0}this.getEntry(this.index).scrollIntoView(false)},getEntry:function(A){return this.update.firstChild.childNodes[A]},getCurrentEntry:function(){return this.getEntry(this.index)},selectEntry:function(){this.active=false;this.updateElement(this.getCurrentEntry())},updateElement:function(F){if(this.options.updateElement){this.options.updateElement(F);return }var D="";if(this.options.select){var A=$(F).select("."+this.options.select)||[];if(A.length>0){D=Element.collectTextNodes(A[0],this.options.select)}}else{D=Element.collectTextNodesIgnoreClass(F,"informal")}var C=this.getTokenBounds();if(C[0]!=-1){var E=this.element.value.substr(0,C[0]);var B=this.element.value.substr(C[0]).match(/^\s+/);if(B){E+=B[0]}this.element.value=E+D+this.element.value.substr(C[1])}else{this.element.value=D}this.oldElementValue=this.element.value;this.element.focus();if(this.options.afterUpdateElement){this.options.afterUpdateElement(this.element,F)}},updateChoices:function(C){if(!this.changed&&this.hasFocus){this.update.innerHTML=C;Element.cleanWhitespace(this.update);Element.cleanWhitespace(this.update.down());if(this.update.firstChild&&this.update.down().childNodes){this.entryCount=this.update.down().childNodes.length;for(var A=0;A<this.entryCount;A++){var B=this.getEntry(A);B.autocompleteIndex=A;this.addObservers(B)}}else{this.entryCount=0}this.stopIndicator();this.index=0;if(this.entryCount==1&&this.options.autoSelect){this.selectEntry();this.hide()}else{this.render()}}},addObservers:function(A){Event.observe(A,"mouseover",this.onHover.bindAsEventListener(this));Event.observe(A,"click",this.onClick.bindAsEventListener(this))},onObserverEvent:function(){this.changed=false;this.tokenBounds=null;if(this.getToken().length>=this.options.minChars){this.getUpdatedChoices()}else{this.active=false;this.hide()}this.oldElementValue=this.element.value},getToken:function(){var A=this.getTokenBounds();return this.element.value.substring(A[0],A[1]).strip()},getTokenBounds:function(){if(null!=this.tokenBounds){return this.tokenBounds}var E=this.element.value;if(E.strip().empty()){return[-1,0]}var F=arguments.callee.getFirstDifferencePos(E,this.oldElementValue);var H=(F==this.oldElementValue.length?1:0);var D=-1,C=E.length;var G;for(var B=0,A=this.options.tokens.length;B<A;++B){G=E.lastIndexOf(this.options.tokens[B],F+H-1);if(G>D){D=G}G=E.indexOf(this.options.tokens[B],F+H);if(-1!=G&&G<C){C=G}}return(this.tokenBounds=[D+1,C])}});Autocompleter.Base.prototype.getTokenBounds.getFirstDifferencePos=function(C,A){var D=Math.min(C.length,A.length);for(var B=0;B<D;++B){if(C[B]!=A[B]){return B}}return D};Ajax.Autocompleter=Class.create(Autocompleter.Base,{initialize:function(C,D,B,A){this.baseInitialize(C,D,A);this.options.asynchronous=true;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=B},getUpdatedChoices:function(){this.startIndicator();var A=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(this.getToken());this.options.parameters=this.options.callback?this.options.callback(this.element,A):A;if(this.options.defaultParams){this.options.parameters+="&"+this.options.defaultParams}new Ajax.Request(this.url,this.options)},onComplete:function(A){this.updateChoices(A.responseText)}});Autocompleter.Local=Class.create(Autocompleter.Base,{initialize:function(B,D,C,A){this.baseInitialize(B,D,A);this.options.array=C},getUpdatedChoices:function(){this.updateChoices(this.options.selector(this))},setOptions:function(A){this.options=Object.extend({choices:10,partialSearch:true,partialChars:2,ignoreCase:true,fullSearch:false,selector:function(B){var D=[];var C=[];var H=B.getToken();var G=0;for(var E=0;E<B.options.array.length&&D.length<B.options.choices;E++){var F=B.options.array[E];var I=B.options.ignoreCase?F.toLowerCase().indexOf(H.toLowerCase()):F.indexOf(H);while(I!=-1){if(I==0&&F.length!=H.length){D.push("<li><strong>"+F.substr(0,H.length)+"</strong>"+F.substr(H.length)+"</li>");break}else{if(H.length>=B.options.partialChars&&B.options.partialSearch&&I!=-1){if(B.options.fullSearch||/\s/.test(F.substr(I-1,1))){C.push("<li>"+F.substr(0,I)+"<strong>"+F.substr(I,H.length)+"</strong>"+F.substr(I+H.length)+"</li>");break}}}I=B.options.ignoreCase?F.toLowerCase().indexOf(H.toLowerCase(),I+1):F.indexOf(H,I+1)}}if(C.length){D=D.concat(C.slice(0,B.options.choices-D.length))}return"<ul>"+D.join("")+"</ul>"}},A||{})}});Field.scrollFreeActivate=function(A){setTimeout(function(){Field.activate(A)},1)};Ajax.InPlaceEditor=Class.create({initialize:function(C,B,A){this.url=B;this.element=C=$(C);this.prepareOptions();this._controls={};arguments.callee.dealWithDeprecatedOptions(A);Object.extend(this.options,A||{});if(!this.options.formId&&this.element.id){this.options.formId=this.element.id+"-inplaceeditor";if($(this.options.formId)){this.options.formId=""}}if(this.options.externalControl){this.options.externalControl=$(this.options.externalControl)}if(!this.options.externalControl){this.options.externalControlOnly=false}this._originalBackground=this.element.getStyle("background-color")||"transparent";this.element.title=this.options.clickToEditText;this._boundCancelHandler=this.handleFormCancellation.bind(this);this._boundComplete=(this.options.onComplete||Prototype.emptyFunction).bind(this);this._boundFailureHandler=this.handleAJAXFailure.bind(this);this._boundSubmitHandler=this.handleFormSubmission.bind(this);this._boundWrapperHandler=this.wrapUp.bind(this);this.registerListeners()},checkForEscapeOrReturn:function(A){if(!this._editing||A.ctrlKey||A.altKey||A.shiftKey){return }if(Event.KEY_ESC==A.keyCode){this.handleFormCancellation(A)}else{if(Event.KEY_RETURN==A.keyCode){this.handleFormSubmission(A)}}},createControl:function(G,C,B){var E=this.options[G+"Control"];var F=this.options[G+"Text"];if("button"==E){var A=document.createElement("input");A.type="submit";A.value=F;A.className="editor_"+G+"_button";if("cancel"==G){A.onclick=this._boundCancelHandler}this._form.appendChild(A);this._controls[G]=A}else{if("link"==E){var D=document.createElement("a");D.href="#";D.appendChild(document.createTextNode(F));D.onclick="cancel"==G?this._boundCancelHandler:this._boundSubmitHandler;D.className="editor_"+G+"_link";if(B){D.className+=" "+B}this._form.appendChild(D);this._controls[G]=D}}},createEditField:function(){var C=(this.options.loadTextURL?this.options.loadingText:this.getText());var B;if(1>=this.options.rows&&!/\r|\n/.test(this.getText())){B=document.createElement("input");B.type="text";var A=this.options.size||this.options.cols||0;if(0<A){B.size=A}}else{B=document.createElement("textarea");B.rows=(1>=this.options.rows?this.options.autoRows:this.options.rows);B.cols=this.options.cols||40}B.name=this.options.paramName;B.value=C;B.className="editor_field";if(this.options.submitOnBlur){B.onblur=this._boundSubmitHandler}this._controls.editor=B;if(this.options.loadTextURL){this.loadExternalText()}this._form.appendChild(this._controls.editor)},createForm:function(){var B=this;function A(D,E){var C=B.options["text"+D+"Controls"];if(!C||E===false){return }B._form.appendChild(document.createTextNode(C))}this._form=$(document.createElement("form"));this._form.id=this.options.formId;this._form.addClassName(this.options.formClassName);this._form.onsubmit=this._boundSubmitHandler;this.createEditField();if("textarea"==this._controls.editor.tagName.toLowerCase()){this._form.appendChild(document.createElement("br"))}if(this.options.onFormCustomization){this.options.onFormCustomization(this,this._form)}A("Before",this.options.okControl||this.options.cancelControl);this.createControl("ok",this._boundSubmitHandler);A("Between",this.options.okControl&&this.options.cancelControl);this.createControl("cancel",this._boundCancelHandler,"editor_cancel");A("After",this.options.okControl||this.options.cancelControl)},destroy:function(){if(this._oldInnerHTML){this.element.innerHTML=this._oldInnerHTML}this.leaveEditMode();this.unregisterListeners()},enterEditMode:function(A){if(this._saving||this._editing){return }this._editing=true;this.triggerCallback("onEnterEditMode");if(this.options.externalControl){this.options.externalControl.hide()}this.element.hide();this.createForm();this.element.parentNode.insertBefore(this._form,this.element);if(!this.options.loadTextURL){this.postProcessEditField()}if(A){Event.stop(A)}},enterHover:function(A){if(this.options.hoverClassName){this.element.addClassName(this.options.hoverClassName)}if(this._saving){return }this.triggerCallback("onEnterHover")},getText:function(){return this.element.innerHTML},handleAJAXFailure:function(A){this.triggerCallback("onFailure",A);if(this._oldInnerHTML){this.element.innerHTML=this._oldInnerHTML;this._oldInnerHTML=null}},handleFormCancellation:function(A){this.wrapUp();if(A){Event.stop(A)}},handleFormSubmission:function(D){var B=this._form;var C=$F(this._controls.editor);this.prepareSubmission();var E=this.options.callback(B,C)||"";if(Object.isString(E)){E=E.toQueryParams()}E.editorId=this.element.id;if(this.options.htmlResponse){var A=Object.extend({evalScripts:true},this.options.ajaxOptions);Object.extend(A,{parameters:E,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler});new Ajax.Updater({success:this.element},this.url,A)}else{var A=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(A,{parameters:E,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler});new Ajax.Request(this.url,A)}if(D){Event.stop(D)}},leaveEditMode:function(){this.element.removeClassName(this.options.savingClassName);this.removeForm();this.leaveHover();this.element.style.backgroundColor=this._originalBackground;this.element.show();if(this.options.externalControl){this.options.externalControl.show()}this._saving=false;this._editing=false;this._oldInnerHTML=null;this.triggerCallback("onLeaveEditMode")},leaveHover:function(A){if(this.options.hoverClassName){this.element.removeClassName(this.options.hoverClassName)}if(this._saving){return }this.triggerCallback("onLeaveHover")},loadExternalText:function(){this._form.addClassName(this.options.loadingClassName);this._controls.editor.disabled=true;var A=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(A,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(C){this._form.removeClassName(this.options.loadingClassName);var B=C.responseText;if(this.options.stripLoadedTextTags){B=B.stripTags()}this._controls.editor.value=B;this._controls.editor.disabled=false;this.postProcessEditField()}.bind(this),onFailure:this._boundFailureHandler});new Ajax.Request(this.options.loadTextURL,A)},postProcessEditField:function(){var A=this.options.fieldPostCreation;if(A){$(this._controls.editor)["focus"==A?"focus":"activate"]()}},prepareOptions:function(){this.options=Object.clone(Ajax.InPlaceEditor.DefaultOptions);Object.extend(this.options,Ajax.InPlaceEditor.DefaultCallbacks);[this._extraDefaultOptions].flatten().compact().each(function(A){Object.extend(this.options,A)}.bind(this))},prepareSubmission:function(){this._saving=true;this.removeForm();this.leaveHover();this.showSaving()},registerListeners:function(){this._listeners={};var A;$H(Ajax.InPlaceEditor.Listeners).each(function(B){A=this[B.value].bind(this);this._listeners[B.key]=A;if(!this.options.externalControlOnly){this.element.observe(B.key,A)}if(this.options.externalControl){this.options.externalControl.observe(B.key,A)}}.bind(this))},removeForm:function(){if(!this._form){return }this._form.remove();this._form=null;this._controls={}},showSaving:function(){this._oldInnerHTML=this.element.innerHTML;this.element.innerHTML=this.options.savingText;this.element.addClassName(this.options.savingClassName);this.element.style.backgroundColor=this._originalBackground;this.element.show()},triggerCallback:function(B,A){if("function"==typeof this.options[B]){this.options[B](this,A)}},unregisterListeners:function(){$H(this._listeners).each(function(A){if(!this.options.externalControlOnly){this.element.stopObserving(A.key,A.value)}if(this.options.externalControl){this.options.externalControl.stopObserving(A.key,A.value)}}.bind(this))},wrapUp:function(A){this.leaveEditMode();this._boundComplete(A,this.element)}});Object.extend(Ajax.InPlaceEditor.prototype,{dispose:Ajax.InPlaceEditor.prototype.destroy});Ajax.InPlaceCollectionEditor=Class.create(Ajax.InPlaceEditor,{initialize:function($super,C,B,A){this._extraDefaultOptions=Ajax.InPlaceCollectionEditor.DefaultOptions;$super(C,B,A)},createEditField:function(){var A=document.createElement("select");A.name=this.options.paramName;A.size=1;this._controls.editor=A;this._collection=this.options.collection||[];if(this.options.loadCollectionURL){this.loadCollection()}else{this.checkForExternalText()}this._form.appendChild(this._controls.editor)},loadCollection:function(){this._form.addClassName(this.options.loadingClassName);this.showLoadingText(this.options.loadingCollectionText);var options=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(options,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(transport){var js=transport.responseText.strip();if(!/^\[.*\]$/.test(js)){throw"Server returned an invalid collection representation."}this._collection=eval(js);this.checkForExternalText()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadCollectionURL,options)},showLoadingText:function(B){this._controls.editor.disabled=true;var A=this._controls.editor.firstChild;if(!A){A=document.createElement("option");A.value="";this._controls.editor.appendChild(A);A.selected=true}A.update((B||"").stripScripts().stripTags())},checkForExternalText:function(){this._text=this.getText();if(this.options.loadTextURL){this.loadExternalText()}else{this.buildOptionList()}},loadExternalText:function(){this.showLoadingText(this.options.loadingText);var A=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(A,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(B){this._text=B.responseText.strip();this.buildOptionList()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadTextURL,A)},buildOptionList:function(){this._form.removeClassName(this.options.loadingClassName);this._collection=this._collection.map(function(D){return 2===D.length?D:[D,D].flatten()});var B=("value" in this.options)?this.options.value:this._text;var A=this._collection.any(function(D){return D[0]==B}.bind(this));this._controls.editor.update("");var C;this._collection.each(function(E,D){C=document.createElement("option");C.value=E[0];C.selected=A?E[0]==B:0==D;C.appendChild(document.createTextNode(E[1]));this._controls.editor.appendChild(C)}.bind(this));this._controls.editor.disabled=false;Field.scrollFreeActivate(this._controls.editor)}});Ajax.InPlaceEditor.prototype.initialize.dealWithDeprecatedOptions=function(A){if(!A){return }function B(C,D){if(C in A||D===undefined){return }A[C]=D}B("cancelControl",(A.cancelLink?"link":(A.cancelButton?"button":A.cancelLink==A.cancelButton==false?false:undefined)));B("okControl",(A.okLink?"link":(A.okButton?"button":A.okLink==A.okButton==false?false:undefined)));B("highlightColor",A.highlightcolor);B("highlightEndColor",A.highlightendcolor)};Object.extend(Ajax.InPlaceEditor,{DefaultOptions:{ajaxOptions:{},autoRows:3,cancelControl:"link",cancelText:"cancel",clickToEditText:"Click to edit",externalControl:null,externalControlOnly:false,fieldPostCreation:"activate",formClassName:"inplaceeditor-form",formId:null,highlightColor:"#ffff99",highlightEndColor:"#ffffff",hoverClassName:"",htmlResponse:true,loadingClassName:"inplaceeditor-loading",loadingText:"Loading...",okControl:"button",okText:"ok",paramName:"value",rows:1,savingClassName:"inplaceeditor-saving",savingText:"Saving...",size:0,stripLoadedTextTags:false,submitOnBlur:false,textAfterControls:"",textBeforeControls:"",textBetweenControls:""},DefaultCallbacks:{callback:function(A){return Form.serialize(A)},onComplete:function(B,A){new Effect.Highlight(A,{startcolor:this.options.highlightColor,keepBackgroundImage:true})},onEnterEditMode:null,onEnterHover:function(A){A.element.style.backgroundColor=A.options.highlightColor;if(A._effect){A._effect.cancel()}},onFailure:function(B,A){alert("Error communication with the server: "+B.responseText.stripTags())},onFormCustomization:null,onLeaveEditMode:null,onLeaveHover:function(A){A._effect=new Effect.Highlight(A.element,{startcolor:A.options.highlightColor,endcolor:A.options.highlightEndColor,restorecolor:A._originalBackground,keepBackgroundImage:true})}},Listeners:{click:"enterEditMode",keydown:"checkForEscapeOrReturn",mouseover:"enterHover",mouseout:"leaveHover"}});Ajax.InPlaceCollectionEditor.DefaultOptions={loadingCollectionText:"Loading options..."};Form.Element.DelayedObserver=Class.create({initialize:function(B,A,C){this.delay=A||0.5;this.element=$(B);this.callback=C;this.timer=null;this.lastValue=$F(this.element);Event.observe(this.element,"keyup",this.delayedListener.bindAsEventListener(this))},delayedListener:function(A){if(this.lastValue==$F(this.element)){return }if(this.timer){clearTimeout(this.timer)}this.timer=setTimeout(this.onTimerEvent.bind(this),this.delay*1000);this.lastValue=$F(this.element)},onTimerEvent:function(){this.timer=null;this.callback(this.element,$F(this.element))}});

function jiveToggleTab(E,F){var D=$(E);if(D){var A=$(D.id+"-tab")}if(D&&D.style.display=="none"){if(A){A.className="jive-body-tab jive-body-tabcurrent";D.style.display="block"}for(var C=0;C<F.length;C++){var G=$(F[C]);if(G){var B=$(G.id+"-tab")}if(B){B.className="jive-body-tab";G.style.display="none"}}}}function jiveToggleOptions(A){if($(A+"-form").style.display!="none"){Element.hide(A+"-form");$(A+"-hdr").className="jive-compose-hdr-opt-closed"}else{$(A+"-form").style.display="block";$(A+"-hdr").className="jive-compose-hdr-opt"}}function jiveShowTopicFilter(A){if($(A).style.display!="none"){Element.toggle($(A))}else{Element.toggle($(A))}}function jiveToggleSpaceDetails(A){Element.toggle($(A));if($(A).style.display!="none"){$(A+"-less").style.display="";$(A+"-more").style.display="none"}else{$(A+"-more").style.display="";$(A+"-less").style.display="none"}}function jiveToggleSpaceDetails2(A){if($(A).className=="jive-space-namedesc-full"){$(A).className="";$(A+"-more").style.display="";$(A+"-less").style.display="none"}else{$(A).className="jive-space-namedesc-full";$(A+"-less").style.display="";$(A+"-more").style.display="none"}}function callOnLoad(A){if(window.addEventListener){window.addEventListener("load",A,false)}else{if(window.attachEvent){window.attachEvent("onload",A)}else{window.onload=A}}}Jive=Class.create();Jive.AlertMessage=function(B){var A=arguments[1]||{};new Effect.Appear(B,{queue:"front",scope:B,duration:1,beforeStart:A.beforeStart,afterFinish:function(C){new Pause(1);new Effect.Fade(B,{queue:"end",scope:C,duration:1,afterFinish:A.afterFinish})}})};function Pause(B,A){this.duration=B*1000;this.busywork=null;this.runner=0;if(arguments.length==2){this.busywork=A}this.pause(this.duration)}Pause.prototype.pause=function(B){if((B==null)||(B<0)){return }var A=(new Date()).getTime()+B;while(true){if((new Date()).getTime()>A){break}this.runner++;if(this.busywork!=null){this.busywork(this.runner)}}};var TimeoutExecutor=Class.create();TimeoutExecutor.prototype={initialize:function(B,A){this.callback=B;this.timeout=A;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timeoutID=setTimeout(this.onTimerEvent.bind(this),this.timeout)},onTimerEvent:function(){try{this.currentlyExecuting=true;if(this.callback&&this.callback instanceof Function){this.callback()}}finally{this.currentlyExecuting=false;delete this.timeoutID}},cancel:function(){if(!this.currentlyExecuting&&this.timeoutID){clearTimeout(this.timeoutID);delete this.timeoutID}},reset:function(){if(!this.currentlyExecuting&&this.timeoutID){clearTimeout(this.timeoutID);delete this.timeoutID;this.registerCallback()}}};var QuickUserProfile=Class.create();QuickUserProfile.prototype={initialize:function(D,C,B,A){this.loadingContent='<strong class="jive-tooltip2-loading">'+B+"</strong>";this.userTT=D;this.userTTURL=C.indexOf("?")<0?C+"?tooltip=true":C+"&tooltip=true";this.textErrorTT=A;this.jiveUserTips=new SuperNote("jiveTT",{showDelay:700,hideDelay:30,cssProp:"visibility",cssVis:"visible",cssHid:"hidden"})},getUserProfileTooltip:function(A){this.cancelTooltip();$(this.userTT).innerHTML=this.loadingContent;this.timeoutExecutor=new TimeoutExecutor(this.getUserProfile.bind(this,A),700)},getUserProfile:function(B){var A=this;new Ajax.Updater(this.userTT,this.userTTURL,{method:"get",parameters:{targetUser:B},onError:function(){$(this.userTT).innerHTML=A.textTTError}})},cancelTooltip:function(){if(this.timeoutExecutor){this.timeoutExecutor.cancel()}}};

if(typeof Zapatec=="undefined"){Zapatec=function(){}}Zapatec.version="07-01";if(typeof Zapatec.zapatecPath=="undefined"){Zapatec.zapatecPath=function(){if(document.documentElement){var A=document.documentElement.innerHTML.match(/<script[^>]+src="([^"]*zapatec(-core|-src)?.js[^"]*)"/i);if(A&&A.length>=2){A=A[1].split("?");A=A[0].split("/");if(Array.prototype.pop){A.pop()}else{A.length-=1}return A.length?A.join("/")+"/":""}}return""}()}if(typeof Zapatec=="undefined"){Zapatec=function(){}}Zapatec.Utils={};Zapatec.Utils.getAbsolutePos=function(E,G){var A=0,D=0;if(!G){var C=/^div$/i.test(E.tagName);if(C&&E.scrollLeft){A=E.scrollLeft}if(C&&E.scrollTop){D=E.scrollTop}}var F={x:E.offsetLeft-A,y:E.offsetTop-D};if(E.offsetParent){var B=this.getAbsolutePos(E.offsetParent);F.x+=B.x;F.y+=B.y}return F};Zapatec.Utils.getElementOffset=function(C){var D=iTop=iWidth=iHeight=0;if(C.getBoundingClientRect){var F=C.getBoundingClientRect();D=F.left;iTop=F.top;iWidth=F.right-D;iHeight=F.bottom-iTop;D+=Zapatec.Utils.getPageScrollX()-2;iTop+=Zapatec.Utils.getPageScrollY()-2}else{iWidth=C.offsetWidth;iHeight=C.offsetHeight;var A=Zapatec.Utils.getStyleProperty(C,"position");if(A=="fixed"){D=C.offsetLeft+Zapatec.Utils.getPageScrollX();iTop=C.offsetTop+Zapatec.Utils.getPageScrollY()}else{if(A=="absolute"){while(C){var B=C.tagName;if(B){B=B.toLowerCase();if(B!="body"&&B!="html"){D+=parseInt(C.offsetLeft,10)||0;iTop+=parseInt(C.offsetTop,10)||0}}C=C.offsetParent;var B=C?C.tagName:null;if(B){B=B.toLowerCase();if(B!="body"&&B!="html"){D-=C.scrollLeft;iTop-=C.scrollTop}}}}else{var E=C;while(E){D+=parseInt(E.offsetLeft,10)||0;iTop+=parseInt(E.offsetTop,10)||0;E=E.offsetParent}E=C;while(E.parentNode){E=E.parentNode;var B=E.tagName;if(B){B=B.toLowerCase();if(B!="body"&&B!="html"&&B!="tr"){D-=E.scrollLeft;iTop-=E.scrollTop}}}}}}return{left:D,top:iTop,x:D,y:iTop,width:iWidth,height:iHeight}};Zapatec.Utils.getElementOffsetScrollable=function(B){var A=Zapatec.Utils.getElementOffset(B);if(B.scrollLeft){A.left-=B.scrollLeft;A.x=A.left}if(B.scrollTop){A.top-=B.scrollTop;A.y=A.top}return A};Zapatec.Utils.fixBoxPosition=function(E,A){var C=Zapatec.Utils.getPageScrollX();var B=Zapatec.Utils.getPageScrollY();var D=Zapatec.Utils.getWindowSize();A=parseInt(A,10)||0;if(E.x<C){E.x=C+A}if(E.y<B){E.y=B+A}if(E.x+E.width>C+D.width){E.x=C+D.width-E.width-A}if(E.y+E.height>B+D.height){E.y=B+D.height-E.height-A}};Zapatec.Utils.isRelated=function(C,A){A||(A=window.event);var E=A.relatedTarget;if(!E){var B=A.type;if(B=="mouseover"){E=A.fromElement}else{if(B=="mouseout"){E=A.toElement}}}try{while(E){if(E==C){return true}E=E.parentNode}}catch(D){}return false};Zapatec.Utils.removeClass=function(E,D){if(!(E&&E.className)){return }var A=E.className.split(" ");var B=[];for(var C=A.length;C>0;){if(A[--C]!=D){B[B.length]=A[C]}}E.className=B.join(" ")};Zapatec.Utils.addClass=function(B,A){Zapatec.Utils.removeClass(B,A);B.className+=" "+A};Zapatec.Utils.getElement=function(A){if(Zapatec.is_ie){return window.event.srcElement}else{return A.currentTarget}};Zapatec.Utils.getTargetElement=function(A){if(Zapatec.is_ie){return window.event.srcElement}else{return A.target}};Zapatec.Utils.getMousePos=function(D){D||(D=window.event);var C={pageX:0,pageY:0,clientX:0,clientY:0};if(D){var B=(typeof D.pageX!="undefined");var A=(typeof D.clientX!="undefined");if(B||A){if(B){C.pageX=D.pageX;C.pageY=D.pageY}else{C.pageX=D.clientX+Zapatec.Utils.getPageScrollX();C.pageY=D.clientY+Zapatec.Utils.getPageScrollY()}if(A){C.clientX=D.clientX;C.clientY=D.clientY}else{C.clientX=D.pageX-Zapatec.Utils.getPageScrollX();C.clientY=D.pageY-Zapatec.Utils.getPageScrollY()}}}return C};Zapatec.Utils.stopEvent=function(A){A||(A=window.event);if(A){if(Zapatec.is_ie){A.cancelBubble=true;A.returnValue=false}else{A.preventDefault();A.stopPropagation()}}return false};Zapatec.Utils.removeOnUnload=[];Zapatec.Utils.addEvent=function(C,D,B,A){if(C.addEventListener){if(!A){A=false}C.addEventListener(D,B,A)}else{if(C.attachEvent){C.detachEvent("on"+D,B);C.attachEvent("on"+D,B);if(A){C.setCapture(false)}}}Zapatec.Utils.removeOnUnload.push({element:C,event:D,listener:B,capture:A})};Zapatec.Utils.removeEvent=function(E,F,D,C){if(E.removeEventListener){E.removeEventListener(F,D,C)}else{if(E.detachEvent){E.detachEvent("on"+F,D)}}for(var B=Zapatec.Utils.removeOnUnload.length-1;B>=0;B--){var A=Zapatec.Utils.removeOnUnload[B];if(!A){continue}if(E==A.element&&F==A.event&&D==A.listener&&C==A.capture){Zapatec.Utils.removeOnUnload[B]=null;Zapatec.Utils.removeEvent(A.element,A.event,A.listener,A.capture)}}};Zapatec.Utils.createElement=function(D,C,A){var B=null;if(window.self.document.createElementNS){B=window.self.document.createElementNS("http://www.w3.org/1999/xhtml",D)}else{B=document.createElement(D)}if(typeof C!="undefined"&&C!=null){C.appendChild(B)}if(!A){if(Zapatec.is_ie){B.setAttribute("unselectable",true)}if(Zapatec.is_gecko){B.style.setProperty("-moz-user-select","none","")}}return B};Zapatec.Utils.writeCookie=function(C,E,D,F,B){E=escape(E);var A=C+"="+E,G;if(D){A+=";domain="+D}if(F){A+=";path="+F}if(B){G=new Date();G.setTime(B*86400000+G.getTime());A+=";expires="+G.toGMTString()}document.cookie=A};Zapatec.Utils.getCookie=function(B){var E=B+"=";var D=0;while(D<document.cookie.length){var A=D+E.length;if(document.cookie.substring(D,A)==E){var C=document.cookie.indexOf(";",A);if(C==-1){C=document.cookie.length}return unescape(document.cookie.substring(A,C))}D=document.cookie.indexOf(" ",D)+1;if(D==0){break}}return null};Zapatec.Utils.makePref=function(C){function D(E){if(typeof E=="object"&&!E){return"null"}else{if(typeof E=="number"||typeof E=="boolean"){return E}else{if(typeof E=="string"){return'"'+E.replace(/\x22/,"\\22")+'"'}else{return null}}}}var A="",B;for(B in C){A+=(A?",'":"'")+B+"':"+D(C[B])}return A};Zapatec.Utils.loadPref=function(B){var A=zapatecTransport.parseJson({strJson:"{"+B+"}"});if(!A||typeof A!="object"){A={}}return A};Zapatec.Utils.mergeObjects=function(A,C){for(var B in C){A[B]=C[B]}};Zapatec.Utils.__wch_id=0;Zapatec.Utils.createWCH=function(A){var C=null;A=A||document.body;if(Zapatec.is_ie&&!Zapatec.is_ie5){var B="filter:progid:DXImageTransform.Microsoft.alpha(style=0,opacity=0);";var D="WCH"+(++Zapatec.Utils.__wch_id);A.insertAdjacentHTML("beforeEnd",'<iframe id="'+D+'" scrolling="no" frameborder="0" style="z-index:0;position:absolute;visibility:hidden;'+B+'border:0;top:0;left:0;width:0;height:0" src="javascript:false"></iframe>');C=document.getElementById(D)}return C};Zapatec.Utils.setupWCH_el=function(I,A,D){if(I){var J=Zapatec.Utils.getAbsolutePos(A),F=J.x,M=J.y,C=F+A.offsetWidth,L=M+A.offsetHeight;if(D){var K=Zapatec.Utils.getAbsolutePos(D),H=K.x,E=K.y,G=H+D.offsetWidth,B=E+D.offsetHeight;if(F>H){F=H}if(M>E){M=E}if(C<G){C=G}if(L<B){L=B}}Zapatec.Utils.setupWCH(I,F,M,C-F,L-M)}};Zapatec.Utils.setupWCH=function(E,A,F,B,D){if(E){var C=E.style;(typeof A!="undefined")&&(C.left=A+"px");(typeof F!="undefined")&&(C.top=F+"px");(typeof B!="undefined")&&(C.width=B+"px");(typeof D!="undefined")&&(C.height=D+"px");C.visibility="inherit"}};Zapatec.Utils.hideWCH=function(A){if(A){A.style.visibility="hidden"}};Zapatec.Utils.getPageScrollY=function(){if(window.pageYOffset){return window.pageYOffset}else{if(document.body&&document.body.scrollTop){return document.body.scrollTop}else{if(document.documentElement&&document.documentElement.scrollTop){return document.documentElement.scrollTop}}}return 0};Zapatec.Utils.getPageScrollX=function(){if(window.pageXOffset){return window.pageXOffset}else{if(document.body&&document.body.scrollLeft){return document.body.scrollLeft}else{if(document.documentElement&&document.documentElement.scrollLeft){return document.documentElement.scrollLeft}}}return 0};Zapatec.ScrollWithWindow={};Zapatec.ScrollWithWindow.list=[];Zapatec.ScrollWithWindow.stickiness=0.25;Zapatec.ScrollWithWindow.register=function(A){var C=A.offsetTop||0;var B=A.offsetLeft||0;Zapatec.ScrollWithWindow.list.push({node:A,origTop:C,origLeft:B});if(!Zapatec.ScrollWithWindow.interval){Zapatec.ScrollWithWindow.on()}};Zapatec.ScrollWithWindow.unregister=function(A){for(var B=0;B<Zapatec.ScrollWithWindow.list.length;B++){var C=Zapatec.ScrollWithWindow.list[B];if(A==C.node){Zapatec.ScrollWithWindow.list.splice(B,1);if(!Zapatec.ScrollWithWindow.list.length){Zapatec.ScrollWithWindow.off()}return }}};Zapatec.ScrollWithWindow.moveTop=function(C){Zapatec.ScrollWithWindow.top+=(C-Zapatec.ScrollWithWindow.top)*Zapatec.ScrollWithWindow.stickiness;if(Math.abs(Zapatec.ScrollWithWindow.top-C)<=1){Zapatec.ScrollWithWindow.top=C}for(var B=0;B<Zapatec.ScrollWithWindow.list.length;B++){var D=Zapatec.ScrollWithWindow.list[B];var A=D.node;A.style.position="absolute";if(!D.origTop&&D.origTop!==0){D.origTop=parseInt(A.style.top)||0}A.style.top=D.origTop+parseInt(Zapatec.ScrollWithWindow.top)+"px"}};Zapatec.ScrollWithWindow.moveLeft=function(C){Zapatec.ScrollWithWindow.left+=(C-Zapatec.ScrollWithWindow.left)*Zapatec.ScrollWithWindow.stickiness;if(Math.abs(Zapatec.ScrollWithWindow.left-C)<=1){Zapatec.ScrollWithWindow.left=C}for(var B=0;B<Zapatec.ScrollWithWindow.list.length;B++){var D=Zapatec.ScrollWithWindow.list[B];var A=D.node;A.style.position="absolute";if(!D.origLeft&&D.origLeft!==0){D.origLeft=parseInt(A.style.left)||0}A.style.left=D.origLeft+parseInt(Zapatec.ScrollWithWindow.left)+"px"}};Zapatec.ScrollWithWindow.cycle=function(){var B=Zapatec.Utils.getPageScrollY();var A=Zapatec.Utils.getPageScrollX();if(B!=Zapatec.ScrollWithWindow.top){Zapatec.ScrollWithWindow.moveTop(B)}if(A!=Zapatec.ScrollWithWindow.left){Zapatec.ScrollWithWindow.moveLeft(A)}};Zapatec.ScrollWithWindow.on=function(){if(Zapatec.ScrollWithWindow.interval){return }Zapatec.ScrollWithWindow.top=Zapatec.Utils.getPageScrollY();Zapatec.ScrollWithWindow.left=Zapatec.Utils.getPageScrollX();Zapatec.ScrollWithWindow.interval=setInterval(Zapatec.ScrollWithWindow.cycle,50)};Zapatec.ScrollWithWindow.off=function(){if(!Zapatec.ScrollWithWindow.interval){return }clearInterval(Zapatec.ScrollWithWindow.interval);Zapatec.ScrollWithWindow.interval=null};Zapatec.FixateOnScreen={};Zapatec.FixateOnScreen.getExpression=function(B,A){return"Zapatec.Utils.getPageScroll"+A.toUpperCase()+"() + "+B};Zapatec.FixateOnScreen.parseCoordinates=function(B){if(!this.isRegistered(B)){return false}var A=0;var D=0;var C=B.style;if(Zapatec.is_ie&&!Zapatec.is_ie7){A=C.getExpression("left").split(" ");A=parseInt(A[A.length-1],10);D=C.getExpression("top").split(" ");D=parseInt(D[D.length-1],10)}else{A=parseInt(C.left,10);D=parseInt(C.top,10)}A+=Zapatec.Utils.getPageScrollX();D+=Zapatec.Utils.getPageScrollY();return{x:A,y:D}};Zapatec.FixateOnScreen.correctCoordinates=function(A,B){position={x:A,y:B};if(position.x||position.x===0){position.x-=Zapatec.Utils.getPageScrollX();if(Zapatec.is_ie&&!Zapatec.is_ie7){position.x=this.getExpression(position.x,"X")}else{position.x+="px"}}if(position.y||position.y===0){position.y-=Zapatec.Utils.getPageScrollY();if(Zapatec.is_ie&&!Zapatec.is_ie7){position.y=this.getExpression(position.y,"Y")}else{position.y+="px"}}return position};Zapatec.FixateOnScreen.register=function(B){if(!Zapatec.isHtmlElement(B)){return false}if(this.isRegistered(B)){return true}var C=Zapatec.Utils.getElementOffset(B);C={x:parseInt(B.style.left,10)||C.x,y:parseInt(B.style.top,10)||C.y};C=this.correctCoordinates(C.x,C.y);if(!Zapatec.is_ie||Zapatec.is_ie7){var A=B.restorer;if(!A||!A.getObject||A.getObject()!=B){A=B.restorer=new Zapatec.SRProp(B)}A.saveProp("style.position");B.style.position="fixed";B.style.left=C.x;B.style.top=C.y}else{B.style.setExpression("left",C.x);B.style.setExpression("top",C.y)}B.zpFixed=true;return true};Zapatec.FixateOnScreen.unregister=function(A){if(!Zapatec.isHtmlElement(A)){return false}var B=this.parseCoordinates(A);if(B===false){return true}if(Zapatec.is_ie&&!Zapatec.is_ie7){A.style.removeExpression("left");A.style.removeExpression("top")}A.style.left=B.x+"px";A.style.top=B.y+"px";if(!Zapatec.is_ie||Zapatec.is_ie7){A.restorer.restoreProp("style.position",true)}A.zpFixed=false;return true};Zapatec.FixateOnScreen.isRegistered=function(A){if(A.zpFixed){return true}return false};Zapatec.Utils.destroy=function(A){if(A&&A.parentNode){A.parentNode.removeChild(A)}};Zapatec.Utils.newCenteredWindow=function(A,H,B,I,F){var D=0;var G=0;if(screen.width){D=(screen.width-B)/2}if(screen.height){G=(screen.height-I)/2}var C="height="+I+",width="+B+",top="+G+",left="+D+",scrollbars="+F+",resizable";var E=window.open(A,H,C);return E};Zapatec.Utils.getWindowSize=function(){var A=0;var B=0;if(Zapatec.is_opera){A=document.body.clientWidth||0;B=document.body.clientHeight||0}else{if(Zapatec.is_khtml){A=window.innerWidth||0;B=window.innerHeight||0}else{if(document.compatMode&&document.compatMode=="CSS1Compat"){A=document.documentElement.clientWidth||0;B=document.documentElement.clientHeight||0}else{A=document.body.clientWidth||0;B=document.body.clientHeight||0}}}return{width:A,height:B}};Zapatec.Utils.selectOption=function(sel,val,call_default){var a=sel.options,i,o;for(i=a.length;--i>=0;){o=a[i];o.selected=(o.value==val)}sel.value=val;if(call_default){if(typeof sel.onchange=="function"){sel.onchange()}else{if(typeof sel.onchange=="string"){eval(sel.onchange)}}}};Zapatec.Utils.getNextSibling=function(C,A,B){C=C.nextSibling;if(!A){return C}A=A.toLowerCase();if(B){B=B.toLowerCase()}while(C){if(C.nodeType==1&&(C.tagName.toLowerCase()==A||(B&&C.tagName.toLowerCase()==B))){return C}C=C.nextSibling}return C};Zapatec.Utils.getPreviousSibling=function(C,A,B){C=C.previousSibling;if(!A){return C}A=A.toLowerCase();if(B){B=B.toLowerCase()}while(C){if(C.nodeType==1&&(C.tagName.toLowerCase()==A||(B&&C.tagName.toLowerCase()==B))){return C}C=C.previousSibling}return C};Zapatec.Utils.getFirstChild=function(C,A,B){if(!C){return null}C=C.firstChild;if(!C){return null}if(!A){return C}A=A.toLowerCase();if(C.nodeType==1){if(C.tagName.toLowerCase()==A){return C}else{if(B){B=B.toLowerCase();if(C.tagName.toLowerCase()==B){return C}}}}return Zapatec.Utils.getNextSibling(C,A,B)};Zapatec.Utils.getLastChild=function(C,A,B){if(!C){return null}C=C.lastChild;if(!C){return null}if(!A){return C}A=A.toLowerCase();if(C.nodeType==1){if(C.tagName.toLowerCase()==A){return C}else{if(B){B=B.toLowerCase();if(C.tagName.toLowerCase()==B){return C}}}}return Zapatec.Utils.getPreviousSibling(C,A,B)};Zapatec.Utils.getChildText=function(C){if(C==null){return""}var B=[];var A=C.firstChild;while(A!=null){if(A.nodeType==3){B.push(A.data)}A=A.nextSibling}return B.join(" ")};Zapatec.Utils.insertAfter=function(B,A){if(B.nextSibling){B.parentNode.insertBefore(A,B.nextSibling)}else{B.parentNode.appendChild(A)}};Zapatec.Utils._ids={};Zapatec.Utils.generateID=function(A,B){if(typeof B=="undefined"){if(typeof this._ids[A]=="undefined"){this._ids[A]=0}B=++this._ids[A]}return"zapatec-"+A+"-"+B};Zapatec.Utils.addTooltip=function(B,A){return new Zapatec.Tooltip({target:B,tooltip:A})};Zapatec.isLite=true;Zapatec.Utils.checkLinks=function(){var B=document.getElementsByTagName("A");for(var A=0;A<B.length;A++){if(Zapatec.Utils.checkLink(B[A])){return true}}return false};Zapatec.Utils.checkLink=function(E){if(!E){return false}if(!/^https?:\/\/((dev|www)\.)?zapatec\.com/i.test(E.href)){return false}var C="";for(var B=0;B<E.childNodes.length;B++){if(E.childNodes[B].nodeType==3){C+=E.childNodes[B].nodeValue}}if(C.length<4){return false}var A=E;while(A&&A.nodeName.toLowerCase()!="html"){if(Zapatec.Utils.getStyleProperty(A,"display")=="none"||Zapatec.Utils.getStyleProperty(A,"visibility")=="hidden"||Zapatec.Utils.getStyleProperty(A,"opacity")=="0"||Zapatec.Utils.getStyleProperty(A,"-moz-opacity")=="0"||/alpha\(opacity=0\)/i.test(Zapatec.Utils.getStyleProperty(A,"filter"))){return false}A=A.parentNode}var D=Zapatec.Utils.getElementOffset(E);if(D.left<0||D.top<0){return false}return true};Zapatec.Utils.checkActivation=function(){if(!Zapatec.isLite){return true}var F=[];add_product=function(I,H,J){F[I]={webdir:H,name:J,bActive:false}};add_product("calendar.js","prod1","Calendar");add_product("zpmenu.js","menu","Menu");add_product("tree.js","prod3","Tree");add_product("form.js","forms","Forms");add_product("effects.js","effects","Effects");add_product("hoverer.js","effects","Effects - Hoverer");add_product("slideshow.js","effects","Effects - Slideshow");add_product("zpgrid.js","grid","Grid");add_product("slider.js","slider","Slider");add_product("zptabs.js","tabs","Tabs");add_product("zptime.js","time","Time");add_product("window.js","windows","Window");var E,G,D;var B=false;var A=document.getElementsByTagName("script");for(D=0;D<A.length;D++){if(/wizard.js/i.test(A[D].src)){return true}G=A[D].src.split("/");if(G.length==0){E=A[D]}else{E=G[G.length-1]}E=E.toLowerCase();if(typeof F[E]!="undefined"){B=true;F[E].bActive=true}}if(!B||Zapatec.Utils.checkLinks()){return true}var C="You are using the Free version of the Zapatec Software.\nWhile using the Free version, a link to www.zapatec.com in this page is required.";for(D in F){if(F[D].bActive==true){C+="\nTo purchase the Zapatec "+F[D].name+" visit www.zapatec.com/website/main/products/"+F[D].webdir+"/"}}alert(C);return false};Zapatec.Utils.clone=function(A){var C;if(!A&&typeof A=="object"){return null}else{if(typeof A=="undefined"){return C}}if((A instanceof String)||(A instanceof Number)||(A instanceof Boolean)){C=new A.constructor(A.valueOf())}else{C=new A.constructor()}for(var B in A){if(typeof A[B]=="object"){C[B]=Zapatec.Utils.clone(A[B],true)}else{C[B]=A[B]}}return C};Zapatec.is_opera=/opera/i.test(navigator.userAgent);Zapatec.is_ie=(/msie/i.test(navigator.userAgent)&&!Zapatec.is_opera);Zapatec.is_ie5=(Zapatec.is_ie&&/msie 5\.0/i.test(navigator.userAgent));Zapatec.is_ie7=(Zapatec.is_ie&&/msie 7\.0/i.test(navigator.userAgent));Zapatec.is_mac_ie=(/msie.*mac/i.test(navigator.userAgent)&&!Zapatec.is_opera);Zapatec.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);Zapatec.is_konqueror=/Konqueror/i.test(navigator.userAgent);Zapatec.is_gecko=/Gecko/i.test(navigator.userAgent);Zapatec.is_webkit=/WebKit/i.test(navigator.userAgent);Zapatec.webkitVersion=Zapatec.is_webkit?parseInt(navigator.userAgent.replace(/.+WebKit\/([0-9]+)\..+/,"$1")):-1;if(!Object.prototype.hasOwnProperty){Object.prototype.hasOwnProperty=function(A){try{var B=this.constructor.prototype;while(B){if(B[A]==this[A]){return false}B=B.prototype}}catch(C){}return true}}if(!Function.prototype.call){Function.prototype.call=function(){var objThis=arguments[0];objThis._this_func=this;var arrArgs=[];for(var iArg=1;iArg<arguments.length;iArg++){arrArgs[arrArgs.length]="arguments["+iArg+"]"}var ret=eval("objThis._this_func("+arrArgs.join(",")+")");objThis._this_func=null;return ret}}if(!Function.prototype.apply){Function.prototype.apply=function(){var objThis=arguments[0];var objArgs=arguments[1];objThis._this_func=this;var arrArgs=[];if(objArgs){for(var iArg=0;iArg<objArgs.length;iArg++){arrArgs[arrArgs.length]="objArgs["+iArg+"]"}}var ret=eval("objThis._this_func("+arrArgs.join(",")+")");objThis._this_func=null;return ret}}if(!Array.prototype.pop){Array.prototype.pop=function(){var A;if(this.length){A=this[this.length-1];this.length-=1}return A}}if(!Array.prototype.push){Array.prototype.push=function(){for(var A=0;A<arguments.length;A++){this[this.length]=arguments[A]}return this.length}}if(!Array.prototype.shift){Array.prototype.shift=function(){var B;if(this.length){B=this[0];for(var A=0;A<this.length-1;A++){this[A]=this[A+1]}this.length-=1}return B}}if(!Array.prototype.unshift){Array.prototype.unshift=function(){if(arguments.length){var B,A=arguments.length;for(B=this.length+A-1;B>=A;B--){this[B]=this[B-A]}for(B=0;B<A;B++){this[B]=arguments[B]}}return this.length}}if(!Array.prototype.splice){Array.prototype.splice=function(A,C){var D=[],E=[],B;for(B=2;B<arguments.length;B++){D.push(arguments[B])}for(B=A;(B<A+C)&&(B<this.length);B++){E.push(this[B])}for(B=A+C;B<this.length;B++){this[B-C]=this[B]}this.length-=E.length;for(B=this.length+D.length-1;B>=A+D.length;B--){this[B]=this[B-D.length]}for(B=0;B<D.length;B++){this[A+B]=D[B]}return E}}Zapatec.Utils.arrIndexOf=function(A,B,C){if(Array.prototype.indexOf){return A.indexOf(B,C)}if(!C){C=0}for(var D=C;D<A.length;D++){if(A[D]==B){return D}}return -1};Zapatec.Log=function(A){if(!A){return }var B=A.description;if(A.severity){B=A.severity+":\n"+B}if(A.type!="warning"){alert(B)}};Zapatec.Utils.Array={};Zapatec.Utils.Array.insertBefore=function(B,F,E,A){var D=new Array();for(var C in B){if(C==A){if(E){D[E]=F}else{D.push(F)}}D[C]=B[C]}return D};Zapatec.inherit=function(D,B,A){var C=function(){};C.prototype=B.prototype;D.prototype=new C();D.prototype.constructor=D;D.SUPERconstructor=B;D.SUPERclass=B.prototype;if(typeof B.path!="undefined"){if(A&&A.keepPath){D.path=B.path}else{D.path=Zapatec.getPath(D.id)}}};Zapatec.getPath=function(C){var A;if(typeof C=="string"){var E=document.getElementById(C);if(E){A=E.getAttribute("src")}}if(!A){if(typeof Zapatec.lastLoadedModule=="string"){return Zapatec.lastLoadedModule}if(document.documentElement){var F=document.documentElement.innerHTML;var B=F.match(/<script[^>]+src=[^>]+>/gi);if(B&&B.length){F=B[B.length-1];B=F.match(/src="([^"]+)/i);if(B&&B.length==2){A=B[1]}}}if(!A){return""}}A=A.replace(/\\/g,"/");var D=A.split("?");D=D[0].split("/");D=D.slice(0,-1);if(!D.length){return""}return D.join("/")+"/"};Zapatec.Utils.setWindowEvent=function(A){if(A){window.event=A}};Zapatec.Utils.emulateWindowEvent=function(B){if(document.addEventListener){for(var A=0;A<B.length;A++){document.addEventListener(B[A],Zapatec.Utils.setWindowEvent,true)}}};Zapatec.windowLoaded=typeof (document.readyState)!="undefined"?(document.readyState=="loaded"||document.readyState=="complete"):document.getElementsByTagName!=null&&typeof (document.getElementsByTagName("body")[0])!="undefined";Zapatec.Utils.addEvent(window,"load",function(){Zapatec.windowLoaded=true});Zapatec.Utils.warnUnload=function(B,A){Zapatec.Utils.warnUnloadFlag=true;if(typeof (B)!="string"){B="All your changes will be lost."}if(typeof (A)=="undefined"){A=window}Zapatec.Utils.addEvent(A,"beforeunload",function(C){if(Zapatec.Utils.warnUnloadFlag!=true){return true}if(typeof (C)=="undefined"){C=window.event}C.returnValue=B;return false})};Zapatec.Utils.unwarnUnload=function(B,A){Zapatec.Utils.warnUnloadFlag=false};Zapatec.Utils.warnUnloadFlag=false;Zapatec.Utils.getMaxZindex=function(){if(window.opera||Zapatec.is_khtml){return 2147483583}else{if(Zapatec.is_ie){return 2147483647}else{return 10737418239}}};Zapatec.Utils.correctCssLength=function(A){if(typeof A=="undefined"||(typeof A=="object"&&!A)){return"auto"}A+="";if(!A.length){return"auto"}if(/\d$/.test(A)){A+="px"}return A};Zapatec.Utils.destroyOnUnload=[];Zapatec.Utils.addDestroyOnUnload=function(B,A){Zapatec.Utils.destroyOnUnload.push([B,A])};Zapatec.Utils.createProperty=function(B,A,C){B[A]=C;Zapatec.Utils.addDestroyOnUnload(B,A)};Zapatec.Utils.addEvent(window,"unload",function(){for(var D=Zapatec.Utils.destroyOnUnload.length-1;D>=0;D--){var C=Zapatec.Utils.destroyOnUnload[D];C[0][C[1]]=null;C[0]=null}for(var B=Zapatec.Utils.removeOnUnload.length-1;B>=0;B--){var A=Zapatec.Utils.removeOnUnload[B];if(!A){continue}Zapatec.Utils.removeOnUnload[B]=null;Zapatec.Utils.removeEvent(A.element,A.event,A.listener,A.capture)}});Zapatec.Utils.htmlEncode=function(A){A=A.replace(/&/ig,"&amp;");A=A.replace(/</ig,"&lt;");A=A.replace(/>/ig,"&gt;");A=A.replace(/\x22/ig,"&quot;");return A};Zapatec.Utils.applyStyle=function(C,A){if(typeof (C)=="string"){C=document.getElementById(C)}if(C==null||A==null||C.style==null){return null}if(Zapatec.is_opera){var B=A.split(";");for(var I=0;I<B.length;I++){var F=B[I].split(":");if(!F[1]){continue}var G=F[1].replace(/^\s*/,"").replace(/\s*$/,"");var H="";for(var D=0;D<F[0].length;D++){if(F[0].charAt(D)=="-"){D++;if(D<F[0].length){H+=F[0].charAt(D).toUpperCase()}continue}H+=F[0].charAt(D)}switch(H){case"float":H="cssFloat";break}try{C.style[H]=G}catch(E){}}}else{C.style.cssText=A}return true};Zapatec.Utils.getStyleProperty=function(C,A){if(document.defaultView&&document.defaultView.getComputedStyle){A=A.replace(/([A-Z])/g,"-$1").toLowerCase();var B=document.defaultView.getComputedStyle(C,"");if(B){return B.getPropertyValue(A)}}else{if(C.currentStyle){return C.currentStyle[A]}}return C.style[A]};Zapatec.Utils.getPrecision=function(A){return(A+"").replace(/^\d*\.*/,"").length};Zapatec.Utils.setPrecision=function(A,C){A*=1;if(A.toFixed){return(A*1).toFixed(C)*1}var B=Math.pow(10,C);return parseInt(A*B,10)/B};Zapatec.Utils.setPrecisionString=function(C,E){var A=Zapatec.Utils.setPrecision(C,E)+"";var B=E-Zapatec.Utils.getPrecision(A);for(var D=0;D<B;D++){A+="0"}return A};Zapatec.Utils.createNestedHash=function(C,D,E){if(C==null||D==null){return null}var A=C;for(var B=0;B<D.length;B++){if(typeof (A[D[B]])=="undefined"){A[D[B]]={}}if(B==D.length-1&&typeof (E)!="undefined"){A[D[B]]=E}A=A[D[B]]}};Zapatec.implement=function(C,D){if(typeof D!="string"){return false}if(typeof C=="function"){C=C.prototype}if(!C||typeof C!="object"){return false}var B=window;var F=D.split(".");try{for(var A=0;A<F.length;++A){B=B[F[A]]}}catch(E){return false}if(typeof C.interfaces!="object"){C.interfaces={};C.interfaces[D]=true}else{if(C.interfaces[D]!==true){C.interfaces=Zapatec.Utils.clone(C.interfaces);C.interfaces[D]=true}else{return true}}for(var G in B){C[G]=B[G]}C.hasInterface=function(H){if(this.interfaces[H]===true){return true}return false};return true};Zapatec.Utils.getCharFromEvent=function(A){if(!A){A=window.event}var B={};if(Zapatec.is_gecko&&!Zapatec.is_khtml&&A.type!="keydown"&&A.type!="keyup"){if(A.charCode){B.chr=String.fromCharCode(A.charCode)}else{B.charCode=A.keyCode}}else{B.charCode=A.keyCode||A.which;B.chr=String.fromCharCode(B.charCode)}if(Zapatec.is_opera&&B.charCode==0){B.charCode=null;B.chr=null}if(Zapatec.is_khtml&&B.charCode==63272){B.charCode=46;B.chr=null}return B};if(typeof Zapatec=="undefined"){Zapatec=function(){}}Zapatec.Transport=function(){};Zapatec.Transport.isBusy=function(E){var B=E.busyContainer;if(typeof B=="string"){B=document.getElementById(B)}if(!B){return }var A=E.busyImage;if(typeof A!="string"){A=""}A=A.split("/").pop();if(!A.length){A="zpbusy.gif"}var D=B.firstChild;if(D){D=D.firstChild;if(D){D=D.firstChild;if(D&&D.tagName&&D.tagName.toLowerCase()=="img"){var C=D.getAttribute("src");if(typeof C=="string"&&C.length){C=C.split("/").pop();if(C==A){return true}}}}}return false};Zapatec.Transport.showBusy=function(A){if(Zapatec.Transport.isBusy(A)){return }var L=A.busyContainer;if(typeof L=="string"){L=document.getElementById(L)}if(!L){return }var G=A.busyImage;var I=A.busyImageWidth;var K=A.busyImageHeight;if(typeof G!="string"||!G.length){G="zpbusy.gif"}else{if(typeof I=="number"||(typeof I=="string"&&/\d$/.test(I))){I+="px"}if(typeof K=="number"||(typeof K=="string"&&/\d$/.test(K))){K+="px"}}if(!I){I="65px"}if(!K){K="35px"}var F="";if(G.indexOf("/")<0){if(Zapatec.zapatecPath){F=Zapatec.zapatecPath}else{F=Zapatec.Transport.getPath("transport.js")}}var D=[];D.push('<img src="');D.push(F);D.push(G);D.push('"');if(I||K){D.push(' style="');if(I){D.push("width:");D.push(I);D.push(";")}if(K){D.push("height:");D.push(K)}D.push('"')}D.push(" />");var B=L.offsetWidth;var J=L.offsetHeight;var H=Zapatec.Utils.createElement("div");H.style.position="relative";H.style.zIndex=2147483583;var E=Zapatec.Utils.createElement("div",H);E.style.position="absolute";E.innerHTML=D.join("");if(L.firstChild){L.insertBefore(H,L.firstChild)}else{L.appendChild(H)}var M=E.offsetWidth;var C=E.offsetHeight;if(B>M){E.style.left=L.scrollLeft+(B-M)/2+"px"}if(J>C){E.style.top=L.scrollTop+(J-C)/2+"px"}};Zapatec.Transport.removeBusy=function(B){var A=B.busyContainer;if(typeof A=="string"){A=document.getElementById(A)}if(!A){return }if(Zapatec.Transport.isBusy(B)){A.removeChild(A.firstChild)}};Zapatec.Transport.fetch=function(B){if(B==null||typeof B!="object"){return null}if(!B.url){return null}if(!B.method){B.method="GET"}if(typeof B.async=="undefined"){B.async=true}if(!B.contentType&&B.method.toUpperCase()=="POST"){B.contentType="application/x-www-form-urlencoded"}if(!B.content){B.content=null}if(!B.onLoad){B.onLoad=null}if(!B.onError){B.onError=null}var C=Zapatec.Transport.createXmlHttpRequest();if(C==null){return null}Zapatec.Transport.showBusy(B);var E=false;var D=function(){Zapatec.Transport.removeBusy(B);try{if(C.status==200||C.status==304||(location.protocol=="file:"&&!C.status)){if(typeof B.onLoad=="function"){B.onLoad(C)}}else{if(!E){E=true;Zapatec.Transport.displayError(C.status,"Error: Can't fetch "+B.url+".\n"+(C.statusText||""),B.onError)}}}catch(F){if(!E){E=true;if(F.name&&F.name=="NS_ERROR_NOT_AVAILABLE"){Zapatec.Transport.displayError(0,"Error: Can't fetch "+B.url+".\nFile not found.",B.onError)}else{Zapatec.Transport.displayError(0,"Error: Can't fetch "+B.url+".\n"+(F.message||""),B.onError)}}}};try{if(typeof B.username!="undefined"&&typeof B.password!="undefined"){C.open(B.method,B.url,B.async,B.username,B.password)}else{C.open(B.method,B.url,B.async)}if(B.async){C.onreadystatechange=function(){if(C.readyState==4){D();C.onreadystatechange={}}}}if(B.contentType){C.setRequestHeader("Content-Type",B.contentType)}C.send(B.content);if(!B.async){D();return C}}catch(A){Zapatec.Transport.removeBusy(B);if(!E){E=true;if(A.name&&A.name=="NS_ERROR_FILE_NOT_FOUND"){Zapatec.Transport.displayError(0,"Error: Can't fetch "+B.url+".\nFile not found.",B.onError)}else{Zapatec.Transport.displayError(0,"Error: Can't fetch "+B.url+".\n"+(A.message||""),B.onError)}}}return null};Zapatec.Transport.parseHtml=function(B){B+="";B=B.replace(/^\s+/g,"");var A;if(document.createElementNS){A=document.createElementNS("http://www.w3.org/1999/xhtml","div")}else{A=document.createElement("div")}A.innerHTML=B;return A};Zapatec.Transport.evalGlobalScope=function(sScript){if(typeof sScript!="string"||!sScript.match(/\S/)){return }if(window.execScript){window.execScript(sScript,"javascript")}else{if(window.eval){window.eval(sScript)}}};Zapatec.Transport.setInnerHtml=function(C){if(!C||typeof C.html!="string"){return }var N=C.html;var P=null;if(typeof C.container=="string"){P=document.getElementById(C.container)}else{if(typeof C.container=="object"){P=C.container}}var L=[];if(N.match(/<\s*\/\s*script\s*>/i)){var K=N.split(/<\s*\/\s*script\s*>/i);var G=[];for(var E=K.length-1;E>=0;E--){var F=K[E];if(F.match(/\S/)){var B=F.match(/<\s*script([^>]*)>/i);if(B){var I=F.split(/<\s*script[^>]*>/i);while(I.length<2){if(F.match(/^<\s*script[^>]*>/i)){I.unshift("")}else{I.push("")}}G.unshift(I[0]);var Q=B[1];var A=I[1];if(Q.match(/\s+src\s*=/i)){A=""}else{A=A.replace(/function\s+([^(]+)/g,"$1=function")}L.push([Q,A])}else{if(E<K.length-1){K[E-1]+="<\/script>"+F}else{G.unshift(F)}}}else{G.unshift(F)}}N=G.join("")}if(P){if(window.opera){P.innerHTML="<form></form>"}P.innerHTML=N}for(var O=0;O<L.length;O++){if(L[O][1].length){Zapatec.Transport.evalGlobalScope(L[O][1])}var Q=L[O][0];Q=Q.replace(/\s+/g," ").replace(/^\s/,"").replace(/\s$/,"").replace(/ = /g,"=");if(Q.indexOf("src=")>=0){var P=document.body;if(!P){P=document.getElementsByTagName("head")[0];if(!P){P=document}}var H=Q.split(" ");var D=Zapatec.Utils.createElement("script");for(var M=0;M<H.length;M++){var J=H[M].split("=");if(J.length>1){D.setAttribute(J[0],J[1].match(/^[\s|"|']*([\s|\S]*[^'|"])[\s|"|']*$/)[1])}else{D.setAttribute(J[0],J[0])}}P.appendChild(D)}}};Zapatec.Transport.fetchXmlDoc=function(A){if(A==null||typeof A!="object"){return null}if(typeof A.async=="undefined"){A.async=true}if(!A.reliable){A.reliable=false}var C={};for(var D in A){C[D]=A[D]}if(A.async){C.onLoad=function(E){Zapatec.Transport.parseJson({strJson:E.responseText,reliable:A.reliable,onLoad:A.onLoad,onError:A.onError})}}else{C.onLoad=null}var B=Zapatec.Transport.fetch(C);if(!A.async&&B){return Zapatec.Transport.parseJson({strJson:B.responseText,reliable:A.reliable,onLoad:A.onLoad,onError:A.onError})}return null};Zapatec.Transport.parseJson=function(oArg){if(oArg==null||typeof oArg!="object"){return null}if(!oArg.reliable){oArg.reliable=false}if(!oArg.onLoad){oArg.onLoad=null}if(!oArg.onError){oArg.onError=null}var oJson=null;try{if(oArg.reliable){if(oArg.strJson){oJson=eval("("+oArg.strJson+")")}}else{oJson=Zapatec.Transport.parseJsonStr(oArg.strJson)}}catch(oExpn){var sError="Error: Can't parse.\nString doesn't appear to be a valid JSON fragment: ";sError+=oExpn.message;if(typeof oExpn.text!="undefined"&&oExpn.text.length){sError+="\n"+oExpn.text}sError+="\n"+oArg.strJson;Zapatec.Transport.displayError(0,sError,oArg.onError);return null}if(typeof oArg.onLoad=="function"){oArg.onLoad(oJson)}return oJson};Zapatec.Transport.parseJsonStr=function(text){var p=/^\s*(([,:{}\[\]])|"(\\.|[^\x00-\x1f"\\])*"|-?\d+(\.\d*)?([eE][+-]?\d+)?|true|false|null)\s*/,token,operator;function error(m,t){throw {name:"JSONError",message:m,text:t||operator||token}}function next(b){if(b&&b!=operator){error("Expected '"+b+"'")}if(text){var t=p.exec(text);if(t){if(t[2]){token=null;operator=t[2]}else{operator=null;try{token=eval(t[1])}catch(e){error("Bad token",t[1])}}text=text.substring(t[0].length)}else{error("Unrecognized token",text)}}else{token=operator=null}}function val(){var k,o;switch(operator){case"{":next("{");o={};if(operator!="}"){for(;;){if(operator||typeof token!="string"){error("Missing key")}k=token;next();next(":");o[k]=val();if(operator!=","){break}next(",")}}next("}");return o;case"[":next("[");o=[];if(operator!="]"){for(;;){o.push(val());if(operator!=","){break}next(",")}}next("]");return o;default:if(operator!==null){error("Missing value")}k=token;next();return k}}next();return val()};Zapatec.Transport.serializeJsonObj=function(B){var A=[];function D(E){A[A.length]=E}function C(E){var I,H,F,G;switch(typeof E){case"object":if(E){if(E instanceof Array){D("[");F=A.length;for(H=0;H<E.length;H+=1){G=E[H];if(typeof G!="undefined"&&typeof G!="function"){if(F<A.length){D(",")}C(G)}}D("]");return }else{if(typeof E.toString!="undefined"){D("{");F=A.length;for(H in E){G=E[H];if(E.hasOwnProperty(H)&&typeof G!="undefined"&&typeof G!="function"){if(F<A.length){D(",")}C(H);D(":");C(G)}}return D("}")}}}D("null");return ;case"number":D(isFinite(E)?+E:"null");return ;case"string":F=E.length;D('"');for(H=0;H<F;H+=1){I=E.charAt(H);if(I>=" "){if(I=="\\"||I=='"'){D("\\")}D(I)}else{switch(I){case"\b":D("\\b");break;case"\f":D("\\f");break;case"\n":D("\\n");break;case"\r":D("\\r");break;case"\t":D("\\t");break;default:I=I.charCodeAt();D("\\u00"+Math.floor(I/16).toString(16)+(I%16).toString(16))}}}D('"');return ;case"boolean":D(String(E));return ;default:D("null");return }}C(B);return A.join("")};Zapatec.Transport.displayError=function(A,C,B){if(typeof B=="function"){B({errorCode:A,errorDescription:C})}else{alert(C)}};Zapatec.Transport.translateUrl=function(A){if(!A||!A.url){return null}var G=A.url.split("?",2);var E=G[0];if(E.charAt(0)=="/"||E.indexOf(":")>=0){return A.url}var H;if(typeof A.relativeTo!="string"){H=document.location.toString().split("?",2)[0]}else{H=A.relativeTo.split("?",2)[0];if(H.indexOf("/")<0){H=document.location.toString().split("?",2)[0]}else{if(H.charAt(0)!="/"&&H.indexOf(":")<0){H=Zapatec.Transport.translateUrl({url:H})}}}var C=E.split("/");var B=H.split("/");B.pop();for(var D=0;D<C.length;D++){var F=C[D];if(F==".."){B.pop()}else{if(F!="."){B.push(F)}}}G[0]=B.join("/");return G.join("?")};Zapatec.Transport.loading={};Zapatec.Transport.setupEvents=function(A){if(!A){return{}}if(A.force||!Zapatec.EventDriven||!A.url){return{onLoad:A.onLoad,onError:A.onError}}var B=A.url;if(typeof A.onLoad=="function"){Zapatec.EventDriven.addEventListener("zpTransportOnLoad"+B,A.onLoad)}if(typeof A.onError=="function"){Zapatec.EventDriven.addEventListener("zpTransportOnError"+B,A.onError)}if(Zapatec.Transport.loading[B]){return{loading:true}}else{Zapatec.Transport.loading[B]=true;return{onLoad:new Function("Zapatec.EventDriven.fireEvent('zpTransportOnLoad"+B+"');Zapatec.EventDriven.removeEvent('zpTransportOnLoad"+B+"');Zapatec.EventDriven.removeEvent('zpTransportOnError"+B+"');Zapatec.Transport.loading['"+B+"'] = false;"),onError:new Function("oError","Zapatec.EventDriven.fireEvent('zpTransportOnError"+B+"',oError);Zapatec.EventDriven.removeEvent('zpTransportOnLoad"+B+"');Zapatec.EventDriven.removeEvent('zpTransportOnError"+B+"');Zapatec.Transport.loading['"+B+"'] = false;")}}};Zapatec.Transport.loadedJS={};Zapatec.Transport.isLoadedJS=function(D,E){if(typeof E=="undefined"){E=Zapatec.Transport.translateUrl({url:D})}if(Zapatec.Transport.loadedJS[E]){return true}var C=document.getElementsByTagName("script");for(var A=0;A<C.length;A++){var B=C[A].getAttribute("src")||"";if(B==D){Zapatec.Transport.loadedJS[E]=true;return true}}return false};Zapatec.Transport.getPath=function(B){var E=document.getElementsByTagName("script");for(var A=E.length-1;A>=0;A--){var C=E[A].getAttribute("src")||"";var D=C.split("/");var F=D.pop();if(F==B){return D.length?D.join("/")+"/":""}}for(var C in Zapatec.Transport.loadedJS){var D=C.split("/");var F=D.pop();if(F==B){return D.length?D.join("/")+"/":""}}return""};Zapatec.Transport.include=function(A,B,C){if(Zapatec.doNotInclude){return }var D=Zapatec.Transport.translateUrl({url:A});if(!C&&Zapatec.Transport.isLoadedJS(A,D)){return }document.write('<script type="text/javascript" src="'+A+(typeof B=="string"?'" id="'+B:"")+'"><\/script>');Zapatec.Transport.loadedJS[D]=true};Zapatec.include=Zapatec.Transport.include;Zapatec.Transport.includeJS=function(A,B){setTimeout(function(){var C=document.body;if(!C){C=document.getElementsByTagName("head")[0];if(!C){C=document}}var D=document.createElement("script");D.type="text/javascript";D.src=A;if(typeof B=="string"){D.id=B}C.appendChild(D)},0)};Zapatec.Transport.loadJS=function(C){if(!(C instanceof Object)){return }if(typeof C.async=="undefined"){C.async=true}var D=null;if(C.url){D=C.url}else{if(C.module){var A="";if(typeof C.path!="undefined"){A=C.path}else{if(typeof Zapatec.zapatecPath!="undefined"){A=Zapatec.zapatecPath}}D=A+C.module+".js"}else{return }}var E=Zapatec.Transport.translateUrl({url:D});if(!C.onLoad){C.onLoad=null}if(!C.onError){C.onError=null}if(Zapatec.doNotInclude||(!C.force&&Zapatec.Transport.isLoadedJS(D,E))){if(typeof C.onLoad=="function"){C.onLoad()}return }var B=Zapatec.Transport.setupEvents({url:E,force:C.force,onLoad:C.onLoad,onError:C.onError});if(B.loading){return }Zapatec.Transport.fetch({url:D,async:C.async,onLoad:function(G){if(C.force||!Zapatec.Transport.loadedJS[E]){var F=D.split("/");var H=F.pop();Zapatec.lastLoadedModule=F.join("/")+"/";Zapatec.Transport.evalGlobalScope(G.responseText);Zapatec.lastLoadedModule=null;Zapatec.Transport.loadedJS[E]=true}if(typeof B.onLoad=="function"){B.onLoad()}},onError:B.onError})};Zapatec.Transport.includeCSS=function(B){var A=document.getElementsByTagName("head")[0];if(!A){return }var C=document.createElement("link");C.setAttribute("rel","stylesheet");C.setAttribute("type","text/css");C.setAttribute("href",B);A.appendChild(C)};Zapatec.Transport.loadedCss={};Zapatec.Transport.loadCss=function(A){if(Zapatec.StyleSheet){Zapatec.Transport.loadCssWithStyleSheet(A)}else{Zapatec.Transport.loadJS({module:"stylesheet",async:A.async,onLoad:function(){Zapatec.Transport.loadCssWithStyleSheet(A)}})}};Zapatec.Transport.loadCssWithStyleSheet=function(C){if(!(C instanceof Object)){return }if(!C.url){return }if(typeof C.async=="undefined"){C.async=true}var E=Zapatec.Transport.translateUrl({url:C.url});if(!C.force){if(Zapatec.Transport.loadedCss[E]){if(typeof C.onLoad=="function"){C.onLoad()}return }var A=document.getElementsByTagName("link");for(var F=0;F<A.length;F++){var D=A[F].getAttribute("href")||"";D=Zapatec.Transport.translateUrl({url:D});if(D==E){Zapatec.Transport.loadedCss[E]=true;if(typeof C.onLoad=="function"){C.onLoad()}return }}}var B=Zapatec.Transport.setupEvents({url:E,force:C.force,onLoad:C.onLoad,onError:C.onError});if(B.loading){return }Zapatec.Transport.fetch({url:C.url,async:C.async,onLoad:function(H){var N=H.responseText;var L=[];var O=[];var G=[];var J=0;var K=N.indexOf("url(",J);while(K>=0){K+=4;var I=N.substring(J,K);var P=/@import\s+url\($/.test(I);L.push(I);J=K;K=N.indexOf(")",J);if(K>=0){var M=N.substring(J,K);M=M.replace(/['"]/g,"");M=Zapatec.Transport.translateUrl({url:M,relativeTo:C.url});M=Zapatec.Transport.translateUrl({url:M});L.push(M);if(P){G.push(M)}else{O.push(M)}J=K;K=N.indexOf("url(",J)}}L.push(N.substr(J));N=L.join("");Zapatec.Transport.loadCssList({urls:G,async:C.async,onLoad:function(){(new Zapatec.StyleSheet()).addParse(N);if(typeof B.onLoad=="function"){B.onLoad()}}});Zapatec.Transport.loadedCss[E]=true;Zapatec.Transport.preloadImages({urls:O,timeout:60000})},onError:B.onError})};Zapatec.Transport.loadCssList=function(B){if(!(B instanceof Object)){return }if(typeof B.async=="undefined"){B.async=true}if(!B.onLoad){B.onLoad=null}if(!B.onError){B.onError=null}if(!B.urls||!B.urls.length){if(typeof B.onLoad=="function"){B.onLoad()}return }var C=B.urls.shift();var A=function(){Zapatec.Transport.loadCssList({urls:B.urls,async:B.async,force:B.force,onLoad:B.onLoad,onError:B.onError})};Zapatec.Transport.loadCss({url:C,async:B.async,force:B.force,onLoad:A,onError:function(D){Zapatec.Transport.displayError(D.errorCode,D.errorDescription,B.onError);A()}})};Zapatec.Transport.imagePreloads=[];Zapatec.Transport.preloadImages=function(A){if(Zapatec.PreloadImages){Zapatec.Transport.imagePreloads.push(new Zapatec.PreloadImages(A))}else{Zapatec.Transport.loadJS({module:"preloadimages",onLoad:function(){Zapatec.Transport.imagePreloads.push(new Zapatec.PreloadImages(A))}})}};if(typeof Zapatec=="undefined"){Zapatec=function(){}}Zapatec.StyleSheet=function(D){if(D){if(document.createStyleSheet){if(document.styleSheets.length){this.styleSheet=document.styleSheets[document.styleSheets.length-1]}}else{var A=document.getElementsByTagName("style");if(A.length){this.styleSheet=A[A.length-1]}}}if(!this.styleSheet){if(document.createStyleSheet){try{this.styleSheet=document.createStyleSheet()}catch(C){this.styleSheet=document.styleSheets[document.styleSheets.length-1]}}else{this.styleSheet=document.createElement("style");this.styleSheet.type="text/css";var B=document.getElementsByTagName("head")[0];if(!B){B=document.documentElement}if(B){B.appendChild(this.styleSheet)}}}};Zapatec.StyleSheet.prototype.addRule=function(A,B){if(!this.styleSheet){return }if(document.createStyleSheet){this.styleSheet.cssText+=A+" { "+B+" }"}else{this.styleSheet.appendChild(document.createTextNode(A+" { "+B+" }"))}};Zapatec.StyleSheet.prototype.removeRules=function(){if(!this.styleSheet){return }if(document.createStyleSheet){var A=this.styleSheet.rules.length;for(var B=0;B<A;B++){this.styleSheet.removeRule()}}else{while(this.styleSheet.firstChild){this.styleSheet.removeChild(this.styleSheet.firstChild)}}};Zapatec.StyleSheet.prototype.addParse=function(C){var I=[];var D=C.split("/*");for(var G=0;G<D.length;G++){var A=D[G].split("*/");I.push(A[A.length-1])}C=I.join("");C=C.replace(/@[^{]*;/g,"");var E=C.split("}");for(var F=0;F<E.length;F++){var B=E[F].split("{");if(B[0]&&B[1]){var J=B[0].split(",");for(var H=0;H<J.length;H++){this.addRule(J[H],B[1])}}}};Zapatec.ImagePreloader=function(A){this.job=null;this.image=null;if(arguments.length>0){this.init(A)}};Zapatec.ImagePreloader.prototype.init=function(B){if(!B||!B.job){return }this.job=B.job;this.image=new Image();this.job.images.push(this.image);var A=this;this.image.onload=function(){A.job.loadedUrls.push(B.url);setTimeout(function(){A.onLoad()},0)};this.image.onerror=function(){A.job.invalidUrls.push(B.url);A.onLoad()};this.image.onabort=function(){A.job.abortedUrls.push(B.url);A.onLoad()};this.image.src=B.url;if(typeof B.timeout=="number"){setTimeout(function(){if(A.job){if(A.image.complete){A.job.loadedUrls.push(B.url)}else{A.job.abortedUrls.push(B.url)}A.onLoad()}},B.timeout)}};Zapatec.ImagePreloader.prototype.onLoad=function(){if(!this.job){return }this.image.onload=null;this.image.onerror=null;this.image.onabort=null;var B=this.job;this.job=null;B.leftToLoad--;if(B.leftToLoad==0&&typeof B.onLoad=="function"){var A=B.onLoad;B.onLoad=null;A(B)}};Zapatec.PreloadImages=function(A){this.images=[];this.leftToLoad=0;this.loadedUrls=[];this.invalidUrls=[];this.abortedUrls=[];this.onLoad=null;if(arguments.length>0){this.init(A)}};Zapatec.PreloadImages.prototype.init=function(B){if(!B){return }if(!B.urls||!B.urls.length){if(typeof B.onLoad=="function"){B.onLoad(this)}return }this.images=[];this.leftToLoad=B.urls.length;this.loadedUrls=[];this.invalidUrls=[];this.abortedUrls=[];this.onLoad=B.onLoad;for(var A=0;A<B.urls.length;A++){new Zapatec.ImagePreloader({job:this,url:B.urls[A],timeout:B.timeout})}};if(typeof Zapatec=="undefined"){Zapatec=function(){}}Zapatec.EventDriven=function(){};Zapatec.EventDriven.prototype.init=function(){this.events={}};Zapatec.EventDriven.prototype.addEventListener=function(B,A){if(typeof A!="function"){return false}if(!this.events[B]){this.events[B]={listeners:[]}}else{this.removeEventListener(B,A)}this.events[B].listeners.push(A)};Zapatec.EventDriven.prototype.unshiftEventListener=function(B,A){if(typeof A!="function"){return false}if(!this.events[B]){this.events[B]={listeners:[]}}else{this.removeEventListener(B,A)}this.events[B].listeners.unshift(A)};Zapatec.EventDriven.prototype.removeEventListener=function(D,B){if(!this.events[D]){return 0}var C=this.events[D].listeners;var E=0;for(var A=C.length-1;A>=0;A--){if(C[A]==B){C.splice(A,1);E++}}return E};Zapatec.EventDriven.prototype.getEventListeners=function(A){if(!this.events[A]){return[]}return this.events[A].listeners};Zapatec.EventDriven.prototype.isEventListener=function(D,B){if(!this.events[D]){return false}var C=this.events[D].listeners;for(var A=C.length-1;A>=0;A--){if(C[A]==B){return true}}return false};Zapatec.EventDriven.prototype.isEvent=function(A){if(this.events[A]){return true}return false};Zapatec.EventDriven.prototype.removeEvent=function(B){if(this.events[B]){var A;this.events[B]=A}};Zapatec.EventDriven.prototype.fireEvent=function(C){if(!this.events[C]){return }var B=this.events[C].listeners.slice();for(var A=0;A<B.length;A++){var D=[].slice.call(arguments,1);B[A].apply(this,D)}};Zapatec.EventDriven.events={};Zapatec.EventDriven.addEventListener=function(B,A){if(typeof A!="function"){return false}if(!Zapatec.EventDriven.events[B]){Zapatec.EventDriven.events[B]={listeners:[]}}else{Zapatec.EventDriven.removeEventListener(B,A)}Zapatec.EventDriven.events[B].listeners.push(A)};Zapatec.EventDriven.unshiftEventListener=function(B,A){if(typeof A!="function"){return false}if(!Zapatec.EventDriven.events[B]){Zapatec.EventDriven.events[B]={listeners:[]}}else{Zapatec.EventDriven.removeEventListener(B,A)}Zapatec.EventDriven.events[B].listeners.unshift(A)};Zapatec.EventDriven.removeEventListener=function(D,B){if(!Zapatec.EventDriven.events[D]){return 0}var C=Zapatec.EventDriven.events[D].listeners;var E=0;for(var A=C.length-1;A>=0;A--){if(C[A]==B){C.splice(A,1);E++}}return E};Zapatec.EventDriven.getEventListeners=function(A){if(!Zapatec.EventDriven.events[A]){return[]}return Zapatec.EventDriven.events[A].listeners};Zapatec.EventDriven.isEventListener=function(D,B){if(!Zapatec.EventDriven.events[D]){return false}var C=Zapatec.EventDriven.events[D].listeners;for(var A=C.length-1;A>=0;A--){if(C[A]==B){return true}}return false};Zapatec.EventDriven.isEvent=function(A){if(Zapatec.EventDriven.events[A]){return true}return false};Zapatec.EventDriven.removeEvent=function(B){if(Zapatec.EventDriven.events[B]){var A;Zapatec.EventDriven.events[B]=A}};Zapatec.EventDriven.fireEvent=function(C){if(!Zapatec.EventDriven.events[C]){return }var B=Zapatec.EventDriven.events[C].listeners.slice();for(var A=0;A<B.length;A++){var D=[].slice.call(arguments,1);B[A].apply(B[A],D)}};if(typeof Zapatec=="undefined"){Zapatec=function(){}}Zapatec.Widget=function(A){this.config={};Zapatec.Widget.SUPERconstructor.call(this);this.init(A)};Zapatec.inherit(Zapatec.Widget,Zapatec.EventDriven);Zapatec.Widget.path=Zapatec.getPath("Zapatec.Widget");Zapatec.Widget.prototype.init=function(A){Zapatec.Widget.SUPERclass.init.call(this);if(typeof this.id=="undefined"){var B=0;while(Zapatec.Widget.all[B]){B++}this.id=B;Zapatec.Widget.all[B]=this}this.configure(A);this.addUserEventListeners();this.addStandardEventListeners();this.loadTheme()};Zapatec.Widget.prototype.reconfigure=function(A){this.configure(A);this.loadTheme()};Zapatec.Widget.prototype.configure=function(A){this.defineConfigOption("theme","default");if(typeof this.constructor.path!="undefined"){this.defineConfigOption("themePath",this.constructor.path+"../themes/")}else{this.defineConfigOption("themePath","../themes/")}this.defineConfigOption("asyncTheme",false);this.defineConfigOption("source");this.defineConfigOption("sourceType");this.defineConfigOption("callbackSource");this.defineConfigOption("asyncSource",true);this.defineConfigOption("reliableSource",true);this.defineConfigOption("eventListeners",{});if(A){for(var B in A){if(typeof this.config[B]!="undefined"){this.config[B]=A[B]}else{Zapatec.Log({description:"Unknown config option: "+B})}}}};Zapatec.Widget.prototype.getConfiguration=function(){return this.config};Zapatec.Widget.all=[];Zapatec.Widget.getWidgetById=function(A){return Zapatec.Widget.all[A]};Zapatec.Widget.prototype.addCircularRef=function(A,B){if(!this.widgetCircularRefs){this.widgetCircularRefs=[]}this.widgetCircularRefs.push([A,B])};Zapatec.Widget.prototype.createProperty=function(A,B,C){A[B]=C;this.addCircularRef(A,B)};Zapatec.Widget.prototype.removeCircularRefs=function(){if(!this.widgetCircularRefs){return }for(var A=this.widgetCircularRefs.length-1;A>=0;A--){var B=this.widgetCircularRefs[A];B[0][B[1]]=null;B[0]=null}};Zapatec.Widget.prototype.discard=function(){Zapatec.Widget.all[this.id]=null;this.removeCircularRefs()};Zapatec.Widget.removeCircularRefs=function(){for(var B=Zapatec.Widget.all.length-1;B>=0;B--){var A=Zapatec.Widget.all[B];if(A){A.removeCircularRefs()}}};Zapatec.Utils.addEvent(window,"unload",Zapatec.Widget.removeCircularRefs);Zapatec.Widget.prototype.defineConfigOption=function(B,A){if(typeof this.config[B]=="undefined"){if(typeof A=="undefined"){this.config[B]=null}else{this.config[B]=A}}};Zapatec.Widget.prototype.addUserEventListeners=function(){for(var A in this.config.eventListeners){if(this.config.eventListeners.hasOwnProperty(A)){this.addEventListener(A,this.config.eventListeners[A])}}};Zapatec.Widget.prototype.addStandardEventListeners=function(){this.addEventListener("loadThemeError",Zapatec.Widget.loadThemeError)};Zapatec.Widget.loadThemeError=function(B){var A="Can't load theme.";if(B&&B.errorDescription){A+=" "+B.errorDescription}Zapatec.Log({description:A})};Zapatec.Widget.prototype.loadTheme=function(){if(typeof this.config.theme=="string"&&this.config.theme.length){var C=this.config.theme.lastIndexOf("/");if(C>=0){C++;this.config.themePath=this.config.theme.substring(0,C);this.config.theme=this.config.theme.substring(C)}C=this.config.theme.lastIndexOf(".");if(C>=0){this.config.theme=this.config.theme.substring(0,C)}this.config.theme=this.config.theme.toLowerCase()}else{this.config.theme=""}if(this.config.theme){this.fireEvent("loadThemeStart");this.themeLoaded=false;var A=this;var B=this.config.themePath+this.config.theme+".css";Zapatec.Transport.loadCss({url:B,async:this.config.asyncTheme,onLoad:function(){A.fireEvent("loadThemeEnd");A.themeLoaded=true;A.hideLoader()},onError:function(D){A.fireEvent("loadThemeEnd");A.fireEvent("loadThemeError",D);A.themeLoaded=true;A.hideLoader()}})}};Zapatec.Widget.prototype.getClassName=function(A){var B=[];if(A&&A.prefix){B.push(A.prefix)}if(this.config.theme!=""){B.push(this.config.theme.charAt(0).toUpperCase());B.push(this.config.theme.substr(1))}if(A&&A.suffix){B.push(A.suffix)}return B.join("")};Zapatec.Widget.prototype.formElementId=function(A){var B=[];if(A&&A.prefix){B.push(A.prefix)}else{B.push("zpWidget")}B.push(this.id);if(A&&A.suffix){B.push(A.suffix)}else{B.push("-")}if(typeof this.widgetUniqueIdCounter=="undefined"){this.widgetUniqueIdCounter=0}else{this.widgetUniqueIdCounter++}B.push(this.widgetUniqueIdCounter);return B.join("")};Zapatec.Widget.prototype.showLoader=function(B){if(this.container!=null&&this.config.theme&&!this.themeLoaded){if(!Zapatec.windowLoaded){var A=this;Zapatec.Utils.addEvent(window,"load",function(){A.showLoader(B)});return null}if(typeof (Zapatec.Indicator)=="undefined"){var A=this;Zapatec.Transport.loadJS({module:"indicator",onLoad:function(){if(A.themeLoaded){return null}A.showLoader(B)}});return null}this.loader=new Zapatec.Indicator({container:this.container,themePath:Zapatec.zapatecPath+"../zpextra/themes/indicator/"});this.loader.start(B||"loading");this.container.style.visibility="hidden"}};Zapatec.Widget.prototype.hideLoader=function(){if(this.loader&&this.loader.isActive()){this.container.style.visibility="";this.loader.stop()}};Zapatec.Widget.prototype.showContainer=function(A,C,B){return this.showHideContainer(A,C,B,true)};Zapatec.Widget.prototype.hideContainer=function(A,C,B){return this.showHideContainer(A,C,B,false)};Zapatec.Widget.prototype.showHideContainer=function(C,E,D,A){if(this.container==null){return null}if(C&&C.length>0&&typeof (Zapatec.Effects)=="undefined"){var B=this;Zapatec.Transport.loadJS({url:Zapatec.zapatecPath+"../zpeffects/src/effects.js",onLoad:function(){B.showHideContainer(C,E,D,A)}});return false}if(E==null&&isNaN(parseInt(E))){E=5}if(!C||C.length==0){if(A){this.container.style.display=this.originalContainerDisplay;this.originalContainerDisplay=null}else{this.originalContainerDisplay=this.container.style.display;this.container.style.display="none"}if(D){D()}}else{if(A){Zapatec.Effects.show(this.container,E,C,D)}else{Zapatec.Effects.hide(this.container,E,C,D)}}return true};Zapatec.Widget.prototype.loadData=function(oArg){if(typeof this.config.callbackSource=="function"){var oSource=this.config.callbackSource(oArg);if(oSource){if(typeof oSource.source!="undefined"){this.config.source=oSource.source}if(typeof oSource.sourceType!="undefined"){this.config.sourceType=oSource.sourceType}}}if(this.config.source!=null&&this.config.sourceType!=null){var sSourceType=this.config.sourceType.toLowerCase();if(sSourceType=="html"){this.fireEvent("loadDataStart");this.loadDataHtml(Zapatec.Widget.getElementById(this.config.source));this.fireEvent("loadDataEnd")}else{if(sSourceType=="html/text"){this.fireEvent("loadDataStart");this.loadDataHtmlText(this.config.source);this.fireEvent("loadDataEnd")}else{if(sSourceType=="html/url"){this.fireEvent("fetchSourceStart");var oWidget=this;Zapatec.Transport.fetch({url:this.config.source,async:this.config.asyncSource,onLoad:function(oRequest){oWidget.fireEvent("fetchSourceEnd");oWidget.fireEvent("loadDataStart");oWidget.loadDataHtmlText(oRequest.responseText);oWidget.fireEvent("loadDataEnd")},onError:function(oError){oWidget.fireEvent("fetchSourceError",oError);oWidget.fireEvent("fetchSourceEnd");oWidget.fireEvent("loadDataEnd")}})}else{if(sSourceType=="json"){this.fireEvent("loadDataStart");if(typeof this.config.source=="object"){this.loadDataJson(this.config.source)}else{if(this.config.reliableSource){this.loadDataJson(eval("("+this.config.source+")"))}else{this.loadDataJson(Zapatec.Transport.parseJson({strJson:this.config.source}))}}this.fireEvent("loadDataEnd")}else{if(sSourceType=="json/url"){this.fireEvent("fetchSourceStart");var oWidget=this;Zapatec.Transport.fetchJsonObj({url:this.config.source,async:this.config.asyncSource,reliable:this.config.reliableSource,onLoad:function(oResult){oWidget.fireEvent("fetchSourceEnd");oWidget.fireEvent("loadDataStart");oWidget.loadDataJson(oResult);oWidget.fireEvent("loadDataEnd")},onError:function(oError){oWidget.fireEvent("fetchSourceError",oError);oWidget.fireEvent("fetchSourceEnd");oWidget.fireEvent("loadDataEnd")}})}else{if(sSourceType=="xml"){this.fireEvent("loadDataStart");if(typeof this.config.source=="object"){this.loadDataXml(this.config.source)}else{this.loadDataXml(Zapatec.Transport.parseXml({strXml:this.config.source}))}this.fireEvent("loadDataEnd")}else{if(sSourceType=="xml/url"){this.fireEvent("fetchSourceStart");var oWidget=this;Zapatec.Transport.fetchXmlDoc({url:this.config.source,async:this.config.asyncSource,onLoad:function(oResult){oWidget.fireEvent("fetchSourceEnd");oWidget.fireEvent("loadDataStart");oWidget.loadDataXml(oResult);oWidget.fireEvent("loadDataEnd")},onError:function(oError){oWidget.fireEvent("fetchSourceError",oError);oWidget.fireEvent("fetchSourceEnd");oWidget.fireEvent("loadDataEnd")}})}}}}}}}}else{this.fireEvent("loadDataStart");this.loadDataHtml(Zapatec.Widget.getElementById(this.config.source));this.fireEvent("loadDataEnd")}};Zapatec.Widget.prototype.loadDataHtml=function(A){};Zapatec.Widget.prototype.loadDataHtmlText=function(A){var B=Zapatec.Transport.parseHtml(A);this.loadDataHtml(B.firstChild)};Zapatec.Widget.prototype.loadDataJson=function(A){};Zapatec.Widget.prototype.loadDataXml=function(A){};Zapatec.Widget.prototype.editData=function(A){this.fireEvent("editData",A)};Zapatec.Widget.prototype.editDataGet=function(){return null};Zapatec.Widget.prototype.editDataCancel=function(){this.fireEvent("editDataCancel");if(typeof this.hide=="function"){this.hide()}};Zapatec.Widget.prototype.editDataReturn=function(A){this.fireEvent("editDataReturn",A);if(!A.widget||typeof A.widget.editDataReceive!="function"){return }A.widget.editDataReceive({data:this.editDataGet()});this.editDataCancel()};Zapatec.Widget.prototype.editDataReceive=function(A){this.fireEvent("editDataReceive",A)};Zapatec.Widget.callMethod=function(B,C){var A=Zapatec.Widget.getWidgetById(B);if(A&&typeof A[C]=="function"){var D=[].slice.call(arguments,2);return A[C].apply(A,D)}};Zapatec.Widget.getElementById=function(A){if(typeof A=="string"){return document.getElementById(A)}return A};Zapatec.Widget.getStyle=function(A){var B=A.getAttribute("style")||"";if(typeof B=="string"){return B}return B.cssText};Zapatec.Drag={};Zapatec.Utils.emulateWindowEvent(["mousedown","mousemove","mouseup"]);Zapatec.Drag.currentId=null;Zapatec.Drag.start=function(F,C,E){if(Zapatec.Drag.currentId){return true}var B=document.getElementById(C);if(!B||B.zpDrag){return true}if(!E){E={}}var A=Zapatec.Utils.getMousePos(F||window.event);Zapatec.EventDriven.fireEvent("dragStart",{id:C});B.zpDrag=true;B.zpDragPageX=A.pageX;B.zpDragPageY=A.pageY;if(B.offsetParent){var A=Zapatec.Utils.getElementOffset(B);var D=Zapatec.Utils.getElementOffset(B.offsetParent);B.zpDragLeft=A.left-D.left;B.zpDragTop=A.top-D.top}else{B.zpDragLeft=B.offsetLeft;B.zpDragTop=B.offsetTop}B.zpDragPrevLeft=B.zpDragLeft;B.zpDragPrevTop=B.zpDragTop;B.zpDragV=E.vertical;B.zpDragH=E.horizontal;B.zpDragLimTop=typeof E.limitTop=="number"?E.limitTop:-Infinity;B.zpDragLimBot=typeof E.limitBottom=="number"?E.limitBottom:Infinity;B.zpDragLimLft=typeof E.limitLeft=="number"?E.limitLeft:-Infinity;B.zpDragLimRgh=typeof E.limitRight=="number"?E.limitRight:Infinity;Zapatec.Drag.currentId=C;Zapatec.Utils.addEvent(document,"mousemove",Zapatec.Drag.move);Zapatec.Utils.addEvent(document,"mouseup",Zapatec.Drag.end);return true};Zapatec.Drag.move=function(D){D||(D=window.event);if(!Zapatec.Drag.currentId){return Zapatec.Utils.stopEvent(D)}var C=document.getElementById(Zapatec.Drag.currentId);if(!(C&&C.zpDrag)){return Zapatec.Utils.stopEvent(D)}var B=Zapatec.Utils.getMousePos(D);var A={id:Zapatec.Drag.currentId,startLeft:C.zpDragLeft,startTop:C.zpDragTop,prevLeft:C.zpDragPrevLeft,prevTop:C.zpDragPrevTop,left:0,top:0};if(!C.zpDragV){var F=C.zpDragLeft+B.pageX-C.zpDragPageX;if(C.zpDragLimLft<=F&&C.zpDragLimRgh>=F){C.style.right="";C.style.left=F+"px";A.left=F;C.zpDragPrevLeft=F}else{A.left=A.prevLeft}}if(!C.zpDragH){var E=C.zpDragTop+B.pageY-C.zpDragPageY;if(C.zpDragLimTop<=E&&C.zpDragLimBot>=E){C.style.bottom="";C.style.top=E+"px";A.top=E;C.zpDragPrevTop=E}else{A.top=A.prevTop}}Zapatec.EventDriven.fireEvent("dragMove",A);return Zapatec.Utils.stopEvent(D)};Zapatec.Drag.end=function(C){C||(C=window.event);if(!Zapatec.Drag.currentId){return Zapatec.Utils.stopEvent(C)}var B=document.getElementById(Zapatec.Drag.currentId);if(!(B&&B.zpDrag)){return Zapatec.Utils.stopEvent(C)}Zapatec.Utils.removeEvent(document,"mousemove",Zapatec.Drag.move);Zapatec.Utils.removeEvent(document,"mouseup",Zapatec.Drag.end);var A={id:Zapatec.Drag.currentId,startLeft:B.zpDragLeft,startTop:B.zpDragTop,left:B.zpDragPrevLeft,top:B.zpDragPrevTop};Zapatec.Drag.currentId=null;B.zpDrag=null;B.zpDragPageX=null;B.zpDragPageY=null;B.zpDragLeft=null;B.zpDragTop=null;B.zpDragPrevLeft=null;B.zpDragPrevTop=null;B.zpDragV=null;B.zpDragH=null;B.zpDragLimTop=null;B.zpDragLimBot=null;B.zpDragLimLft=null;B.zpDragLimRgh=null;Zapatec.EventDriven.fireEvent("dragEnd",A);return Zapatec.Utils.stopEvent(C)};

if(!window.Zapatec||(Zapatec&&!Zapatec.include)){alert("You need to include zapatec.js file!")}else{Zapatec.calendarPath=Zapatec.getPath("Zapatec.CalendarWidget")}window.calendar=null;Zapatec.Calendar=function(C,B,E,A){this.bShowHistoryEvent=false;this.activeDiv=null;this.currentDateEl=null;this.getDateStatus=null;this.getDateToolTip=null;this.getDateText=null;this.timeout=null;this.onSelected=E||null;this.onClose=A||null;this.onFDOW=null;this.dragging=false;this.hidden=false;this.minYear=1970;this.maxYear=2050;this.minMonth=0;this.maxMonth=11;this.dateFormat=Zapatec.Calendar.i18n("DEF_DATE_FORMAT");this.ttDateFormat=Zapatec.Calendar.i18n("TT_DATE_FORMAT");this.historyDateFormat="%B %d, %Y";this.isPopup=true;this.weekNumbers=true;this.noGrab=false;if(Zapatec.Calendar.prefs.fdow||(Zapatec.Calendar.prefs.fdow==0)){this.firstDayOfWeek=parseInt(Zapatec.Calendar.prefs.fdow,10)}else{var D=0;if(typeof C=="number"){D=C}else{if(typeof Zapatec.Calendar._FD=="number"){D=Zapatec.Calendar._FD}}this.firstDayOfWeek=D}this.showsOtherMonths=false;this.dateStr=B;this.showsTime=false;this.sortOrder="asc";this.time24=true;this.timeInterval=null;this.yearStep=2;this.hiliteToday=true;this.multiple=null;this.table=null;this.element=null;this.tbody=new Array();this.firstdayname=null;this.monthsCombo=null;this.hilitedMonth=null;this.activeMonth=null;this.yearsCombo=null;this.hilitedYear=null;this.activeYear=null;this.histCombo=null;this.hilitedHist=null;this.dateClicked=false;this.numberMonths=1;this.controlMonth=1;this.vertical=false;this.monthsInRow=1;this.titles=new Array();this.rowsOfDayNames=new Array();this.helpButton=true;this.disableFdowClick=true;this.disableDrag=false;this.yearNav=true;this.closeButton=true;Zapatec.Calendar._initSDN()};Zapatec.Calendar._initSDN=function(){if(typeof Zapatec.Calendar._TT._SDN=="undefined"){if(typeof Zapatec.Calendar._TT._SDN_len=="undefined"){Zapatec.Calendar._TT._SDN_len=3}var A=[];for(var B=8;B>0;){A[--B]=Zapatec.Calendar._TT._DN[B].substr(0,Zapatec.Calendar._TT._SDN_len)}Zapatec.Calendar._TT._SDN=A;if(typeof Zapatec.Calendar._TT._SMN_len=="undefined"){Zapatec.Calendar._TT._SMN_len=3}A=[];for(var B=12;B>0;){A[--B]=Zapatec.Calendar._TT._MN[B].substr(0,Zapatec.Calendar._TT._SMN_len)}Zapatec.Calendar._TT._SMN=A}if(typeof Zapatec.Calendar._TT._AMPM=="undefined"){Zapatec.Calendar._TT._AMPM={am:"am",pm:"pm"}}};Zapatec.Calendar.i18n=function(C,A){var B="";if(!A){if(Zapatec.Calendar._TT){B=Zapatec.Calendar._TT[C]}if(!B&&Zapatec.Calendar._TT_en){B=Zapatec.Calendar._TT_en[C]}}else{switch(A){case"dn":B=Zapatec.Calendar._TT._DN[C];break;case"sdn":B=Zapatec.Calendar._TT._SDN[C];break;case"mn":B=Zapatec.Calendar._TT._MN[C];break;case"smn":B=Zapatec.Calendar._TT._SMN[C];break;case"ampm":B=Zapatec.Calendar._TT._AMPM[C];break}}if(!B){B=""+C}return B};Zapatec.Calendar._C=null;Zapatec.Calendar.prefs={fdow:null,history:"",sortOrder:"asc",hsize:9};Zapatec.Calendar.savePrefs=function(){Zapatec.Utils.writeCookie("ZP_CAL",Zapatec.Utils.makePref(this.prefs),null,"/",30)};Zapatec.Calendar.loadPrefs=function(){var A=Zapatec.Utils.getCookie("ZP_CAL"),B;if(A){B=Zapatec.Utils.loadPref(A);if(B){Zapatec.Utils.mergeObjects(this.prefs,B)}}};Zapatec.Calendar._add_evs=function(A){var B=Zapatec.Calendar;Zapatec.Utils.addEvent(A,"mouseover",B.dayMouseOver);Zapatec.Utils.addEvent(A,"mousedown",B.dayMouseDown);Zapatec.Utils.addEvent(A,"mouseout",B.dayMouseOut);if(Zapatec.is_ie){Zapatec.Utils.addEvent(A,"dblclick",B.dayMouseDblClick)}};Zapatec.Calendar._del_evs=function(A){var B=this;Zapatec.Utils.removeEvent(A,"mouseover",B.dayMouseOver);Zapatec.Utils.removeEvent(A,"mousedown",B.dayMouseDown);Zapatec.Utils.removeEvent(A,"mouseout",B.dayMouseOut);if(Zapatec.is_ie){Zapatec.Utils.removeEvent(A,"dblclick",B.dayMouseDblClick)}};Zapatec.Calendar.findMonth=function(A){if(typeof A.month!="undefined"){return A}else{if(A.parentNode&&typeof A.parentNode.month!="undefined"){return A.parentNode}}return null};Zapatec.Calendar.findHist=function(A){if(typeof A.histDate!="undefined"){return A}else{if(A.parentNode&&typeof A.parentNode.histDate!="undefined"){return A.parentNode}}return null};Zapatec.Calendar.findYear=function(A){if(typeof A.year!="undefined"){return A}else{if(A.parentNode&&typeof A.parentNode.year!="undefined"){return A.parentNode}}return null};Zapatec.Calendar.showMonthsCombo=function(){var B=Zapatec.Calendar._C;if(!B){return false}var D=B.activeDiv;var J=B.monthsCombo;var F=B.date,K=B.date.getMonth(),C=B.date.getFullYear(),G=(C==B.minYear),I=(C==B.maxYear);for(var H=J.firstChild;H;H=H.nextSibling){var E=H.month;Zapatec.Utils.removeClass(H,"hilite");Zapatec.Utils.removeClass(H,"active");Zapatec.Utils.removeClass(H,"disabled");H.disabled=false;if((G&&E<B.minMonth)||(I&&E>B.maxMonth)){Zapatec.Utils.addClass(H,"disabled");H.disabled=true}if(E==K){Zapatec.Utils.addClass(B.activeMonth=H,"active")}}var L=J.style;L.display="block";if(D.navtype<0){L.left=D.offsetLeft+"px"}else{var A=J.offsetWidth;if(typeof A=="undefined"){A=50}L.left=(D.offsetLeft+D.offsetWidth-A)+"px"}L.top=(D.offsetTop+D.offsetHeight)+"px";B.updateWCH(J)};Zapatec.Calendar.showHistoryCombo=function(){var B=Zapatec.Calendar._C,H,F,D,C,G,I,E,A;if(!B){return false}G=B.histCombo;while(G.firstChild){G.removeChild(G.lastChild)}if(Zapatec.Calendar.prefs.history){H=Zapatec.Calendar.prefs.history.split(/,/);D=0;while(E=H[D++]){E=E.split(/\//);F=Zapatec.Utils.createElement("div");F.className=Zapatec.is_ie?"label-IEfix":"label";F.histDate=new Date(parseInt(E[0],10),parseInt(E[1],10)-1,parseInt(E[2],10),E[3]?parseInt(E[3],10):0,E[4]?parseInt(E[4],10):0);F.appendChild(window.document.createTextNode(F.histDate.print(B.historyDateFormat)));G.appendChild(F);if(F.histDate.dateEqualsTo(B.date)){Zapatec.Utils.addClass(F,"active")}}}C=B.activeDiv;I=G.style;I.display="block";I.left=Math.floor(C.offsetLeft+(C.offsetWidth-G.offsetWidth)/2)+"px";I.top=(C.offsetTop+C.offsetHeight)+"px";B.updateWCH(G);B.bEventShowHistory=true};Zapatec.Calendar.showYearsCombo=function(D){var A=Zapatec.Calendar._C;if(!A){return false}var C=A.activeDiv;var F=A.yearsCombo;if(A.hilitedYear){Zapatec.Utils.removeClass(A.hilitedYear,"hilite")}if(A.activeYear){Zapatec.Utils.removeClass(A.activeYear,"active")}A.activeYear=null;var B=A.date.getFullYear()+(D?1:-1);var I=F.firstChild;var H=false;for(var E=12;E>0;--E){if(B>=A.minYear&&B<=A.maxYear){I.firstChild.data=B;I.year=B;I.style.display="block";H=true}else{I.style.display="none"}I=I.nextSibling;B+=D?A.yearStep:-A.yearStep}if(H){var J=F.style;J.display="block";if(C.navtype<0){J.left=C.offsetLeft+"px"}else{var G=F.offsetWidth;if(typeof G=="undefined"){G=50}J.left=(C.offsetLeft+C.offsetWidth-G)+"px"}J.top=(C.offsetTop+C.offsetHeight)+"px"}A.updateWCH(F)};Zapatec.Calendar.tableMouseUp=function(E){var H=Zapatec.Calendar._C;if(!H){return false}if(H.timeout){clearTimeout(H.timeout)}var D=H.activeDiv;if(!D){return false}var G=Zapatec.Utils.getTargetElement(E);if(typeof (D.navtype)=="undefined"){while(G&&!G.calendar){G=G.parentNode}}E||(E=window.event);Zapatec.Utils.removeClass(D,"active");if(G==D||G.parentNode==D){Zapatec.Calendar.cellClick(D,E)}var C=Zapatec.Calendar.findMonth(G);var A=null;if(C){if(!C.disabled){A=new Date(H.date);if(C.month!=A.getMonth()){A.setMonth(C.month);H.setDate(A,true);H.dateClicked=false;H.callHandler()}}}else{var B=Zapatec.Calendar.findYear(G);if(B){A=new Date(H.date);if(B.year!=A.getFullYear()){A.setFullYear(B.year);H.setDate(A,true);H.dateClicked=false;H.callHandler()}}else{var F=Zapatec.Calendar.findHist(G);if(F&&!F.histDate.dateEqualsTo(H.date)){A=new Date(F.histDate);H._init(H.firstDayOfWeek,H.date=A);H.dateClicked=false;H.callHandler();H.updateHistory()}}}Zapatec.Utils.removeEvent(window.document,"mouseup",Zapatec.Calendar.tableMouseUp);Zapatec.Utils.removeEvent(window.document,"mouseover",Zapatec.Calendar.tableMouseOver);Zapatec.Utils.removeEvent(window.document,"mousemove",Zapatec.Calendar.tableMouseOver);H._hideCombos();Zapatec.Calendar._C=null;return Zapatec.Utils.stopEvent(E)};Zapatec.Calendar.tableMouseOver=function(U){var M=Zapatec.Calendar._C;if(!M){return }var D=M.activeDiv;var W=Zapatec.Utils.getTargetElement(U);if(W==D||W.parentNode==D){Zapatec.Utils.addClass(D,"hilite active");Zapatec.Utils.addClass(D.parentNode,"rowhilite")}else{if(typeof D.navtype=="undefined"||(D.navtype!=50&&((D.navtype==0&&!M.histCombo)||Math.abs(D.navtype)>2))){Zapatec.Utils.removeClass(D,"active")}Zapatec.Utils.removeClass(D,"hilite");Zapatec.Utils.removeClass(D.parentNode,"rowhilite")}U||(U=window.event);if(D.navtype==50&&W!=D){var G=Zapatec.Utils.getAbsolutePos(D);var J=D.offsetWidth;var I=U.clientX;var L;var A=true;if(I>G.x+J){L=I-G.x-J;A=false}else{L=G.x-I}if(L<0){L=0}var N=D._range;var P=D._current;var V=M.currentDate;var T=(V.getHours()>=12);var B=D.firstChild.data;var H=Math.floor(L/10)%N.length;for(var S=N.length;--S>=0;){if(N[S]==P){break}}while(H-->0){if(A){if(--S<0){S=N.length-1}}else{if(++S>=N.length){S=0}}}if(M.getDateStatus){var O=null;var F=null;var C=new Date(V);if(D.className.indexOf("ampm",0)!=-1){O=V.getMinutes();if(B!=N[S]){F=(N[S]==Zapatec.Calendar.i18n("pm","ampm"))?((V.getHours()==0)?(12):(V.getHours()+12)):(V.getHours()-12)}else{F=V.getHours()}C.setHours(F)}if(D.className.indexOf("hour",0)!=-1){O=V.getMinutes();F=(!M.time24)?((T)?((N[S]!=12)?(parseInt(N[S],10)+12):(12)):((N[S]!=12)?(N[S]):(0))):(N[S]);C.setHours(F)}if(D.className.indexOf("minute",0)!=-1){F=V.getHours();O=N[S];C.setMinutes(O)}}var Q=false;if(M.getDateStatus){Q=M.getDateStatus(C,V.getFullYear(),V.getMonth(),V.getDate(),parseInt(F,10),parseInt(O,10))}if(Q==false){if(!((!M.time24)&&(N[S]==Zapatec.Calendar.i18n("pm","ampm"))&&(F>23))){D.firstChild.data=N[S]}}M.onUpdateTime()}var R=Zapatec.Calendar.findMonth(W);if(R){if(!R.disabled){if(R.month!=M.date.getMonth()){if(M.hilitedMonth){Zapatec.Utils.removeClass(M.hilitedMonth,"hilite")}Zapatec.Utils.addClass(R,"hilite");M.hilitedMonth=R}else{if(M.hilitedMonth){Zapatec.Utils.removeClass(M.hilitedMonth,"hilite")}}}}else{if(M.hilitedMonth){Zapatec.Utils.removeClass(M.hilitedMonth,"hilite")}var K=Zapatec.Calendar.findYear(W);if(K){if(K.year!=M.date.getFullYear()){if(M.hilitedYear){Zapatec.Utils.removeClass(M.hilitedYear,"hilite")}Zapatec.Utils.addClass(K,"hilite");M.hilitedYear=K}else{if(M.hilitedYear){Zapatec.Utils.removeClass(M.hilitedYear,"hilite")}}}else{if(M.hilitedYear){Zapatec.Utils.removeClass(M.hilitedYear,"hilite")}var E=Zapatec.Calendar.findHist(W);if(E){if(!E.histDate.dateEqualsTo(M.date)){if(M.hilitedHist){Zapatec.Utils.removeClass(M.hilitedHist,"hilite")}Zapatec.Utils.addClass(E,"hilite");M.hilitedHist=E}else{if(M.hilitedHist){Zapatec.Utils.removeClass(M.hilitedHist,"hilite")}}}else{if(M.hilitedHist){Zapatec.Utils.removeClass(M.hilitedHist,"hilite")}}}}return Zapatec.Utils.stopEvent(U)};Zapatec.Calendar.tableMouseDown=function(A){if(Zapatec.Utils.getTargetElement(A)==Zapatec.Utils.getElement(A)){return Zapatec.Utils.stopEvent(A)}};Zapatec.Calendar.calDragIt=function(D){D||(D=window.event);var E=Zapatec.Calendar._C;if(!E){Zapatec.Calendar.calDragEnd()}if(!E.disableDrag){if(!(E&&E.dragging)){return false}var G=D.clientX+window.document.body.scrollLeft;var F=D.clientY+window.document.body.scrollTop;E.hideShowCovered();var C=E.element.style,A=G-E.xOffs,B=F-E.yOffs;C.left=A+"px";C.top=B+"px";Zapatec.Utils.setupWCH(E.WCH,A,B)}return Zapatec.Utils.stopEvent(D)};Zapatec.Calendar.calDragEnd=function(A){var B=Zapatec.Calendar._C;Zapatec.Utils.removeEvent(window.document,"mousemove",Zapatec.Calendar.calDragIt);Zapatec.Utils.removeEvent(window.document,"mouseover",Zapatec.Calendar.calDragIt);Zapatec.Utils.removeEvent(window.document,"mouseup",Zapatec.Calendar.calDragEnd);if(!B){return false}B.dragging=false;Zapatec.Calendar.tableMouseUp(A);B.hideShowCovered()};Zapatec.Calendar.dayMouseDown=function(C){var A=true;var B=Zapatec.Utils.getElement(C);if(B.className.indexOf("disabled")!=-1||B.className.indexOf("true")!=-1){return false}var D=B.calendar;while(!D){B=B.parentNode;D=B.calendar}D.bEventShowHistory=false;D.activeDiv=B;Zapatec.Calendar._C=D;if(B.navtype!=300){if(B.navtype==50){if(!((D.timeInterval==null)||((D.timeInterval<60)&&(B.className.indexOf("hour",0)!=-1)))){A=false}B._current=B.firstChild.data;if(A){Zapatec.Utils.addEvent(window.document,"mousemove",Zapatec.Calendar.tableMouseOver)}}else{if(((B.navtype==201)||(B.navtype==202))&&(D.timeInterval>30)&&(B.timePart.className.indexOf("minute",0)!=-1)){A=false}if(A){Zapatec.Utils.addEvent(window.document,Zapatec.is_ie5?"mousemove":"mouseover",Zapatec.Calendar.tableMouseOver)}}if(A){Zapatec.Utils.addClass(B,"hilite active")}Zapatec.Utils.addEvent(window.document,"mouseup",Zapatec.Calendar.tableMouseUp)}else{if(D.isPopup){D._dragStart(C)}else{Zapatec.Calendar._C=null}}if(B.navtype==-1||B.navtype==1){if(D.timeout){clearTimeout(D.timeout)}D.timeout=setTimeout("Zapatec.Calendar.showMonthsCombo()",250)}else{if(B.navtype==-2||B.navtype==2){if(D.timeout){clearTimeout(D.timeout)}D.timeout=setTimeout((B.navtype>0)?"Zapatec.Calendar.showYearsCombo(true)":"Zapatec.Calendar.showYearsCombo(false)",250)}else{if(B.navtype==0&&Zapatec.Calendar.prefs.history){if(D.timeout){clearTimeout(D.timeout)}D.timeout=setTimeout("Zapatec.Calendar.showHistoryCombo()",250)}else{D.timeout=null}}}return Zapatec.Utils.stopEvent(C)};Zapatec.Calendar.dayMouseDblClick=function(A){Zapatec.Calendar.cellClick(Zapatec.Utils.getElement(A),A||window.event);if(Zapatec.is_ie){window.document.selection.empty()}};Zapatec.Calendar.dayMouseOver=function(D){var C=Zapatec.Utils.getElement(D),A=C.caldate;while(!C.calendar){C=C.parentNode;A=C.caldate}var E=C.calendar;var B=C.timePart;if(A){A=new Date(A[0],A[1],A[2]);if(A.getDate()!=C.caldate[2]){A.setDate(C.caldate[2])}}if(Zapatec.Utils.isRelated(C,D)||Zapatec.Calendar._C||C.className.indexOf("disabled")!=-1||C.className.indexOf("true")!=-1){return false}if(C.ttip){if(C.ttip.substr(0,1)=="_"){C.ttip=A.print(C.calendar.ttDateFormat)+C.ttip.substr(1)}C.calendar.showHint(C.ttip)}if(C.navtype!=300){if(!((E.timeInterval==null)||(C.className.indexOf("ampm",0)!=-1)||((E.timeInterval<60)&&(C.className.indexOf("hour",0)!=-1)))&&(C.navtype==50)){return Zapatec.Utils.stopEvent(D)}if(((C.navtype==201)||(C.navtype==202))&&(E.timeInterval>30)&&(B.className.indexOf("minute",0)!=-1)){return Zapatec.Utils.stopEvent(D)}Zapatec.Utils.addClass(C,"hilite");if(A){Zapatec.Utils.addClass(C.parentNode,"rowhilite")}}return Zapatec.Utils.stopEvent(D)};Zapatec.Calendar.dayMouseOut=function(B){var A=Zapatec.Utils.getElement(B);while(!A.calendar){A=A.parentNode;caldate=A.caldate}if(Zapatec.Utils.isRelated(A,B)||Zapatec.Calendar._C||A.className.indexOf("disabled")!=-1||A.className.indexOf("true")!=-1){return false}Zapatec.Utils.removeClass(A,"hilite");if(A.caldate){Zapatec.Utils.removeClass(A.parentNode,"rowhilite")}if(A.calendar){A.calendar.showHint(Zapatec.Calendar.i18n("SEL_DATE"))}return Zapatec.Utils.stopEvent(B)};Zapatec.Calendar.cellClick=function(C,U){var K=C.calendar;var G=false;var B=false;var V=null;while(!K){C=C.parentNode;K=C.calendar}if(C.className.indexOf("disabled")!=-1||C.className.indexOf("true")!=-1){return false}if(typeof C.navtype=="undefined"){if(K.currentDateEl){Zapatec.Utils.removeClass(K.currentDateEl,"selected");Zapatec.Utils.addClass(C,"selected");G=(K.currentDateEl==C);if(!G){K.currentDateEl=C}}var D=new Date(C.caldate[0],C.caldate[1],C.caldate[2]);if(D.getDate()!=C.caldate[2]){D.setDate(C.caldate[2])}K.date.setDateOnly(D);K.currentDate.setDateOnly(D);V=K.date;K.dateClicked=true;if(K.multiple){K._toggleMultipleDate(new Date(V))}B=true;if(C.otherMonth){K._init(K.firstDayOfWeek,V)}K.onSetTime()}else{if(C.navtype==200){Zapatec.Utils.removeClass(C,"hilite");K.callCloseHandler();return }V=new Date(K.date);if(C.navtype==0&&!K.bEventShowHistory){V.setDateOnly(new Date())}K.dateClicked=false;var J=V.getFullYear();var Q=V.getMonth();function I(Y){var Z=V.getDate();var X=V.getMonthDays(Y);if(Z>X){V.setDate(X)}V.setMonth(Y)}switch(C.navtype){case 400:Zapatec.Utils.removeClass(C,"hilite");var L=Zapatec.Calendar.i18n("ABOUT");if(typeof L!="undefined"){L+=K.showsTime?Zapatec.Calendar.i18n("ABOUT_TIME"):""}else{L='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <support@zapatec.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://www.zapatec.com\n'}alert(L);return ;case -2:if(J>K.minYear){V.setFullYear(J-1)}break;case -1:if(Q>0){I(Q-1)}else{if(J-->K.minYear){V.setFullYear(J);I(11)}}break;case 1:if(Q<11){I(Q+1)}else{if(J<K.maxYear){V.setFullYear(J+1);I(0)}}break;case 2:if(J<K.maxYear){V.setFullYear(J+1)}break;case 100:K.setFirstDayOfWeek(C.fdow);Zapatec.Calendar.prefs.fdow=K.firstDayOfWeek;Zapatec.Calendar.savePrefs();if(K.onFDOW){K.onFDOW(K.firstDayOfWeek)}return ;case 50:var V=K.currentDate;if(C.className.indexOf("ampm",0)>=0){}else{if(!((K.timeInterval==null)||((K.timeInterval<60)&&(C.className.indexOf("hour",0)!=-1)))){break}}var M=C._range;var O=C.firstChild.data;var S=(V.getHours()>=12);for(var R=M.length;--R>=0;){if(M[R]==O){break}}if(U&&U.shiftKey){if(--R<0){R=M.length-1}}else{if(++R>=M.length){R=0}}if(K.getDateStatus){var N=null;var F=null;var A=new Date(V);if(C.className.indexOf("ampm",0)!=-1){N=V.getMinutes();F=(M[R]==Zapatec.Calendar.i18n("pm","ampm"))?((V.getHours()==12)?(V.getHours()):(V.getHours()+12)):(V.getHours()-12);if(K.getDateStatus&&K.getDateStatus(A,V.getFullYear(),V.getMonth(),V.getDate(),parseInt(F,10),parseInt(N,10))){var H;if(M[R]==Zapatec.Calendar.i18n("pm","ampm")){H=-5}else{H=5}hours=F;minutes=N;do{minutes+=H;if(minutes>=60){minutes-=60;++hours;if(hours>=24){hours-=24}A.setHours(hours)}if(minutes<0){minutes+=60;--hours;if(hours<0){hours+=24}A.setHours(hours)}A.setMinutes(minutes);if(!K.getDateStatus(A,V.getFullYear(),V.getMonth(),V.getDate(),parseInt(hours,10),parseInt(minutes,10))){F=hours;N=minutes;if(F>12){R=1}else{R=0}K.date.setHours(F);K.date.setMinutes(N);K.onSetTime()}}while((F!=hours)||(N!=minutes))}A.setHours(F)}if(C.className.indexOf("hour",0)!=-1){N=V.getMinutes();F=(!K.time24)?((S)?((M[R]!=12)?(parseInt(M[R],10)+12):(12)):((M[R]!=12)?(M[R]):(0))):(M[R]);A.setHours(F)}if(C.className.indexOf("minute",0)!=-1){F=V.getHours();N=M[R];A.setMinutes(N)}}var P=false;if(K.getDateStatus){P=K.getDateStatus(A,V.getFullYear(),V.getMonth(),V.getDate(),parseInt(F,10),parseInt(N,10))}if(!P){C.firstChild.data=M[R]}K.onUpdateTime();return ;case 201:case 202:var T=C.timePart;var V=K.currentDate;if((T.className.indexOf("minute",0)!=-1)&&(K.timeInterval>30)){break}var W=parseInt(T.firstChild.data,10);var S=(V.getHours()>=12);var M=T._range;for(var R=M.length;--R>=0;){if(W==M[R]){W=R;break}}var E=T._step;if(C.navtype==201){W=E*Math.floor(W/E);W+=E;if(W>=M.length){W=0}}else{W=E*Math.ceil(W/E);W-=E;if(W<0){W=M.length-E}}if(K.getDateStatus){var N=null;var F=null;var A=new Date(V);if(T.className=="hour"){N=V.getMinutes();F=(!K.time24)?((S)?((M[W]!=12)?(parseInt(M[W],10)+12):(12)):((M[W]!=12)?(M[W]):(0))):(M[W]);A.setHours(F)}if(T.className=="minute"){F=V.getHours();N=W;A.setMinutes(M[W])}}var P=false;if(K.getDateStatus){P=K.getDateStatus(A,V.getFullYear(),V.getMonth(),V.getDate(),parseInt(F,10),parseInt(N,10))}if(!P){T.firstChild.data=M[W]}K.onUpdateTime();return ;case 0:if(K.getDateStatus&&((K.getDateStatus(V,V.getFullYear(),V.getMonth(),V.getDate())==true)||(K.getDateStatus(V,V.getFullYear(),V.getMonth(),V.getDate())=="disabled"))){return false}break}if(!V.equalsTo(K.date)){if((C.navtype>=-2&&C.navtype<=2)&&(C.navtype!=0)){K._init(K.firstDayOfWeek,V,true);return }K.setDate(V);B=!(C.navtype&&(C.navtype>=-2&&C.navtype<=2))}}if(B){K.callHandler()}if(G){Zapatec.Utils.removeClass(C,"hilite");K.callCloseHandler()}};Zapatec.Calendar.prototype.create=function(K){var G=null;if(!K){G=window.document.getElementsByTagName("body")[0];this.isPopup=true;this.WCH=Zapatec.Utils.createWCH()}else{G=K;this.isPopup=false}this.currentDate=this.date=this.dateStr?new Date(this.dateStr):new Date();var T=Zapatec.Utils.createElement("table");this.table=T;T.cellSpacing=0;T.cellPadding=0;Zapatec.Utils.createProperty(T,"calendar",this);Zapatec.Utils.addEvent(T,"mousedown",Zapatec.Calendar.tableMouseDown);var J=Zapatec.Utils.createElement("div");this.element=J;J.className="calendar";if(Zapatec.is_opera){T.style.width=(this.monthsInRow*((this.weekNumbers)?(8):(7))*2+4.4*this.monthsInRow)+"em"}if(this.isPopup){J.style.position="absolute";J.style.display="none"}J.appendChild(T);var C=null;var F=null;var I=this;var D=function(Y,X,W){C=Zapatec.Utils.createElement("td",F);C.colSpan=X;C.className="button";if(Math.abs(W)<=2){C.className+=" nav"}Zapatec.Calendar._add_evs(C);Zapatec.Utils.createProperty(C,"calendar",I);C.navtype=W;if(Y.substr(0,1)!="&"){C.appendChild(document.createTextNode(Y))}else{C.innerHTML=Y}return C};var E=function(W,X){C=Zapatec.Utils.createElement("td",W);C.colSpan=X;C.className="button";C.innerHTML="<div>&nbsp</div>";return C};var U=((this.weekNumbers)?(8):(7))*this.monthsInRow-2;var S=Zapatec.Utils.createElement("thead",T);if(this.numberMonths==1){this.title=S}F=Zapatec.Utils.createElement("tr",S);if(this.helpButton){D("?",1,400).ttip=Zapatec.Calendar.i18n("INFO")}else{E(F,1)}this.title=D("&nbsp;",U,300);this.title.className="title";if(this.isPopup){if(!this.disableDrag){this.title.ttip=Zapatec.Calendar.i18n("DRAG_TO_MOVE");this.title.style.cursor="move"}if(this.closeButton){D("&#x00d7;",1,200).ttip=Zapatec.Calendar.i18n("CLOSE")}else{E(F,1)}}else{E(F,1)}F=Zapatec.Utils.createElement("tr",S);this._nav_py=D("&#x00ab;",1,-2);this._nav_py.ttip=Zapatec.Calendar.i18n("PREV_YEAR");this._nav_pm=D("&#x2039;",1,-1);this._nav_pm.ttip=Zapatec.Calendar.i18n("PREV_MONTH");this._nav_now=D(Zapatec.Calendar.i18n("TODAY"),U-2,0);this._nav_now.ttip=Zapatec.Calendar.i18n("GO_TODAY");this._nav_nm=D("&#x203a;",1,1);this._nav_nm.ttip=Zapatec.Calendar.i18n("NEXT_MONTH");this._nav_ny=D("&#x00bb;",1,2);this._nav_ny.ttip=Zapatec.Calendar.i18n("NEXT_YEAR");var V=Math.floor(this.numberMonths/this.monthsInRow);if(this.numberMonths%this.monthsInRow>0){++V}for(var L=1;L<=V;++L){var S=Zapatec.Utils.createElement("thead",T);if(Zapatec.is_opera){S.style.display="table-row-group"}if(this.numberMonths!=1){F=Zapatec.Utils.createElement("tr",S);var U=5;this.weekNumbers&&++U;this.titles[L]=new Array();for(var M=1;(M<=this.monthsInRow)&&((L-1)*this.monthsInRow+M<=this.numberMonths);++M){E(F,1);this.titles[L][M]=D("&nbsp;",U,300);this.titles[L][M].className="title";E(F,1)}}F=Zapatec.Utils.createElement("tr",S);F.className="daynames";for(M=1;(M<=this.monthsInRow)&&((L-1)*this.monthsInRow+M<=this.numberMonths);++M){if(this.weekNumbers){C=Zapatec.Utils.createElement("td",F);C.className="name wn";C.appendChild(window.document.createTextNode(Zapatec.Calendar.i18n("WK")));if(M>1){Zapatec.Utils.addClass(C,"month-left-border")}var R=Zapatec.Calendar.i18n("WK");if(R==null){R=""}}for(var Q=7;Q>0;--Q){C=Zapatec.Utils.createElement("td",F);C.appendChild(document.createTextNode("&nbsp;"))}}this.firstdayname=F.childNodes[this.weekNumbers?1:0];this.rowsOfDayNames[L]=this.firstdayname;this._displayWeekdays();var B=Zapatec.Utils.createElement("tbody",T);this.tbody[L]=B;for(Q=6;Q>0;--Q){F=Zapatec.Utils.createElement("tr",B);for(M=1;(M<=this.monthsInRow)&&((L-1)*this.monthsInRow+M<=this.numberMonths);++M){if(this.weekNumbers){C=Zapatec.Utils.createElement("td",F);C.appendChild(document.createTextNode("&nbsp;"))}for(var N=7;N>0;--N){C=Zapatec.Utils.createElement("td",F);C.appendChild(document.createTextNode("&nbsp;"));Zapatec.Utils.createProperty(C,"calendar",this);Zapatec.Calendar._add_evs(C)}}}}var H=Zapatec.Utils.createElement("tfoot",T);if(this.showsTime){F=Zapatec.Utils.createElement("tr",H);F.className="time";var A;if(this.monthsInRow!=1){C=Zapatec.Utils.createElement("td",F);A=C.colSpan=Math.ceil((((this.weekNumbers)?8:7)*(this.monthsInRow-1))/2);C.className="timetext";C.innerHTML="&nbsp"}C=Zapatec.Utils.createElement("td",F);C.className="timetext";C.colSpan=this.weekNumbers?2:1;C.innerHTML=Zapatec.Calendar.i18n("TIME")||"&nbsp;";(function(){function b(q,u,g,t){var v,p,r,l,h;if(t){C=Zapatec.Utils.createElement("td",F);C.colSpan=1;if(I.showsTime!="seconds"){++C.colSpan}C.className="parent-"+q;v=Zapatec.Utils.createElement("table",C);v.cellSpacing=v.cellPadding=0;if(q=="hour"){v.align="right"}v.className="calendar-time-scroller";p=Zapatec.Utils.createElement("tbody",v);r=Zapatec.Utils.createElement("tr",p);l=Zapatec.Utils.createElement("tr",p)}else{r=F}h=Zapatec.Utils.createElement("td",r);h.className=q;h.appendChild(window.document.createTextNode(u));Zapatec.Utils.createProperty(h,"calendar",I);h.ttip=Zapatec.Calendar.i18n("TIME_PART");h.navtype=50;h._range=[];if(!t){h._range=g}else{h.rowSpan=2;for(var o=g;o<=t;++o){var n;if(o<10&&t>=10){n="0"+o}else{n=""+o}h._range[h._range.length]=n}var m=Zapatec.Utils.createElement("td",r);m.className="up";m.navtype=201;Zapatec.Utils.createProperty(m,"calendar",I);m.timePart=h;if(Zapatec.is_khtml){m.innerHTML="&nbsp;"}Zapatec.Calendar._add_evs(m);var s=Zapatec.Utils.createElement("td",l);s.className="down";s.navtype=202;Zapatec.Utils.createProperty(s,"calendar",I);s.timePart=h;if(Zapatec.is_khtml){s.innerHTML="&nbsp;"}Zapatec.Calendar._add_evs(s)}Zapatec.Calendar._add_evs(h);return h}var e=I.currentDate.getHours();var W=I.currentDate.getMinutes();if(I.showsTime=="seconds"){var Z=I.currentDate.getSeconds()}var f=!I.time24;var X=(e>12);if(f&&X){e-=12}var c=b("hour",e,f?1:0,f?12:23);c._step=(I.timeInterval>30)?(I.timeInterval/60):1;C=Zapatec.Utils.createElement("td",F);C.innerHTML=":";C.className="colon";var a=b("minute",W,0,59);a._step=((I.timeInterval)&&(I.timeInterval<60))?(I.timeInterval):5;if(I.showsTime=="seconds"){C=Zapatec.Utils.createElement("td",F);C.innerHTML=":";C.className="colon";var Y=b("minute",Z,0,59);Y._step=5}var d=null;if(f){d=b("ampm",X?Zapatec.Calendar.i18n("pm","ampm"):Zapatec.Calendar.i18n("am","ampm"),[Zapatec.Calendar.i18n("am","ampm"),Zapatec.Calendar.i18n("pm","ampm")]);d.className+=" button"}else{Zapatec.Utils.createElement("td",F).innerHTML="&nbsp;"}I.onSetTime=function(){var l=this.currentDate.getHours();var m=this.currentDate.getMinutes();if(this.showsTime=="seconds"){var i=I.currentDate.getSeconds()}if(this.timeInterval){m+=this.timeInterval-((m-1+this.timeInterval)%this.timeInterval)-1}while(m>=60){m-=60;++l}if(this.timeInterval>60){var g=this.timeInterval/60;if(l%g!=0){l+=g-((l-1+g)%g)-1}if(l>=24){l-=24}}var n=new Date(this.currentDate);if(this.getDateStatus&&this.getDateStatus(this.currentDate,this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),l,m)){hours=l;minutes=m;do{if(this.timeInterval){if(this.timeInterval<60){minutes+=this.timeInterval}else{l+=this.timeInterval/60}}else{minutes+=5}if(minutes>=60){minutes-=60;hours+=1}if(hours>=24){hours-=24}n.setMinutes(minutes);n.setHours(hours);if(!this.getDateStatus(n,this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),hours,minutes)){l=hours;m=minutes}}while((l!=hours)||(m!=minutes))}this.currentDate.setMinutes(m);this.currentDate.setHours(l);var h=(l>=12);if(h&&f&&l!=12){l-=12}if(!h&&f&&l==0){l=12}c.firstChild.data=(l<10)?("0"+l):l;a.firstChild.data=(m<10)?("0"+m):m;if(this.showsTime=="seconds"){Y.firstChild.data=(i<10)?("0"+i):i}if(f){d.firstChild.data=h?Zapatec.Calendar.i18n("pm","ampm"):Zapatec.Calendar.i18n("am","ampm")}};I.onUpdateTime=function(){var i=this.currentDate;var l=parseInt(c.firstChild.data,10);if(f){if(/pm/i.test(d.firstChild.data)&&l<12){l+=12}else{if(/am/i.test(d.firstChild.data)&&l==12){l=0}}}var n=i.getDate();var g=i.getMonth();var o=i.getFullYear();i.setHours(l);i.setMinutes(parseInt(a.firstChild.data,10));if(this.showsTime=="seconds"){i.setSeconds(parseInt(Y.firstChild.data,10))}i.setFullYear(o);i.setMonth(g);i.setDate(n);this.dateClicked=false;this.callHandler()}})();if(this.monthsInRow!=1){C=Zapatec.Utils.createElement("td",F);C.colSpan=((this.weekNumbers)?8:7)*(this.monthsInRow-1)-Math.ceil(A);C.className="timetext";C.innerHTML="&nbsp"}}else{this.onSetTime=this.onUpdateTime=function(){}}F=Zapatec.Utils.createElement("tr",H);F.className="footrow";C=D(Zapatec.Calendar.i18n("SEL_DATE"),this.weekNumbers?(8*this.numberMonths):(7*this.numberMonths),300);C.className="ttip";if(this.isPopup&&!this.disableDrag){C.ttip=Zapatec.Calendar.i18n("DRAG_TO_MOVE");C.style.cursor="move"}this.tooltips=C;J=this.monthsCombo=Zapatec.Utils.createElement("div",this.element);J.className="combo";for(Q=0;Q<12;++Q){var P=Zapatec.Utils.createElement("div");P.className=Zapatec.is_ie?"label-IEfix":"label";P.month=Q;P.appendChild(window.document.createTextNode(Zapatec.Calendar.i18n(Q,"smn")));J.appendChild(P)}J=this.yearsCombo=Zapatec.Utils.createElement("div",this.element);J.className="combo";for(Q=12;Q>0;--Q){var O=Zapatec.Utils.createElement("div");O.className=Zapatec.is_ie?"label-IEfix":"label";O.appendChild(window.document.createTextNode("&nbsp;"));J.appendChild(O)}J=this.histCombo=Zapatec.Utils.createElement("div",this.element);J.className="combo history";this._init(this.firstDayOfWeek,this.date);G.appendChild(this.element)};Zapatec.Calendar._keyEvent=function(D){if(!window.calendar){return false}(Zapatec.is_ie)&&(D=window.event);var E=window.calendar;var B=(Zapatec.is_ie||D.type=="keypress");var A=D.keyCode;var C=new Date(E.date);if(D.ctrlKey){switch(A){case 37:B&&Zapatec.Calendar.cellClick(E._nav_pm);break;case 38:B&&Zapatec.Calendar.cellClick(E._nav_py);break;case 39:B&&Zapatec.Calendar.cellClick(E._nav_nm);break;case 40:B&&Zapatec.Calendar.cellClick(E._nav_ny);break;default:return false}}else{switch(A){case 32:Zapatec.Calendar.cellClick(E._nav_now);break;case 27:B&&E.callCloseHandler();break;case 37:if(B&&!E.multiple){C.setTime(C.getTime()-86400000);E.setDate(C)}break;case 38:if(B&&!E.multiple){C.setTime(C.getTime()-7*86400000);E.setDate(C)}break;case 39:if(B&&!E.multiple){C.setTime(C.getTime()+86400000);E.setDate(C)}break;case 40:if(B&&!E.multiple){C.setTime(C.getTime()+7*86400000);E.setDate(C)}break;case 13:if(B){Zapatec.Calendar.cellClick(E.currentDateEl)}break;default:return false}}return Zapatec.Utils.stopEvent(D)};Zapatec.Calendar.prototype._init=function(Q,t,N){var I=new Date(),q=I.getDate(),b=I.getFullYear(),h=I.getMonth();if(this.getDateStatus&&!N){var Z=this.getDateStatus(t,t.getFullYear(),t.getMonth(),t.getDate());var F=new Date(t);while(((Z==true)||(Z=="disabled"))&&(F.getMonth()==t.getMonth())){t.setTime(t.getTime()+86400000);var Z=this.getDateStatus(t,t.getFullYear(),t.getMonth(),t.getDate())}if(F.getMonth()!=t.getMonth()){t=new Date(F);while(((Z==true)||(Z=="disabled"))&&(F.getMonth()==t.getMonth())){t.setTime(t.getTime()-86400000);var Z=this.getDateStatus(t,t.getFullYear(),t.getMonth(),t.getDate())}}if(F.getMonth()!=t.getMonth()){N=true;t=new Date(F)}}var E=t.getFullYear();var A=t.getMonth();var v=Math.floor(this.numberMonths/this.monthsInRow);var P;var T,a,K;if(!this.vertical){T=(this.controlMonth-1);P=A-T}else{a=((this.numberMonths-1)%this.monthsInRow)+1;K=(this.controlMonth-1)%this.monthsInRow;bottom=(K>=(a)?(a):(K));T=(K)*(v-1)+Math.floor((this.controlMonth-1)/this.monthsInRow)+bottom;P=A-T}var M=E;if(P<0){P+=12;--M}var U=P+this.numberMonths-1;var S=M;if(U>11){U-=12;++S}function W(i){Zapatec.Calendar._del_evs(i);i.disabled=true;i.className="button";i.innerHTML="<div>&nbsp</div>"}function D(l,i){Zapatec.Calendar._add_evs(l);l.disabled=false;l.className="button nav";l.innerHTML=i}if((M<=this.minYear)||!this.yearNav){if(!this._nav_py.disabled){W(this._nav_py)}}else{if(this._nav_py.disabled){D(this._nav_py,"&#x00ab;")}}if(S>=this.maxYear||!this.yearNav){if(!this._nav_ny.disabled){W(this._nav_ny)}}else{if(this._nav_ny.disabled){D(this._nav_ny,"&#x00bb;")}}if(((M==this.minYear)&&(P<=this.minMonth))||(M<this.minYear)){if(!this._nav_pm.disabled){W(this._nav_pm)}}else{if(this._nav_pm.disabled){D(this._nav_pm,"&#x2039;")}}if(((S==this.maxYear)&&(U>=this.maxMonth))||(S>this.maxYear)){if(!this._nav_nm.disabled){W(this._nav_nm)}}else{if(this._nav_nm.disabled){D(this._nav_nm,"&#x203a;")}}upperMonth=this.maxMonth+1;upperYear=this.maxYear;if(upperMonth>11){upperMonth-=12;++upperYear}bottomMonth=this.minMonth-1;bottomYear=this.minYear;if(bottomMonth<0){bottomMonth+=12;--bottomYear}maxDate1=new Date(S,U,t.getMonthDays(U),23,59,59,999);maxDate2=new Date(upperYear,upperMonth,1,0,0,0,0);minDate1=new Date(M,P,1,0,0,0,0);minDate2=new Date(bottomYear,bottomMonth,t.getMonthDays(bottomMonth),23,59,59,999);if(maxDate1.getTime()>maxDate2.getTime()){t.setTime(t.getTime()-(maxDate1.getTime()-maxDate2.getTime()))}if(minDate1.getTime()<minDate2.getTime()){t.setTime(t.getTime()+(minDate2.getTime()-minDate1.getTime())+1)}delete maxDate1;delete maxDate2;delete minDate1;delete minDate2;this.firstDayOfWeek=Q;if(!N){this.currentDate=t}this.date=t;(this.date=new Date(this.date)).setDateOnly(t);E=this.date.getFullYear();A=this.date.getMonth();var H=t.getMonth();var G=this.date.getDate();var e=t.getMonthDays();var R=new Array();if(this.numberMonths%this.monthsInRow>0){++v}for(var o=1;o<=v;++o){R[o]=new Array();for(var p=1;(p<=this.monthsInRow)&&((o-1)*this.monthsInRow+p<=this.numberMonths);++p){var d=new Date(t);if(this.vertical){var u=t.getMonth()-T+((p-1)*(v-1)+(o-1)+((a<p)?(a):(p-1)))}else{var u=t.getMonth()-T+(o-1)*this.monthsInRow+p-1}if(u<0){d.setFullYear(d.getFullYear()-1);u=12+u}if(u>11){d.setFullYear(d.getFullYear()+1);u=u-12}d.setDate(1);d.setMonth(u);var m=(d.getDay()-this.firstDayOfWeek)%7;if(m<0){m+=7}var V=d.getHours();d.setDate(-m);d.setDate(d.getDate()+1);if(V!=d.getHours()){d.setDate(1);d.setMonth(u);d.setDate(-m);d.setDate(d.getDate()+1)}R[o][p]=d}}var B=Zapatec.Calendar.i18n(A,"smn");var C=Zapatec.Calendar.i18n("WEEKEND");var n=this.multiple?(this.datesCells={}):null;var f=this.getDateText;for(var o=1;o<=v;++o){var J=this.tbody[o].firstChild;for(var r=7;--r>0;J=J.nextSibling){var X=J.firstChild;var w=false;for(var p=1;(p<=this.monthsInRow)&&((o-1)*this.monthsInRow+p<=this.numberMonths);++p){t=R[o][p];if(this.weekNumbers){X.className=" day wn";X.innerHTML=t.getWeekNumber();if(p>1){Zapatec.Utils.addClass(X,"month-left-border")}X=X.nextSibling}J.className="daysrow";var Y;for(j=7;X&&(Y=t.getDate())&&(j>0);t.setDate(Y+1),((t.getDate()==Y)?(t.setHours(1)&&t.setDate(Y+1)):(false)),X=X.nextSibling,--j){var L=t.getDay(),c=t.getMonth(),g=t.getFullYear();X.className=" day";if((!this.weekNumbers)&&(j==7)&&(p!=1)){Zapatec.Utils.addClass(X,"month-left-border")}if((j==1)&&(p!=this.monthsInRow)){Zapatec.Utils.addClass(X,"month-right-border")}if(this.vertical){u=H-T+((p-1)*(v-1)+(o-1)+((a<p)?(a):(p-1)))}else{u=H-T+((o-1)*this.monthsInRow+p-1)}if(u<0){u=12+u}if(u>11){u=u-12}var s=!(X.otherMonth=!(c==u));if(!s){if(this.showsOtherMonths){X.className+=" othermonth"}else{X.className+=" true";X.innerHTML="<div>&nbsp;</div>";continue}}else{w=true}X.innerHTML=f?f(t,g,c,Y):Y;n&&(n[t.print("%Y%m%d")]=X);if(this.getDateStatus){var Z=this.getDateStatus(t,g,c,Y);if(this.getDateToolTip){var O=this.getDateToolTip(t,g,c,Y);if(O){X.title=O}}if(Z==true){X.className+=" disabled"}else{X.className+=" "+Z}}if(!X.disabled){X.caldate=[g,c,Y];X.ttip="_";if(!this.multiple&&s&&Y==this.currentDate.getDate()&&this.hiliteToday&&(c==this.currentDate.getMonth())&&(g==this.currentDate.getFullYear())){X.className+=" selected";this.currentDateEl=X}if(g==b&&c==h&&Y==q){X.className+=" today";X.ttip+=Zapatec.Calendar.i18n("PART_TODAY")}if((C!=null)&&(C.indexOf(L.toString())!=-1)){X.className+=X.otherMonth?" oweekend":" weekend"}}}if(!(w||this.showsOtherMonths)){J.className="emptyrow"}}if((r==1)&&(o<v)){if(J.className=="emptyrow"){J=J.previousSibling}X=J.firstChild;while(X!=null){Zapatec.Utils.addClass(X,"month-bottom-border");X=X.nextSibling}}}}if(this.numberMonths==1){this.title.innerHTML=Zapatec.Calendar.i18n(A,"mn")+", "+E;if(this.params&&this.params.titleHtml){if(typeof this.params.titleHtml=="function"){this.title.innerHTML=this.params.titleHtml(this.title.innerHTML,A,E)}else{this.title.innerHTML+=this.params.titleHtml}}}else{if(this.params&&this.params.titleHtml){if(typeof this.params.titleHtml=="function"){this.title.innerHTML=this.params.titleHtml(Zapatec.Calendar.i18n(A,"mn")+", "+E,A,E)}else{this.title.innerHTML=this.params.titleHtml}}for(var o=1;o<=v;++o){for(var p=1;(p<=this.monthsInRow)&&((o-1)*this.monthsInRow+p<=this.numberMonths);++p){if(this.vertical){u=A-T+((p-1)*(v-1)+(o-1)+((a<p)?(a):(p-1)))}else{u=A-T+(o-1)*this.monthsInRow+p-1}validYear=E;if(u<0){--validYear;u=12+u}if(u>11){++validYear;u=u-12}this.titles[o][p].innerHTML=Zapatec.Calendar.i18n(u,"mn")+", "+validYear}}}this.onSetTime();this._initMultipleDates();this.updateWCH()};Zapatec.Calendar.prototype._initMultipleDates=function(){if(this.multiple){for(var B in this.multiple){var A=this.datesCells[B];var C=this.multiple[B];if(!C){continue}if(A){A.className+=" selected"}}}};Zapatec.Calendar.prototype._toggleMultipleDate=function(B){if(this.multiple){var C=B.print("%Y%m%d");var A=this.datesCells[C];if(A){var D=this.multiple[C];if(!D){Zapatec.Utils.addClass(A,"selected");this.multiple[C]=B}else{Zapatec.Utils.removeClass(A,"selected");delete this.multiple[C]}}}};Zapatec.Calendar.prototype.setDateToolTipHandler=function(A){this.getDateToolTip=A};Zapatec.Calendar.prototype.setDate=function(B,D){if(!B){B=new Date()}if(!B.equalsTo(this.date)){var C=B.getFullYear(),A=B.getMonth();if(C<this.minYear||(C==this.minYear&&A<this.minMonth)){this.showHint("<div class='error'>"+Zapatec.Calendar.i18n("E_RANGE")+" </div>")}else{if(C>this.maxYear||(C==this.maxYear&&A>this.maxMonth)){this.showHint("<div class='error'> "+Zapatec.Calendar.i18n("E_RANGE")+"</div>")}}this._init(this.firstDayOfWeek,B,D)}};Zapatec.Calendar.prototype.showHint=function(A){this.tooltips.innerHTML=A};Zapatec.Calendar.prototype.reinit=function(){this._init(this.firstDayOfWeek,this.date)};Zapatec.Calendar.prototype.refresh=function(){var B=this.isPopup?null:this.element.parentNode;var A=parseInt(this.element.style.left);var C=parseInt(this.element.style.top);this.destroy();this.dateStr=this.date;this.create(B);if(this.isPopup){this.showAt(A,C)}else{this.show()}};Zapatec.Calendar.prototype.setFirstDayOfWeek=function(B){if(this.firstDayOfWeek!=B){this._init(B,this.date);var C=Math.floor(this.numberMonths/this.monthsInRow);if(this.numberMonths%this.monthsInRow>0){++C}for(var A=1;A<=C;++A){this.firstdayname=this.rowsOfDayNames[A];this._displayWeekdays()}}};Zapatec.Calendar.prototype.setDateStatusHandler=Zapatec.Calendar.prototype.setDisabledHandler=function(A){this.getDateStatus=A};Zapatec.Calendar.prototype.setRange=function(C,E){var B,D=Math.min(C,E),F=Math.max(C,E);this.minYear=B=Math.floor(D);this.minMonth=(B==D)?0:Math.ceil((D-B)*100-1);this.maxYear=B=Math.floor(F);this.maxMonth=(B==F)?11:Math.ceil((F-B)*100-1)};Zapatec.Calendar.prototype.setMultipleDates=function(A){if(!A||typeof A=="undefined"){return }this.multiple={};for(var B=A.length;--B>=0;){var D=A[B];var C=D.print("%Y%m%d");this.multiple[C]=D}};Zapatec.Calendar.prototype.submitFlatDates=function(){if(typeof this.params.flatCallback=="function"){Zapatec.Utils.sortOrder=(this.sortOrder!="asc"&&this.sortOrder!="desc"&&this.sortOrder!="none")?"none":this.sortOrder;if(this.multiple&&(Zapatec.Utils.sortOrder!="none")){var D=new Array();for(var B in this.multiple){var A=this.multiple[B];if(A){D[D.length]=A}D.sort(Zapatec.Utils.compareDates)}this.multiple={};for(var B=0;B<D.length;B++){var E=D[B];var C=E.print("%Y%m%d");this.multiple[C]=E}}this.params.flatCallback(this)}};Zapatec.Calendar.prototype.callHandler=function(){if(this.onSelected){this.onSelected(this,this.date.print(this.dateFormat))}};Zapatec.Calendar.prototype.updateHistory=function(){var B,D,G,C,E,F="",A=Zapatec.Calendar.prefs.hsize-1;if(Zapatec.Calendar.prefs.history){B=Zapatec.Calendar.prefs.history.split(/,/);D=0;while(D<A&&(C=B[D++])){E=C.split(/\//);G=new Date(parseInt(E[0],10),parseInt(E[1],10)-1,parseInt(E[2],10),parseInt(E[3],10),parseInt(E[4],10));if(!G.dateEqualsTo(this.date)){F+=","+C}}}Zapatec.Calendar.prefs.history=this.date.print("%Y/%m/%d/%H/%M")+F;Zapatec.Calendar.savePrefs()};Zapatec.Calendar.prototype.callCloseHandler=function(){if(this.dateClicked){this.updateHistory()}if(this.onClose){this.onClose(this)}this.hideShowCovered()};Zapatec.Calendar.prototype.destroy=function(){this.hide();Zapatec.Utils.destroy(this.element);Zapatec.Utils.destroy(this.WCH);Zapatec.Calendar._C=null;window.calendar=null};Zapatec.Calendar.prototype.reparent=function(B){var A=this.element;A.parentNode.removeChild(A);B.appendChild(A)};Zapatec.Calendar._checkCalendar=function(B){if(!window.calendar){return false}var A=Zapatec.is_ie?Zapatec.Utils.getElement(B):Zapatec.Utils.getTargetElement(B);for(;A!=null&&A!=calendar.element;A=A.parentNode){}if(A==null){window.calendar.callCloseHandler()}};Zapatec.Calendar.prototype.updateWCH=function(A){Zapatec.Utils.setupWCH_el(this.WCH,this.element,A)};Zapatec.Calendar.prototype.show=function(){var E=this.table.getElementsByTagName("tr");for(var D=E.length;D>0;){var F=E[--D];Zapatec.Utils.removeClass(F,"rowhilite");var C=F.getElementsByTagName("td");for(var B=C.length;B>0;){var A=C[--B];Zapatec.Utils.removeClass(A,"hilite");Zapatec.Utils.removeClass(A,"active")}}if(this.element.style.display!="block"){this.element.style.display="block"}this.hidden=false;if(this.isPopup){this.updateWCH();window.calendar=this;if(!this.noGrab){Zapatec.Utils.addEvent(window.document,"keydown",Zapatec.Calendar._keyEvent);Zapatec.Utils.addEvent(window.document,"keypress",Zapatec.Calendar._keyEvent);Zapatec.Utils.addEvent(window.document,"mousedown",Zapatec.Calendar._checkCalendar)}}this.hideShowCovered()};Zapatec.Calendar.prototype.hide=function(){if(this.isPopup){Zapatec.Utils.removeEvent(window.document,"keydown",Zapatec.Calendar._keyEvent);Zapatec.Utils.removeEvent(window.document,"keypress",Zapatec.Calendar._keyEvent);Zapatec.Utils.removeEvent(window.document,"mousedown",Zapatec.Calendar._checkCalendar)}this.element.style.display="none";Zapatec.Utils.hideWCH(this.WCH);this.hidden=true;this.hideShowCovered()};Zapatec.Calendar.prototype.showAt=function(A,C){var B=this.element.style;B.left=A+"px";B.top=C+"px";this.show()};Zapatec.Calendar.prototype.showAtElement=function(E,F){var B=this;var H=Zapatec.Utils.getElementOffset(E);if(!F||typeof F!="string"){this.showAt(H.x,H.y+E.offsetHeight);return true}this.element.style.display="block";var A=B.element.offsetWidth;var D=B.element.offsetHeight;B.element.style.display="none";var C=F.substr(0,1);var G="l";if(F.length>1){G=F.substr(1,1)}switch(C){case"T":H.y-=D;break;case"B":H.y+=E.offsetHeight;break;case"C":H.y+=(E.offsetHeight-D)/2;break;case"t":H.y+=E.offsetHeight-D;break;case"b":break}switch(G){case"L":H.x-=A;break;case"R":H.x+=E.offsetWidth;break;case"C":H.x+=(E.offsetWidth-A)/2;break;case"l":H.x+=E.offsetWidth-A;break;case"r":break}H.width=A;H.height=D;B.monthsCombo.style.display="none";Zapatec.Utils.fixBoxPosition(H,10);B.showAt(H.x,H.y)};Zapatec.Calendar.prototype.setDateFormat=function(A){this.dateFormat=A};Zapatec.Calendar.prototype.setTtDateFormat=function(A){this.ttDateFormat=A};Zapatec.Calendar.prototype.parseDate=function(C,A){if(!C){return this.setDate(this.date)}if(!A){A=this.dateFormat}var B=Date.parseDate(C,A);return this.setDate(B)};Zapatec.Calendar.prototype.hideShowCovered=function(){if(!Zapatec.is_ie5){return }var P=this;function B(S){var R=S.style.visibility;if(!R){if(window.document.defaultView&&typeof (window.document.defaultView.getComputedStyle)=="function"){if(!Zapatec.is_khtml){R=window.document.defaultView.getComputedStyle(S,"").getPropertyValue("visibility")}else{R=""}}else{if(S.currentStyle){R=S.currentStyle.visibility}else{R=""}}}return R}var Q=["applet","iframe","select"];var C=P.element;var A=Zapatec.Utils.getAbsolutePos(C);var F=A.x;var D=C.offsetWidth+F;var O=A.y;var N=C.offsetHeight+O;for(var H=Q.length;H>0;){var G=window.document.getElementsByTagName(Q[--H]);var E=null;for(var J=G.length;J>0;){E=G[--J];A=Zapatec.Utils.getAbsolutePos(E);var M=A.x;var L=E.offsetWidth+M;var K=A.y;var I=E.offsetHeight+K;if(P.hidden||(M>D)||(L<F)||(K>N)||(I<O)){if(!E.__msh_save_visibility){E.__msh_save_visibility=B(E)}E.style.visibility=E.__msh_save_visibility}else{if(!E.__msh_save_visibility){E.__msh_save_visibility=B(E)}E.style.visibility="hidden"}}}};Zapatec.Calendar.prototype._displayWeekdays=function(){var B=this.firstDayOfWeek;var A=this.firstdayname;var D=Zapatec.Calendar.i18n("WEEKEND");for(k=1;(k<=this.monthsInRow)&&(A);++k){for(var C=0;C<7;++C){A.className=" day name";if((!this.weekNumbers)&&(C==0)&&(k!=1)){Zapatec.Utils.addClass(A,"month-left-border")}if((C==6)&&(k!=this.monthsInRow)){Zapatec.Utils.addClass(A,"month-right-border")}var E=(C+B)%7;if((!this.disableFdowClick)&&((this.params&&this.params.fdowClick)||C)){if(Zapatec.Calendar.i18n("DAY_FIRST")!=null){A.ttip=Zapatec.Calendar.i18n("DAY_FIRST").replace("%s",Zapatec.Calendar.i18n(E,"dn"))}A.navtype=100;A.calendar=this;A.fdow=E;Zapatec.Calendar._add_evs(A)}if((D!=null)&&(D.indexOf(E.toString())!=-1)){Zapatec.Utils.addClass(A,"weekend")}A.innerHTML=Zapatec.Calendar.i18n((C+B)%7,"sdn");A=A.nextSibling}if(this.weekNumbers&&A){A=A.nextSibling}}};Zapatec.Utils.compareDates=function(B,A){if(Zapatec.Calendar.prefs.sortOrder=="asc"){return B-A}else{return A-B}};Zapatec.Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none";this.histCombo.style.display="none";this.updateWCH()};Zapatec.Calendar.prototype._dragStart=function(B){B||(B=window.event);if(this.dragging){return }this.dragging=true;var D=B.clientX+window.document.body.scrollLeft;var C=B.clientY+window.document.body.scrollTop;var A=this.element.style;this.xOffs=D-parseInt(A.left);this.yOffs=C-parseInt(A.top);Zapatec.Utils.addEvent(window.document,"mousemove",Zapatec.Calendar.calDragIt);Zapatec.Utils.addEvent(window.document,"mouseover",Zapatec.Calendar.calDragIt);Zapatec.Utils.addEvent(window.document,"mouseup",Zapatec.Calendar.calDragEnd)};Date._MD=[31,28,31,30,31,30,31,31,30,31,30,31];Date.SECOND=1000;Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;Date.prototype.getMonthDays=function(B){var A=this.getFullYear();if(typeof B=="undefined"){B=this.getMonth()}if(((0==(A%4))&&((0!=(A%100))||(0==(A%400))))&&B==1){return 29}else{return Date._MD[B]}};Date.prototype.getDayOfYear=function(){var A=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var C=new Date(this.getFullYear(),0,0,0,0,0);var B=A-C;return Math.round(B/Date.DAY)};Date.prototype.getWeekNumber=function(){var C=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var B=C.getDay();C.setDate(C.getDate()-(B+6)%7+3);var A=C.valueOf();C.setMonth(0);C.setDate(4);return Math.round((A-C.valueOf())/(7*86400000))+1};Date.prototype.equalsTo=function(A){return((this.getFullYear()==A.getFullYear())&&(this.getMonth()==A.getMonth())&&(this.getDate()==A.getDate())&&(this.getHours()==A.getHours())&&(this.getMinutes()==A.getMinutes()))};Date.prototype.dateEqualsTo=function(A){return((this.getFullYear()==A.getFullYear())&&(this.getMonth()==A.getMonth())&&(this.getDate()==A.getDate()))};Date.prototype.setDateOnly=function(A){var B=new Date(A);this.setDate(1);this.setFullYear(B.getFullYear());this.setMonth(B.getMonth());this.setDate(B.getDate())};Date.prototype.print=function(I){var A=this.getMonth();var H=this.getDate();var J=this.getFullYear();var L=this.getWeekNumber();var M=this.getDay();var Q={};var N=this.getHours();var B=(N>=12);var F=(B)?(N-12):N;var P=this.getDayOfYear();if(F==0){F=12}var C=this.getMinutes();var G=this.getSeconds();Q["%a"]=Zapatec.Calendar.i18n(M,"sdn");Q["%A"]=Zapatec.Calendar.i18n(M,"dn");Q["%b"]=Zapatec.Calendar.i18n(A,"smn");Q["%B"]=Zapatec.Calendar.i18n(A,"mn");Q["%C"]=1+Math.floor(J/100);Q["%d"]=(H<10)?("0"+H):H;Q["%e"]=H;Q["%H"]=(N<10)?("0"+N):N;Q["%I"]=(F<10)?("0"+F):F;Q["%j"]=(P<100)?((P<10)?("00"+P):("0"+P)):P;Q["%k"]=N?N:"0";Q["%l"]=F;Q["%m"]=(A<9)?("0"+(1+A)):(1+A);Q["%M"]=(C<10)?("0"+C):C;Q["%n"]="\n";Q["%p"]=B?"PM":"AM";Q["%P"]=B?"pm":"am";Q["%s"]=Math.floor(this.getTime()/1000);Q["%S"]=(G<10)?("0"+G):G;Q["%t"]="\t";Q["%U"]=Q["%W"]=Q["%V"]=(L<10)?("0"+L):L;Q["%u"]=(M==0)?7:M;Q["%w"]=M?M:"0";Q["%y"]=""+J%100;if(Q["%y"]<10){Q["%y"]="0"+Q["%y"]}Q["%Y"]=J;Q["%%"]="%";var O=/%./g;var K=I.match(O)||[];for(var E=0;E<K.length;E++){var D=Q[K[E]];if(D){O=new RegExp(K[E],"g");I=I.replace(O,D)}}return I};Date.parseDate=function(R,V){var B=V,A=0,G=null,I=null,S=null,N=null,Y=null,Z=new Date(),C={};var O=["%d","%H","%I","%m","%M","%S","%s","%W","%u","%w","%y","%e","%k","%l","%s","%Y","%C"];function D(b){if(Zapatec.Utils.arrIndexOf(O,b)!=-1){return true}return false}function H(){for(var b=N[0];b<N[1];++b){var c=Zapatec.Calendar.i18n(b,Y);if(!c){return null}if(c==R.substr(A,c.length)){S=c.length;return b}}return null}function L(){var b=R.substr(A,S);if(b.length!=S||/$\d+^/.test(b)){return null}return parseInt(b,10)}function T(){var b=(R.substr(A,S).toLowerCase()==Zapatec.Calendar.i18n("pm","ampm"))?true:false;return b||((R.substr(A,S).toLowerCase()==Zapatec.Calendar.i18n("am","ampm"))?false:null)}function K(){return""}function J(b){return(C[b]=I())}function P(b){if(typeof b=="undefined"||b===null){return false}return true}function E(){for(var b=0;b<arguments.length;++b){if(arguments[b]!==null&&typeof arguments[b]!="undefined"&&!isNaN(arguments[b])){return arguments[b]}}return null}if(typeof B!="string"||typeof R!="string"||R==""||B==""){return null}while(B){I=L;S=B.indexOf("%");S=(S==-1)?B.length:S;G=B.slice(0,S);if(G!=R.substr(A,S)){return null}A+=S;B=B.slice(S);if(B==""){break}G=B.slice(0,2);S=2;switch(G){case"%A":case"%a":Y=(G=="%A")?"dn":"sdn";N=[0,7];I=H;break;case"%B":case"%b":Y=(G=="%B")?"mn":"smn";N=[0,12];I=H;break;case"%p":case"%P":I=T;break;case"%Y":S=4;if(D(B.substr(2,2))){return null}while(isNaN(parseInt(R.charAt(A+S-1)))&&S>0){--S}if(S==0){break}break;case"%C":case"%s":S=1;if(D(B.substr(2,2))){return null}while(!isNaN(parseInt(R.charAt(A+S)))){++S}break;case"%k":case"%l":case"%e":S=1;if(D(B.substr(2,2))){return null}if(!isNaN(parseInt(R.charAt(A+1)))){++S}break;case"%j":S=3;break;case"%u":case"%w":S=1;case"%y":case"%m":case"%d":case"%W":case"%H":case"%I":case"%M":case"%S":break}if(J(G)===null){return null}A+=S;B=B.slice(2)}if(P(C["%s"])){Z.setTime(C["%s"]*1000)}else{var M=E(C["%Y"],C["%y"]+ --C["%C"]*100,C["%y"]+(Z.getFullYear()-Z.getFullYear()%100),C["%C"]*100+Z.getFullYear()%100);var a=E(C["%m"]-1,C["%b"],C["%B"]);var U=E(C["%d"]||C["%e"]);if(U===null||a===null){var Q=E(C["%a"],C["%A"],C["%u"]==7?0:C["%u"],C["%w"])}var F=E(C["%H"],C["%k"]);if(F===null&&(P(C["%p"])||P(C["%P"]))){var X=E(C["%p"],C["%P"]);F=E(C["%I"],C["%l"]);F=X?((F==12)?12:(F+12)):((F==12)?(0):F)}if(M||M===0){Z.setFullYear(M)}if(a||a===0){Z.setMonth(a)}if(U||U===0){Z.setDate(U)}if(P(C["%j"])){Z.setMonth(0);Z.setDate(1);Z.setDate(C["%j"])}if(P(Q)){Z.setDate(Z.getDate()+(Q-Z.getDay()))}if(P(C["%W"])){var W=Z.getWeekNumber();if(W!=C["%W"]){Z.setDate(Z.getDate()+(C["%W"]-W)*7)}}if(F!==null){Z.setHours(F)}if(P(C["%M"])){Z.setMinutes(C["%M"])}if(P(C["%S"])){Z.setSeconds(C["%S"])}}if(Z.print(V)!=R){return null}return Z};Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(B){var A=new Date(this);A.__msh_oldSetFullYear(B);if(A.getMonth()!=this.getMonth()){this.setDate(28)}this.__msh_oldSetFullYear(B)};Date.prototype.compareDatesOnly=function(E,D){var C=E.getYear();var B=D.getYear();var A=E.getMonth();var H=D.getMonth();var G=E.getDate();var F=D.getDate();if(C>B){return -1}if(B>C){return 1}if(A>H){return -1}if(H>A){return 1}if(G>F){return -1}if(F>G){return 1}return 0};Zapatec.Setup=function(){};Zapatec.Setup.test=true;Zapatec.Calendar.setup=function(B){paramsList=["id"];function F(L,M){if(typeof B[L]=="undefined"){B[L]=M}paramsList.push(L)}B.id=Zapatec.Utils.generateID("calendar");F("inputField",null);F("displayArea",null);F("button",null);F("eventName","click");F("closeEventName",null);F("ifFormat",Zapatec.Calendar.i18n("DEF_DATE_FORMAT"));F("daFormat","%Y/%m/%d");F("singleClick",true);F("disableFunc",null);F("dateStatusFunc",B.disableFunc);F("dateText",null);F("firstDay",null);F("align","Br");F("range",[1900,2999]);F("weekNumbers",true);F("flat",null);F("flatCallback",null);F("onSelect",null);F("onClose",null);F("onUpdate",null);F("date",null);F("showsTime",false);F("sortOrder","asc");F("timeFormat","24");F("timeInterval",null);F("electric",true);F("step",2);F("position",null);F("cache",false);F("showOthers",false);F("multiple",null);F("saveDate",null);F("fdowClick",false);F("titleHtml",null);F("noHelp",false);F("noCloseButton",false);F("disableYearNav",false);F("disableFdowChange",false);if(B.weekNumbers){B.disableFdowChange=true;B.firstDay=1}F("disableDrag",false);F("numberMonths",1);if((B.numberMonths>12)||(B.numberMonths<1)){B.numberMonths=1}if(B.numberMonths>1){B.showOthers=false}B.numberMonths=parseInt(B.numberMonths,10);F("controlMonth",1);if((B.controlMonth>B.numberMonths)||(B.controlMonth<1)){B.controlMonth=1}B.controlMonth=parseInt(B.controlMonth,10);F("vertical",false);if(B.monthsInRow>B.numberMonths){B.monthsInRow=B.numberMonths}F("monthsInRow",B.numberMonths);B.monthsInRow=parseInt(B.monthsInRow,10);F("multiple",false);if(B.multiple){B.singleClick=false}F("canType",false);var D=["inputField","displayArea","button"];for(var E in D){if(typeof B[D[E]]=="string"){B[D[E]]=document.getElementById(B[D[E]])}}if(!B.inputField){B.canType=false}else{B.inputField.setAttribute("autocomplete","off")}if(!(B.flat||B.multiple||B.inputField||B.displayArea||B.button)){alert("Calendar.setup '"+B.id+"':\n  Nothing to setup (no fields found).  Please check your code");return false}if(((B.timeInterval)&&((B.timeInterval!==Math.floor(B.timeInterval))||((60%B.timeInterval!==0)&&(B.timeInterval%60!==0))))||(B.timeInterval>360)){alert("'"+B.id+"': timeInterval option can only have the following number of minutes:\n1, 2, 3, 4, 5, 6, 10, 15, 30,  60, 120, 180, 240, 300, 360 ");B.timeInterval=null}if(B.date&&!Date.parse(B.date)){alert("'"+B.id+"' Start Date Invalid: "+B.date+".\nSee date option.\nDefaulting to today.");B.date=null}if(B.saveDate){F("cookiePrefix",window.location.href+"--"+B.button.id);var I=B.cookiePrefix;var G=Zapatec.Utils.getCookie(I);if(G!=null){document.getElementById(B.inputField.id).value=G}}for(var J in B){if(typeof B.constructor.prototype[J]!="undefined"){continue}if(Zapatec.Utils.arrIndexOf(paramsList,J)==-1){alert("Wrong config option: "+J)}}function H(M){var L=M.params;var O=(M.dateClicked||L.electric);if(O&&L.flat){if(typeof L.flatCallback=="function"){if(!L.multiple){L.flatCallback(M)}}else{alert("'"+M.id+"': No flatCallback given -- doing nothing.")}return false}if(O&&L.inputField){L.inputField.value=M.currentDate.print(L.ifFormat);if(typeof L.inputField.onchange=="function"){L.inputField.onchange()}}if(O&&L.displayArea){L.displayArea.innerHTML=M.currentDate.print(L.daFormat)}if(O&&L.singleClick&&M.dateClicked){M.callCloseHandler()}if(O&&typeof L.onUpdate=="function"){L.onUpdate(M)}if(L.saveDate){var N=L.cookiePrefix;Zapatec.Utils.writeCookie(N,L.inputField.value,null,"/",L.saveDate)}}if(B.flat!=null){if(typeof B.flat=="string"){B.flat=document.getElementById(B.flat)}if(!B.flat){alert("Calendar.setup '"+B.id+"':\n  Flat specified but can't find parent.");return false}var A=new Zapatec.Calendar(B.firstDay,B.date,B.onSelect||H);A.id=B.id;A.disableFdowClick=B.disableFdowChange;A.showsOtherMonths=B.showOthers;A.showsTime=B.showsTime;A.time24=(B.timeFormat=="24");A.timeInterval=B.timeInterval;A.params=B;A.weekNumbers=B.weekNumbers;A.sortOrder=B.sortOrder.toLowerCase();A.setRange(B.range[0],B.range[1]);A.setDateStatusHandler(B.dateStatusFunc);A.getDateText=B.dateText;A.numberMonths=B.numberMonths;A.controlMonth=B.controlMonth;A.vertical=B.vertical;A.yearStep=B.step;A.monthsInRow=B.monthsInRow;A.helpButton=!B.noHelp;A.closeButton=!B.noCloseButton;A.yearNav=!B.disableYearNav;if(B.ifFormat){A.setDateFormat(B.ifFormat)}if(B.inputField&&B.inputField.type=="text"&&typeof B.inputField.value=="string"){A.parseDate(B.inputField.value)}if(B.multiple){A.setMultipleDates(B.multiple)}A.create(B.flat);A.show();return A}var K=B.button||B.displayArea||B.inputField;if(B.canType){function C(L){L=L||window.event;if(Zapatec.is_ie){L.cancelBubble=true}else{L.stopPropagation()}}Zapatec.Utils.addEvent(B.inputField,"mousedown",C);Zapatec.Utils.addEvent(B.inputField,"keydown",C);Zapatec.Utils.addEvent(B.inputField,"keypress",C);Zapatec.Utils.addEvent(B.inputField,"keyup",function(M){var O=B.inputField?B.ifFormat:B.daFormat;var L=Date.parseDate(B.inputField.value,O);var N=window.calendar;if(N&&L&&!N.hidden){N.setDate(L)}})}K["on"+B.eventName]=function(){var L=B.inputField||B.displayArea;if((!B.canType||B.inputField!=K)&&K.blur){K.blur()}var O=B.inputField?B.ifFormat:B.daFormat;var Q=false;var P=window.calendar;if(B.canType&&(B.inputField==K)&&P&&!P.hidden){return }if(!(P&&B.cache)){window.calendar=P=new Zapatec.Calendar(B.firstDay,B.date,B.onSelect||H,B.onClose||function(R){if(B.cache){R.hide()}else{R.destroy()}});P.id=B.id;P.disableFdowClick=B.disableFdowChange;P.showsTime=B.showsTime;P.time24=(B.timeFormat=="24");P.timeInterval=B.timeInterval;P.weekNumbers=B.weekNumbers;P.numberMonths=B.numberMonths;P.controlMonth=B.controlMonth;P.vertical=B.vertical;P.monthsInRow=B.monthsInRow;P.historyDateFormat=B.ifFormat||B.daFormat;P.helpButton=!B.noHelp;P.disableDrag=B.disableDrag;P.closeButton=!B.noCloseButton;P.yearNav=!B.disableYearNav;P.sortOrder=B.sortOrder.toLowerCase();Q=true}else{if(B.date){P.setDate(B.date)}P.hide()}if(B.multiple){P.setMultipleDates(B.multiple)}P.showsOtherMonths=B.showOthers;P.yearStep=B.step;P.setRange(B.range[0],B.range[1]);P.params=B;P.setDateStatusHandler(B.dateStatusFunc);P.getDateText=B.dateText;P.setDateFormat(O);if(Q){P.create()}if(L){var M;if(L.value){M=L.value}else{M=L.innerHTML}if(M!=""){var N=Date.parseDate(L.value||L.innerHTML,O);if(N!=null){P.setDate(N)}}}if(!B.position){P.showAtElement(B.button||B.displayArea||B.inputField,B.align)}else{P.showAt(B.position[0],B.position[1])}return false};if(B.closeEventName){K["on"+B.closeEventName]=function(){if(window.calendar){window.calendar.callCloseHandler()}}}return A};

Zapatec.Calendar._DN=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday");Zapatec.Calendar._SDN=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun");Zapatec.Calendar._FD=0;Zapatec.Calendar._MN=new Array("January","February","March","April","May","June","July","August","September","October","November","December");Zapatec.Calendar._SMN=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");Zapatec.Calendar._TT_en=Zapatec.Calendar._TT={};Zapatec.Calendar._TT.INFO="About the calendar";Zapatec.Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) zapatec.com 2002-2007\nFor latest version visit: http://www.zapatec.com/\n\n\nDate selection:\n- Use the \xab, \xbb buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.";Zapatec.Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.";Zapatec.Calendar._TT.PREV_YEAR="Prev. year (hold for menu)";Zapatec.Calendar._TT.PREV_MONTH="Prev. month (hold for menu)";Zapatec.Calendar._TT.GO_TODAY="Go Today (hold for history)";Zapatec.Calendar._TT.NEXT_MONTH="Next month (hold for menu)";Zapatec.Calendar._TT.NEXT_YEAR="Next year (hold for menu)";Zapatec.Calendar._TT.SEL_DATE="Select date";Zapatec.Calendar._TT.DRAG_TO_MOVE="Drag to move";Zapatec.Calendar._TT.PART_TODAY=" (today)";Zapatec.Calendar._TT.DAY_FIRST="Display %s first";Zapatec.Calendar._TT.WEEKEND="0,6";Zapatec.Calendar._TT.CLOSE="Close";Zapatec.Calendar._TT.TODAY="Today";Zapatec.Calendar._TT.TIME_PART="(Shift-)Click or drag to change value";Zapatec.Calendar._TT.DEF_DATE_FORMAT="%m/%d/%Y";Zapatec.Calendar._TT.TT_DATE_FORMAT="%a, %b %e";Zapatec.Calendar._TT.WK="wk";Zapatec.Calendar._TT.TIME="Time:";Zapatec.Calendar._TT.E_RANGE="Outside the range";Zapatec.Calendar._TT._AMPM={am:"am",pm:"pm"};if(Zapatec.Calendar._DN){Zapatec.Calendar._TT._DN=Zapatec.Calendar._DN}if(Zapatec.Calendar._SDN){Zapatec.Calendar._TT._SDN=Zapatec.Calendar._SDN}if(Zapatec.Calendar._SDN_len){Zapatec.Calendar._TT._SDN_len=Zapatec.Calendar._SDN_len}if(Zapatec.Calendar._MN){Zapatec.Calendar._TT._MN=Zapatec.Calendar._MN}if(Zapatec.Calendar._SMN){Zapatec.Calendar._TT._SMN=Zapatec.Calendar._SMN}if(Zapatec.Calendar._SMN_len){Zapatec.Calendar._TT._SMN_len=Zapatec.Calendar._SMN_len}Zapatec.Calendar._DN=Zapatec.Calendar._SDN=Zapatec.Calendar._SDN_len=Zapatec.Calendar._MN=Zapatec.Calendar._SMN=Zapatec.Calendar._SMN_len=null;

var UserPicker=Class.create();UserPicker.prototype={initialize:function(E,C,B,D,A){this.fieldAutocomplete=E?E:"autocomplete";this.fieldAutocompleteChoices=C?C:"user_choices";this.fieldValues=B?B:"username";this.fieldContainer=D?D:"blog-authors";this.fieldRowIDPrefix=A?A:"jive-user-";this.startAutoCompleter(this)},startAutoCompleter:function(A){var B=new Ajax.Autocompleter(this.fieldAutocomplete,this.fieldAutocompleteChoices,"view-people-autocomplete.jspa?resultTypes=COMMUNITY&sort=relevance&start=0&view=search&usernameEnabled=true&nameEnabled=true&emailEnabled=true",{tokens:[","," "],updateElement:function(C){A.addUser(Element.collectTextNodesIgnoreClass(C,"informal"),A)},paramName:"query",minChars:1});B.getToken=function(){var C=this.getTokenBounds();return this.element.value.substring(C[0],C[1]).strip().toLowerCase()}},loadWin:function(B,A){this.win=window.open("user-picker!input.jspa?selectedUsers="+encodeURIComponent(B.value)+"&multiple="+A+"&element="+B.getAttributeNode("name").value+"&form="+B.form.getAttributeNode("name").value,"","menubar=yes,location=no,personalbar=no,scrollbars=yes,width=600,height=800,resizable")},removeUser:function(A){if(typeof A!="string"){A=Event.element(A).id.gsub("jive-remove-user-link-","")}if(A&&A.length>0){Element.remove(this.fieldRowIDPrefix+A);var B=$(this.fieldValues).value.split(",");B[B.indexOf(A)]=null;B=B.compact();$(this.fieldValues).value=B.join(",")}},addUser:function(B,A){if(!A){A=this}if(!B){B=$F(A.fieldAutocomplete)}else{B=B.strip()}if(B.length>0){if(B.indexOf(",")>-1){var F=new Array();F=B.split(",");for(var C=0;C<F.length;C++){A.addUser(F[C])}}else{if(!$(A.fieldRowIDPrefix+B)){var D=this._addUserElement(B);$(A.fieldValues).value+=","+B;if(D){D.observe("click",this.removeUser.bindAsEventListener(this),false)}}var E=$F(A.fieldAutocomplete).split(",");if(E.length>0){E.pop()}$(A.fieldAutocomplete).value=E.join(",");Field.focus(A.fieldAutocomplete);new Effect.Highlight(A.fieldRowIDPrefix+B)}}},_addUserElement:function(A){var B=new Element("a",{href:"javascript:;",id:"jive-remove-user-link-"+A}).update("[x]");$(this.fieldContainer).insert(new Element("tr",{id:this.fieldRowIDPrefix+A}).insert(new Element("td").insert(new Element("img",{src:"../people/"+encodeURI(A)+"/avatar/16.png"}))).insert(new Element("td",{width:200}).update(A)).insert(new Element("td").insert(B)));return B}};

var JiveProjectChooser=Class.create();JiveProjectChooser.prototype={initialize:function(A){this.chooserURL=A},handleChange:function(A){if($F(A)==-1){this.openChooser(A.id)}},openChooser:function(A){this.win=window.open(this.chooserURL+"?id="+A,"","menubar=yes,location=no,personalbar=no,scrollbars=yes,width=600,height=800,resizable")},addProject:function(H,G,F){var B=$(H);var C=$A(B.getElementsByTagName("option"));var D=C.find(function(I){return(I.value==G)});if(!D){var E=new Element("option",{value:G});E.update(F);var A=$(C.find(function(I){return(I.value=="")}));A.insert({after:E});B.selectedIndex=-1;E.selected=true}else{B.selectedIndex=-1;D.selected=true}B.focus()}};

var JiveGroupChooser=Class.create();JiveGroupChooser.prototype={initialize:function(A){this.chooserURL=A},handleChange:function(A){if($F(A)==-1){this.openChooser(A.id)}},openChooser:function(A){this.win=window.open(this.chooserURL+"?id="+A,"","menubar=yes,location=no,personalbar=no,scrollbars=yes,width=600,height=800,resizable")},addGroup:function(H,G,F){var B=$(H);var C=$A(B.getElementsByTagName("option"));var D=C.find(function(I){return(I.value==G)});if(!D){var E=new Element("option",{value:G});E.update(F);var A=$(C.find(function(I){return(I.value=="")}));A.insert({after:E});B.selectedIndex=-1;E.selected=true}else{B.selectedIndex=-1;D.selected=true}B.focus()}};

function insertZoomHTML(){var K=document.getElementsByTagName("body").item(0);var g=document.createElement("div");g.setAttribute("id","ZoomSpin");g.style.position="absolute";g.style.left="10px";g.style.top="10px";g.style.visibility="hidden";g.style.zIndex="525";K.insertBefore(g,K.firstChild);var S=document.createElement("img");S.setAttribute("id","SpinImage");S.setAttribute("src",zoomImagesURI+"zoom-spin-1.png");g.appendChild(S);var J=document.createElement("div");J.setAttribute("id","ZoomBox");J.style.position="absolute";J.style.left="10px";J.style.top="10px";J.style.visibility="hidden";J.style.zIndex="499";K.insertBefore(J,g.nextSibling);var T=document.createElement("img");T.onclick=function(n){zoomOut(this,n);return false};T.setAttribute("src",zoomImagesURI+"spacer.gif");T.setAttribute("id","ZoomImage");T.setAttribute("border","0");T.setAttribute("style","-webkit-box-shadow: "+shadowSettings+"0.0)");T.style.display="block";T.style.width="10px";T.style.height="10px";T.style.cursor="pointer";J.appendChild(T);var P=document.createElement("div");P.setAttribute("id","ZoomClose");P.style.position="absolute";if(browserIsIE){P.style.left="-1px";P.style.top="0px"}else{P.style.left="-15px";P.style.top="-15px"}P.style.visibility="hidden";J.appendChild(P);var Q=document.createElement("img");Q.onclick=function(n){zoomOut(this,n);return false};Q.setAttribute("src",zoomImagesURI+"closebox.png");Q.setAttribute("width","30");Q.setAttribute("height","30");Q.setAttribute("border","0");Q.style.cursor="pointer";P.appendChild(Q);if(!document.getElementById("ZoomImage").style.webkitBoxShadow&&!browserIsIE){var O=document.createElement("div");O.setAttribute("id","ShadowBox");O.style.position="absolute";O.style.left="50px";O.style.top="50px";O.style.width="100px";O.style.height="100px";O.style.visibility="hidden";O.style.zIndex="498";K.insertBefore(O,J.nextSibling);var R=document.createElement("table");R.setAttribute("border","0");R.setAttribute("width","100%");R.setAttribute("height","100%");R.setAttribute("cellpadding","0");R.setAttribute("cellspacing","0");O.appendChild(R);var D=document.createElement("tbody");R.appendChild(D);var N=document.createElement("tr");N.style.height="25px";D.appendChild(N);var k=document.createElement("td");k.style.width="27px";N.appendChild(k);var d=document.createElement("img");d.setAttribute("src",zoomImagesURI+"zoom-shadow1.png");d.setAttribute("width","27");d.setAttribute("height","25");d.style.display="block";k.appendChild(d);var j=document.createElement("td");j.setAttribute("background",zoomImagesURI+"zoom-shadow2.png");N.appendChild(j);var C=document.createElement("img");C.setAttribute("src",zoomImagesURI+"spacer.gif");C.setAttribute("height","1");C.setAttribute("width","1");C.style.display="block";j.appendChild(C);var i=document.createElement("td");i.style.width="27px";N.appendChild(i);var a=document.createElement("img");a.setAttribute("src",zoomImagesURI+"zoom-shadow3.png");a.setAttribute("width","27");a.setAttribute("height","25");a.style.display="block";i.appendChild(a);inRow2=document.createElement("tr");D.appendChild(inRow2);var h=document.createElement("td");h.setAttribute("background",zoomImagesURI+"zoom-shadow4.png");inRow2.appendChild(h);var B=document.createElement("img");B.setAttribute("src",zoomImagesURI+"spacer.gif");B.setAttribute("height","1");B.setAttribute("width","1");B.style.display="block";h.appendChild(B);var f=document.createElement("td");f.setAttribute("bgcolor","#ffffff");inRow2.appendChild(f);var A=document.createElement("img");A.setAttribute("src",zoomImagesURI+"spacer.gif");A.setAttribute("height","1");A.setAttribute("width","1");A.style.display="block";f.appendChild(A);var e=document.createElement("td");e.setAttribute("background",zoomImagesURI+"zoom-shadow5.png");inRow2.appendChild(e);var m=document.createElement("img");m.setAttribute("src",zoomImagesURI+"spacer.gif");m.setAttribute("height","1");m.setAttribute("width","1");m.style.display="block";e.appendChild(m);var M=document.createElement("tr");M.style.height="26px";D.appendChild(M);var c=document.createElement("td");c.style.width="27px";M.appendChild(c);var Y=document.createElement("img");Y.setAttribute("src",zoomImagesURI+"zoom-shadow6.png");Y.setAttribute("width","27");Y.setAttribute("height","26");Y.style.display="block";c.appendChild(Y);var b=document.createElement("td");b.setAttribute("background",zoomImagesURI+"zoom-shadow7.png");M.appendChild(b);var l=document.createElement("img");l.setAttribute("src",zoomImagesURI+"spacer.gif");l.setAttribute("height","1");l.setAttribute("width","1");l.style.display="block";b.appendChild(l);var Z=document.createElement("td");Z.style.width="27px";M.appendChild(Z);var X=document.createElement("img");X.setAttribute("src",zoomImagesURI+"zoom-shadow8.png");X.setAttribute("width","27");X.setAttribute("height","26");X.style.display="block";Z.appendChild(X)}if(includeCaption){var F=document.createElement("div");F.setAttribute("id","ZoomCapDiv");F.style.position="absolute";F.style.visibility="hidden";F.style.marginLeft="auto";F.style.marginRight="auto";F.style.zIndex="501";K.insertBefore(F,J.nextSibling);var H=document.createElement("table");H.setAttribute("border","0");H.setAttribute("cellPadding","0");H.setAttribute("cellSpacing","0");F.appendChild(H);var L=document.createElement("tbody");H.appendChild(L);var I=document.createElement("tr");L.appendChild(I);var W=document.createElement("td");W.setAttribute("align","right");I.appendChild(W);var G=document.createElement("img");G.setAttribute("src",zoomImagesURI+"zoom-caption-l.png");G.setAttribute("width","13");G.setAttribute("height","26");G.style.display="block";W.appendChild(G);var V=document.createElement("td");V.setAttribute("background",zoomImagesURI+"zoom-caption-fill.png");V.setAttribute("id","ZoomCaption");V.setAttribute("valign","middle");V.style.fontSize="14px";V.style.fontFamily="Helvetica";V.style.fontWeight="bold";V.style.color="#ffffff";V.style.textShadow="0px 2px 4px #000000";V.style.whiteSpace="nowrap";I.appendChild(V);var U=document.createElement("td");I.appendChild(U);var E=document.createElement("img");E.setAttribute("src",zoomImagesURI+"zoom-caption-r.png");E.setAttribute("width","13");E.setAttribute("height","26");E.style.display="block";U.appendChild(E)}};

var includeCaption=true;var zoomTime=5;var zoomSteps=15;var includeFade=1;var minBorder=90;var shadowSettings="0px 5px 25px rgba(0, 0, 0, ";var zoomImagesURI="/images-global/zoom/";var myWidth=0,myHeight=0,myScroll=0;myScrollWidth=0;myScrollHeight=0;var zoomOpen=false,preloadFrame=1,preloadActive=false,preloadTime=0,imgPreload=new Image(),preloadFail=false;var preloadAnimTimer=0;var zoomActive=new Array();var zoomTimer=new Array();var zoomOrigW=new Array();var zoomOrigH=new Array();var zoomOrigX=new Array();var zoomOrigY=new Array();var zoomID="ZoomBox";var theID="ZoomImage";var zoomCaption="ZoomCaption";var zoomCaptionDiv="ZoomCapDiv";if(navigator.userAgent.indexOf("MSIE")!=-1){var browserIsIE=true}function setupZoom(){prepZooms();insertZoomHTML();zoomdiv=document.getElementById(zoomID);zoomimg=document.getElementById(theID)}function prepZooms(){if(!document.getElementsByTagName){return }var A=document.getElementsByTagName("a");for(i=0;i<A.length;i++){if(A[i].getAttribute("href")){if(A[i].getAttribute("href").search(/(.*)\.(jpg|jpeg|gif|png|bmp|tif|tiff)/gi)!=-1){if(A[i].getAttribute("rel")!="nozoom"){A[i].onclick=function(B){return zoomClick(this,B)};A[i].onmouseover=function(){zoomPreload(this)}}}}}}function zoomPreload(B){var A=B.getAttribute("href");if(imgPreload.src.indexOf(B.getAttribute("href").substr(B.getAttribute("href").lastIndexOf("/")))==-1){preloadActive=true;imgPreload=new Image();imgPreload.onload=function(){preloadActive=false};imgPreload.onerror=function(){preloadFail=true;if(preloadActive){document.getElementById("ZoomSpin").style.visibility="hidden";clearInterval(preloadAnimTimer);preloadAnimTimer=0}};imgPreload.src=A}}function preloadAnimStart(){preloadTime=new Date();document.getElementById("ZoomSpin").style.left=(myWidth/2)+"px";document.getElementById("ZoomSpin").style.top=((myHeight/2)+myScroll)+"px";document.getElementById("ZoomSpin").style.visibility="visible";preloadFrame=1;document.getElementById("SpinImage").src=zoomImagesURI+"zoom-spin-"+preloadFrame+".png";preloadAnimTimer=setInterval("preloadAnim()",100)}function preloadAnim(A){if(preloadActive!=false&&preloadFail==false){document.getElementById("SpinImage").src=zoomImagesURI+"zoom-spin-"+preloadFrame+".png";preloadFrame++;if(preloadFrame>12){preloadFrame=1}}else{if(preloadFail==false){document.getElementById("ZoomSpin").style.visibility="hidden";clearInterval(preloadAnimTimer);preloadAnimTimer=0;zoomIn(preloadFrom)}else{document.getElementById("ZoomSpin").style.visibility="hidden";clearInterval(preloadAnimTimer);preloadAnimTimer=0}}}function zoomClick(C,B){var A=getShift(B);if(!B&&window.event&&(window.event.metaKey||window.event.altKey)){return true}else{if(B&&(B.metaKey||B.altKey)){return true}}getSize();if(preloadActive==true){if(preloadAnimTimer==0){preloadFrom=C;preloadAnimStart()}}else{zoomIn(C,A)}return false}function zoomIn(B,A){zoomimg.src=B.getAttribute("href");if(B.childNodes[0].width){startW=B.childNodes[0].width;startH=B.childNodes[0].height;startPos=findElementPos(B.childNodes[0])}else{startW=50;startH=12;startPos=findElementPos(B)}hostX=startPos[0];hostY=startPos[1];if(document.getElementById("scroller")){hostX=hostX-document.getElementById("scroller").scrollLeft}endW=imgPreload.width;endH=imgPreload.height;if(zoomActive[theID]!=true){if(document.getElementById("ShadowBox")){document.getElementById("ShadowBox").style.visibility="hidden"}else{if(!browserIsIE){if(fadeActive.ZoomImage){clearInterval(fadeTimer.ZoomImage);fadeActive.ZoomImage=false;fadeTimer.ZoomImage=false}document.getElementById("ZoomImage").style.webkitBoxShadow=shadowSettings+"0.0)"}}document.getElementById("ZoomClose").style.visibility="hidden";if(includeCaption){document.getElementById(zoomCaptionDiv).style.visibility="hidden";if(B.getAttribute("title")&&includeCaption){document.getElementById(zoomCaption).innerHTML=B.getAttribute("title")}else{document.getElementById(zoomCaption).innerHTML=""}}zoomOrigW[theID]=startW;zoomOrigH[theID]=startH;zoomOrigX[theID]=hostX;zoomOrigY[theID]=hostY;zoomimg.style.width=startW+"px";zoomimg.style.height=startH+"px";zoomdiv.style.left=hostX+"px";zoomdiv.style.top=hostY+"px";if(includeFade==1){setOpacity(0,zoomID)}zoomdiv.style.visibility="visible";sizeRatio=endW/endH;if(endW>myWidth-minBorder){endW=myWidth-minBorder;endH=endW/sizeRatio}if(endH>myHeight-minBorder){endH=myHeight-minBorder;endW=endH*sizeRatio}zoomChangeX=((myWidth/2)-(endW/2)-hostX);zoomChangeY=(((myHeight/2)-(endH/2)-hostY)+myScroll);zoomChangeW=(endW-startW);zoomChangeH=(endH-startH);if(A){tempSteps=zoomSteps*7}else{tempSteps=zoomSteps}zoomCurrent=0;if(includeFade==1){fadeCurrent=0;fadeAmount=(0-100)/tempSteps}else{fadeAmount=0}zoomTimer[theID]=setInterval("zoomElement('"+zoomID+"', '"+theID+"', "+zoomCurrent+", "+startW+", "+zoomChangeW+", "+startH+", "+zoomChangeH+", "+hostX+", "+zoomChangeX+", "+hostY+", "+zoomChangeY+", "+tempSteps+", "+includeFade+", "+fadeAmount+", 'zoomDoneIn(zoomID)')",zoomTime);zoomActive[theID]=true}}function zoomOut(B,A){if(getShift(A)){tempSteps=zoomSteps*7}else{tempSteps=zoomSteps}if(zoomActive[theID]!=true){if(document.getElementById("ShadowBox")){document.getElementById("ShadowBox").style.visibility="hidden"}else{if(!browserIsIE){if(fadeActive.ZoomImage){clearInterval(fadeTimer.ZoomImage);fadeActive.ZoomImage=false;fadeTimer.ZoomImage=false}document.getElementById("ZoomImage").style.webkitBoxShadow=shadowSettings+"0.0)"}}document.getElementById("ZoomClose").style.visibility="hidden";if(includeCaption&&document.getElementById(zoomCaption).innerHTML!=""){document.getElementById(zoomCaptionDiv).style.visibility="hidden"}startX=parseInt(zoomdiv.style.left);startY=parseInt(zoomdiv.style.top);startW=zoomimg.width;startH=zoomimg.height;zoomChangeX=zoomOrigX[theID]-startX;zoomChangeY=zoomOrigY[theID]-startY;zoomChangeW=zoomOrigW[theID]-startW;zoomChangeH=zoomOrigH[theID]-startH;zoomCurrent=0;if(includeFade==1){fadeCurrent=0;fadeAmount=(100-0)/tempSteps}else{fadeAmount=0}zoomTimer[theID]=setInterval("zoomElement('"+zoomID+"', '"+theID+"', "+zoomCurrent+", "+startW+", "+zoomChangeW+", "+startH+", "+zoomChangeH+", "+startX+", "+zoomChangeX+", "+startY+", "+zoomChangeY+", "+tempSteps+", "+includeFade+", "+fadeAmount+", 'zoomDone(zoomID, theID)')",zoomTime);zoomActive[theID]=true}}function zoomDoneIn(A,B){zoomOpen=true;A=document.getElementById(A);if(document.getElementById("ShadowBox")){setOpacity(0,"ShadowBox");shadowdiv=document.getElementById("ShadowBox");shadowLeft=parseInt(A.style.left)-13;shadowTop=parseInt(A.style.top)-8;shadowWidth=A.offsetWidth+26;shadowHeight=A.offsetHeight+26;shadowdiv.style.width=shadowWidth+"px";shadowdiv.style.height=shadowHeight+"px";shadowdiv.style.left=shadowLeft+"px";shadowdiv.style.top=shadowTop+"px";document.getElementById("ShadowBox").style.visibility="visible";fadeElementSetup("ShadowBox",0,100,5)}else{if(!browserIsIE){fadeElementSetup("ZoomImage",0,0.8,5,0,"shadow")}}if(includeCaption&&document.getElementById(zoomCaption).innerHTML!=""){zoomcapd=document.getElementById(zoomCaptionDiv);zoomcapd.style.top=parseInt(A.style.top)+(A.offsetHeight+15)+"px";zoomcapd.style.left=(myWidth/2)-(zoomcapd.offsetWidth/2)+"px";zoomcapd.style.visibility="visible"}if(!browserIsIE){setOpacity(0,"ZoomClose")}document.getElementById("ZoomClose").style.visibility="visible";if(!browserIsIE){fadeElementSetup("ZoomClose",0,100,5)}document.onkeypress=getKey}function zoomDone(A,B){zoomOpen=false;zoomOrigH[B]="";zoomOrigW[B]="";document.getElementById(A).style.visibility="hidden";zoomActive[B]==false;document.onkeypress=null}function zoomElement(zoomdiv,theID,zoomCurrent,zoomStartW,zoomChangeW,zoomStartH,zoomChangeH,zoomStartX,zoomChangeX,zoomStartY,zoomChangeY,zoomSteps,includeFade,fadeAmount,execWhenDone){if(zoomCurrent==(zoomSteps+1)){zoomActive[theID]=false;clearInterval(zoomTimer[theID]);if(execWhenDone!=""){eval(execWhenDone)}}else{if(includeFade==1){if(fadeAmount<0){setOpacity(Math.abs(zoomCurrent*fadeAmount),zoomdiv)}else{setOpacity(100-(zoomCurrent*fadeAmount),zoomdiv)}}moveW=cubicInOut(zoomCurrent,zoomStartW,zoomChangeW,zoomSteps);moveH=cubicInOut(zoomCurrent,zoomStartH,zoomChangeH,zoomSteps);moveX=cubicInOut(zoomCurrent,zoomStartX,zoomChangeX,zoomSteps);moveY=cubicInOut(zoomCurrent,zoomStartY,zoomChangeY,zoomSteps);document.getElementById(zoomdiv).style.left=moveX+"px";document.getElementById(zoomdiv).style.top=moveY+"px";zoomimg.style.width=moveW+"px";zoomimg.style.height=moveH+"px";zoomCurrent++;clearInterval(zoomTimer[theID]);zoomTimer[theID]=setInterval("zoomElement('"+zoomdiv+"', '"+theID+"', "+zoomCurrent+", "+zoomStartW+", "+zoomChangeW+", "+zoomStartH+", "+zoomChangeH+", "+zoomStartX+", "+zoomChangeX+", "+zoomStartY+", "+zoomChangeY+", "+zoomSteps+", "+includeFade+", "+fadeAmount+", '"+execWhenDone+"')",zoomTime)}}function getKey(A){if(!A){theKey=event.keyCode}else{theKey=A.keyCode}if(theKey==27){zoomOut(this,A)}}function fadeOut(A){if(A.id){fadeElementSetup(A.id,100,0,10)}}function fadeIn(A){if(A.id){fadeElementSetup(A.id,0,100,10)}}var fadeActive=new Array();var fadeQueue=new Array();var fadeTimer=new Array();var fadeClose=new Array();var fadeMode=new Array();function fadeElementSetup(D,F,C,B,E,A){if(fadeActive[D]==true){fadeQueue[D]=new Array(D,F,C,B)}else{fadeSteps=B;fadeCurrent=0;fadeAmount=(F-C)/fadeSteps;fadeTimer[D]=setInterval("fadeElement('"+D+"', '"+fadeCurrent+"', '"+fadeAmount+"', '"+fadeSteps+"')",15);fadeActive[D]=true;fadeMode[D]=A;if(E==1){fadeClose[D]=true}else{fadeClose[D]=false}}}function fadeElement(B,D,A,C){if(D==C){clearInterval(fadeTimer[B]);fadeActive[B]=false;fadeTimer[B]=false;if(fadeClose[B]==true){document.getElementById(B).style.visibility="hidden"}if(fadeQueue[B]&&fadeQueue[B]!=false){fadeElementSetup(fadeQueue[B][0],fadeQueue[B][1],fadeQueue[B][2],fadeQueue[B][3]);fadeQueue[B]=false}}else{D++;if(fadeMode[B]=="shadow"){if(A<0){document.getElementById(B).style.webkitBoxShadow=shadowSettings+(Math.abs(D*A))+")"}else{document.getElementById(B).style.webkitBoxShadow=shadowSettings+(100-(D*A))+")"}}else{if(A<0){setOpacity(Math.abs(D*A),B)}else{setOpacity(100-(D*A),B)}}clearInterval(fadeTimer[B]);fadeTimer[B]=setInterval("fadeElement('"+B+"', '"+D+"', '"+A+"', '"+C+"')",15)}}function setOpacity(C,A){var B=document.getElementById(A).style;if(navigator.userAgent.indexOf("Firefox")!=-1){if(C==100){C=99.9999}}B.filter="alpha(opacity="+C+")";B.opacity=(C/100)}function linear(B,A,D,C){return D*B/C+A}function sineInOut(B,A,D,C){return -D/2*(Math.cos(Math.PI*B/C)-1)+A}function cubicIn(B,A,D,C){return D*(B/=C)*B*B+A}function cubicOut(B,A,D,C){return D*((B=B/C-1)*B*B+1)+A}function cubicInOut(B,A,D,C){if((B/=C/2)<1){return D/2*B*B*B+A}return D/2*((B-=2)*B*B+2)+A}function bounceOut(B,A,D,C){if((B/=C)<(1/2.75)){return D*(7.5625*B*B)+A}else{if(B<(2/2.75)){return D*(7.5625*(B-=(1.5/2.75))*B+0.75)+A}else{if(B<(2.5/2.75)){return D*(7.5625*(B-=(2.25/2.75))*B+0.9375)+A}else{return D*(7.5625*(B-=(2.625/2.75))*B+0.984375)+A}}}}function getSize(){if(self.innerHeight){myWidth=window.innerWidth;myHeight=window.innerHeight;myScroll=window.pageYOffset}else{if(document.documentElement&&document.documentElement.clientHeight){myWidth=document.documentElement.clientWidth;myHeight=document.documentElement.clientHeight;myScroll=document.documentElement.scrollTop}else{if(document.body){myWidth=document.body.clientWidth;myHeight=document.body.clientHeight;myScroll=document.body.scrollTop}}}if(window.innerHeight&&window.scrollMaxY){myScrollWidth=document.body.scrollWidth;myScrollHeight=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){myScrollWidth=document.body.scrollWidth;myScrollHeight=document.body.scrollHeight}else{myScrollWidth=document.body.offsetWidth;myScrollHeight=document.body.offsetHeight}}}function getShift(B){var A=false;if(!B&&window.event){A=window.event.shiftKey}else{if(B){A=B.shiftKey;if(A){B.stopPropagation()}}}return A}function findElementPos(A){var C=0;var B=0;do{C+=A.offsetLeft;B+=A.offsetTop}while(A=A.offsetParent);return Array(C,B)};


// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (Watches == null) var Watches = {};
Watches._path = '/content/dwr';
Watches.isThreadWatched = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'isThreadWatched', p0, callback);
}
Watches.isDocumentWatched = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'isDocumentWatched', p0, callback);
}
Watches.isBlogWatched = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'isBlogWatched', p0, callback);
}
Watches.isBlogPostWatched = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'isBlogPostWatched', p0, callback);
}
Watches.isUserWatched = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'isUserWatched', p0, callback);
}
Watches.isCommunityWatched = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'isCommunityWatched', p0, callback);
}
Watches.isProjectWatched = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'isProjectWatched', p0, callback);
}
Watches.isTaskWatched = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'isTaskWatched', p0, callback);
}
Watches.isSocialGroupWatched = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'isSocialGroupWatched', p0, callback);
}
Watches.watchThread = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'watchThread', p0, callback);
}
Watches.watchDocument = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'watchDocument', p0, callback);
}
Watches.watchBlog = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'watchBlog', p0, callback);
}
Watches.watchBlogPost = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'watchBlogPost', p0, callback);
}
Watches.watchUser = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'watchUser', p0, callback);
}
Watches.watchCommunity = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'watchCommunity', p0, callback);
}
Watches.watchProject = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'watchProject', p0, callback);
}
Watches.watchTask = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'watchTask', p0, callback);
}
Watches.watchSocialGroup = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'watchSocialGroup', p0, callback);
}
Watches.removeThreadWatch = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'removeThreadWatch', p0, callback);
}
Watches.removeDocumentWatch = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'removeDocumentWatch', p0, callback);
}
Watches.removeBlogWatch = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'removeBlogWatch', p0, callback);
}
Watches.removeBlogPostWatch = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'removeBlogPostWatch', p0, callback);
}
Watches.removeUserWatch = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'removeUserWatch', p0, callback);
}
Watches.removeCommunityWatch = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'removeCommunityWatch', p0, callback);
}
Watches.removeProjectWatch = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'removeProjectWatch', p0, callback);
}
Watches.removeTaskWatch = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'removeTaskWatch', p0, callback);
}
Watches.removeSocialGroupWatch = function(p0, callback) {
  dwr.engine._execute(Watches._path, 'Watches', 'removeSocialGroupWatch', p0, callback);
}


